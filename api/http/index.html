<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Task Orchestration and Execution Framework Documentation"><link href=https://aipartnerup.github.io/apflow/api/http/ rel=canonical><link href=../python/ rel=prev><link href=../graphql/ rel=next><link rel=icon href=../../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>HTTP API - apflow Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#api-reference class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="apflow Documentation" class="md-header__button md-logo" aria-label="apflow Documentation" data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> apflow Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> HTTP API </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/aipartnerup/apflow title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> aipartnerup/apflow </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../guides/task-orchestration/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../cli/ class=md-tabs__link> CLI </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../python/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../examples/basic_task/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../architecture/overview/ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../../protocol/ class=md-tabs__link> Protocol </a> </li> <li class=md-tabs__item> <a href=../../development/setup/ class=md-tabs__link> Development </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="apflow Documentation" class="md-nav__button md-logo" aria-label="apflow Documentation" data-md-component=logo> <img src=../../assets/logo.svg alt=logo> </a> apflow Documentation </label> <div class=md-nav__source> <a href=https://github.com/aipartnerup/apflow title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> aipartnerup/apflow </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/hello-world/ class=md-nav__link> <span class=md-ellipsis> Hello World </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/quick-start/ class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/concepts/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7 id=__nav_2_7_label tabindex=0> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_7_label aria-expanded=false> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/tutorials/tutorial-01-first-steps/ class=md-nav__link> <span class=md-ellipsis> First Steps </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/tutorials/tutorial-02-task-trees/ class=md-nav__link> <span class=md-ellipsis> Task Trees </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/tutorials/tutorial-03-dependencies/ class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/task-orchestration/ class=md-nav__link> <span class=md-ellipsis> Task Orchestration </span> </a> </li> <li class=md-nav__item> <a href=../../guides/executor-selection/ class=md-nav__link> <span class=md-ellipsis> Executor Selection </span> </a> </li> <li class=md-nav__item> <a href=../../guides/custom-tasks/ class=md-nav__link> <span class=md-ellipsis> Custom Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../guides/best-practices/ class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> <li class=md-nav__item> <a href=../../guides/cli/ class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=../../guides/api-server/ class=md-nav__link> <span class=md-ellipsis> API Server </span> </a> </li> <li class=md-nav__item> <a href=../../guides/distributed-cluster/ class=md-nav__link> <span class=md-ellipsis> Distributed Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../guides/library-usage/ class=md-nav__link> <span class=md-ellipsis> Library Usage </span> </a> </li> <li class=md-nav__item> <a href=../../guides/scheduler/ class=md-nav__link> <span class=md-ellipsis> Scheduler </span> </a> </li> <li class=md-nav__item> <a href=../../guides/extensions/ class=md-nav__link> <span class=md-ellipsis> Extensions </span> </a> </li> <li class=md-nav__item> <a href=../../guides/environment-variables/ class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=../../guides/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../cli/commands/ class=md-nav__link> <span class=md-ellipsis> Commands </span> </a> </li> <li class=md-nav__item> <a href=../../cli/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../cli/examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../cli/api-gateway/ class=md-nav__link> <span class=md-ellipsis> API Gateway </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../python/ class=md-nav__link> <span class=md-ellipsis> Python API </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> HTTP API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> HTTP API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#base-url class=md-nav__link> <span class=md-ellipsis> Base URL </span> </a> </li> <li class=md-nav__item> <a href=#endpoints class=md-nav__link> <span class=md-ellipsis> Endpoints </span> </a> <nav class=md-nav aria-label=Endpoints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a2a-protocol-endpoints class=md-nav__link> <span class=md-ellipsis> A2A Protocol Endpoints </span> </a> <nav class=md-nav aria-label="A2A Protocol Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-well-knownagent-card class=md-nav__link> <span class=md-ellipsis> GET /.well-known/agent-card </span> </a> </li> <li class=md-nav__item> <a href=#post class=md-nav__link> <span class=md-ellipsis> POST / </span> </a> </li> <li class=md-nav__item> <a href=#cancel-method class=md-nav__link> <span class=md-ellipsis> cancel Method </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-management-endpoints class=md-nav__link> <span class=md-ellipsis> Task Management Endpoints </span> </a> <nav class=md-nav aria-label="Task Management Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post-tasks class=md-nav__link> <span class=md-ellipsis> POST /tasks </span> </a> </li> <li class=md-nav__item> <a href=#get-tasksmethods class=md-nav__link> <span class=md-ellipsis> GET /tasks/methods </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-management-methods class=md-nav__link> <span class=md-ellipsis> Task Management Methods </span> </a> <nav class=md-nav aria-label="Task Management Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#taskscreate class=md-nav__link> <span class=md-ellipsis> tasks.create </span> </a> </li> <li class=md-nav__item> <a href=#tasksget class=md-nav__link> <span class=md-ellipsis> tasks.get </span> </a> </li> <li class=md-nav__item> <a href=#tasksupdate class=md-nav__link> <span class=md-ellipsis> tasks.update </span> </a> </li> <li class=md-nav__item> <a href=#tasksdelete class=md-nav__link> <span class=md-ellipsis> tasks.delete </span> </a> </li> <li class=md-nav__item> <a href=#tasksclone class=md-nav__link> <span class=md-ellipsis> tasks.clone </span> </a> </li> <li class=md-nav__item> <a href=#tasksgenerate class=md-nav__link> <span class=md-ellipsis> tasks.generate </span> </a> </li> <li class=md-nav__item> <a href=#taskslist class=md-nav__link> <span class=md-ellipsis> tasks.list </span> </a> </li> <li class=md-nav__item> <a href=#tasksexecute class=md-nav__link> <span class=md-ellipsis> tasks.execute </span> </a> </li> <li class=md-nav__item> <a href=#tasksdetail class=md-nav__link> <span class=md-ellipsis> tasks.detail </span> </a> </li> <li class=md-nav__item> <a href=#taskschildren class=md-nav__link> <span class=md-ellipsis> tasks.children </span> </a> </li> <li class=md-nav__item> <a href=#taskstree class=md-nav__link> <span class=md-ellipsis> tasks.tree </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunninglist class=md-nav__link> <span class=md-ellipsis> tasks.running.list </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunningstatus class=md-nav__link> <span class=md-ellipsis> tasks.running.status </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunningcount class=md-nav__link> <span class=md-ellipsis> tasks.running.count </span> </a> </li> <li class=md-nav__item> <a href=#taskscancel-tasksrunningcancel class=md-nav__link> <span class=md-ellipsis> tasks.cancel / tasks.running.cancel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#system-endpoints class=md-nav__link> <span class=md-ellipsis> System Endpoints </span> </a> <nav class=md-nav aria-label="System Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post-system class=md-nav__link> <span class=md-ellipsis> POST /system </span> </a> <nav class=md-nav aria-label="POST /system"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#systemhealth class=md-nav__link> <span class=md-ellipsis> system.health </span> </a> </li> <li class=md-nav__item> <a href=#systemexecutors class=md-nav__link> <span class=md-ellipsis> system.executors </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keyset class=md-nav__link> <span class=md-ellipsis> config.llm_key.set </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keyget class=md-nav__link> <span class=md-ellipsis> config.llm_key.get </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keydelete class=md-nav__link> <span class=md-ellipsis> config.llm_key.delete </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#authentication class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> <nav class=md-nav aria-label=Authentication> <ul class=md-nav__list> <li class=md-nav__item> <a href=#jwt-authentication class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#llm-api-key-headers class=md-nav__link> <span class=md-ellipsis> LLM API Key Headers </span> </a> <nav class=md-nav aria-label="LLM API Key Headers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#x-llm-api-key-header class=md-nav__link> <span class=md-ellipsis> X-LLM-API-KEY Header </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#error-responses class=md-nav__link> <span class=md-ellipsis> Error Responses </span> </a> </li> <li class=md-nav__item> <a href=#streaming-support class=md-nav__link> <span class=md-ellipsis> Streaming Support </span> </a> <nav class=md-nav aria-label="Streaming Support"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#server-sent-events-sse-via-tasksexecute class=md-nav__link> <span class=md-ellipsis> Server-Sent Events (SSE) via tasks.execute </span> </a> </li> <li class=md-nav__item> <a href=#websocket-ws class=md-nav__link> <span class=md-ellipsis> WebSocket /ws </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> <nav class=md-nav aria-label=Examples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#complete-example-create-and-execute-task-tree class=md-nav__link> <span class=md-ellipsis> Complete Example: Create and Execute Task Tree </span> </a> </li> <li class=md-nav__item> <a href=#example-with-authentication class=md-nav__link> <span class=md-ellipsis> Example with Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#protocol-identification class=md-nav__link> <span class=md-ellipsis> Protocol Identification </span> </a> <nav class=md-nav aria-label="Protocol Identification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-rpc-protocol-tasks-endpoint class=md-nav__link> <span class=md-ellipsis> JSON-RPC Protocol (/tasks endpoint) </span> </a> </li> <li class=md-nav__item> <a href=#a2a-protocol-endpoint class=md-nav__link> <span class=md-ellipsis> A2A Protocol (/ endpoint) </span> </a> </li> <li class=md-nav__item> <a href=#how-to-distinguish-protocols class=md-nav__link> <span class=md-ellipsis> How to Distinguish Protocols </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#customa2astarletteapplication-custom-routes class=md-nav__link> <span class=md-ellipsis> CustomA2AStarletteApplication Custom Routes </span> </a> <nav class=md-nav aria-label="CustomA2AStarletteApplication Custom Routes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custom-routes-overview class=md-nav__link> <span class=md-ellipsis> Custom Routes Overview </span> </a> </li> <li class=md-nav__item> <a href=#route-handler-architecture class=md-nav__link> <span class=md-ellipsis> Route Handler Architecture </span> </a> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=#jwt-authentication_1 class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-protocol-features class=md-nav__link> <span class=md-ellipsis> A2A Protocol Features </span> </a> <nav class=md-nav aria-label="A2A Protocol Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#push-notification-configuration-callback-mode class=md-nav__link> <span class=md-ellipsis> Push Notification Configuration (Callback Mode) </span> </a> <nav class=md-nav aria-label="Push Notification Configuration (Callback Mode)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-it-works class=md-nav__link> <span class=md-ellipsis> How It Works </span> </a> </li> <li class=md-nav__item> <a href=#configuration-format class=md-nav__link> <span class=md-ellipsis> Configuration Format </span> </a> </li> <li class=md-nav__item> <a href=#push-notification-config-fields class=md-nav__link> <span class=md-ellipsis> Push Notification Config Fields </span> </a> </li> <li class=md-nav__item> <a href=#callback-payload-format class=md-nav__link> <span class=md-ellipsis> Callback Payload Format </span> </a> </li> <li class=md-nav__item> <a href=#example-using-push-notifications class=md-nav__link> <span class=md-ellipsis> Example: Using Push Notifications </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#streaming-mode class=md-nav__link> <span class=md-ellipsis> Streaming Mode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-client-sdk-usage class=md-nav__link> <span class=md-ellipsis> A2A Client SDK Usage </span> </a> <nav class=md-nav aria-label="A2A Client SDK Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> <li class=md-nav__item> <a href=#executing-tasks class=md-nav__link> <span class=md-ellipsis> Executing Tasks </span> </a> <nav class=md-nav aria-label="Executing Tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-mode-synchronous class=md-nav__link> <span class=md-ellipsis> Simple Mode (Synchronous) </span> </a> </li> <li class=md-nav__item> <a href=#streaming-mode_1 class=md-nav__link> <span class=md-ellipsis> Streaming Mode </span> </a> </li> <li class=md-nav__item> <a href=#using-push-notifications-callback-mode class=md-nav__link> <span class=md-ellipsis> Using Push Notifications (Callback Mode) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-tree-with-dependencies class=md-nav__link> <span class=md-ellipsis> Task Tree with Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-protocol-documentation class=md-nav__link> <span class=md-ellipsis> A2A Protocol Documentation </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../graphql/ class=md-nav__link> <span class=md-ellipsis> GraphQL API </span> </a> </li> <li class=md-nav__item> <a href=../quick-reference/ class=md-nav__link> <span class=md-ellipsis> Quick Reference </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/basic_task/ class=md-nav__link> <span class=md-ellipsis> Basic Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../examples/task-tree/ class=md-nav__link> <span class=md-ellipsis> Task Trees </span> </a> </li> <li class=md-nav__item> <a href=../../examples/real-world/ class=md-nav__link> <span class=md-ellipsis> Real World </span> </a> </li> <li class=md-nav__item> <a href=../../examples/email-executor/ class=md-nav__link> <span class=md-ellipsis> Email Executor </span> </a> </li> <li class=md-nav__item> <a href=../../examples/generate-executor/ class=md-nav__link> <span class=md-ellipsis> Generate Executor </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/diagrams/ class=md-nav__link> <span class=md-ellipsis> Diagrams </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/directory-structure/ class=md-nav__link> <span class=md-ellipsis> Directory Structure </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/extension-registry-design/ class=md-nav__link> <span class=md-ellipsis> Extension Registry </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/task-manager/ class=md-nav__link> <span class=md-ellipsis> Task Manager </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/exception-handling/ class=md-nav__link> <span class=md-ellipsis> Exception Handling </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/task-tree-lifecycle/ class=md-nav__link> <span class=md-ellipsis> Task Tree Lifecycle </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Protocol </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Protocol </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../protocol/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/01-overview/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/02-core-concepts/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/03-data-model/ class=md-nav__link> <span class=md-ellipsis> Data Model </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/04-execution-lifecycle/ class=md-nav__link> <span class=md-ellipsis> Execution Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/05-examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/06-interfaces/ class=md-nav__link> <span class=md-ellipsis> Interfaces </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/07-conformance/ class=md-nav__link> <span class=md-ellipsis> Conformance </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/08-errors/ class=md-nav__link> <span class=md-ellipsis> Errors </span> </a> </li> <li class=md-nav__item> <a href=../../protocol/09-validation/ class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/setup/ class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=../../development/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../development/roadmap/ class=md-nav__link> <span class=md-ellipsis> Roadmap </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_4> <label class=md-nav__link for=__nav_9_4 id=__nav_9_4_label tabindex=0> <span class=md-ellipsis> Design </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_4> <span class="md-nav__icon md-icon"></span> Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../development/design/cli-design/ class=md-nav__link> <span class=md-ellipsis> CLI Design </span> </a> </li> <li class=md-nav__item> <a href=../../development/design/aggregate-results-design/ class=md-nav__link> <span class=md-ellipsis> Aggregate Results </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#base-url class=md-nav__link> <span class=md-ellipsis> Base URL </span> </a> </li> <li class=md-nav__item> <a href=#endpoints class=md-nav__link> <span class=md-ellipsis> Endpoints </span> </a> <nav class=md-nav aria-label=Endpoints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a2a-protocol-endpoints class=md-nav__link> <span class=md-ellipsis> A2A Protocol Endpoints </span> </a> <nav class=md-nav aria-label="A2A Protocol Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-well-knownagent-card class=md-nav__link> <span class=md-ellipsis> GET /.well-known/agent-card </span> </a> </li> <li class=md-nav__item> <a href=#post class=md-nav__link> <span class=md-ellipsis> POST / </span> </a> </li> <li class=md-nav__item> <a href=#cancel-method class=md-nav__link> <span class=md-ellipsis> cancel Method </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-management-endpoints class=md-nav__link> <span class=md-ellipsis> Task Management Endpoints </span> </a> <nav class=md-nav aria-label="Task Management Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post-tasks class=md-nav__link> <span class=md-ellipsis> POST /tasks </span> </a> </li> <li class=md-nav__item> <a href=#get-tasksmethods class=md-nav__link> <span class=md-ellipsis> GET /tasks/methods </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-management-methods class=md-nav__link> <span class=md-ellipsis> Task Management Methods </span> </a> <nav class=md-nav aria-label="Task Management Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#taskscreate class=md-nav__link> <span class=md-ellipsis> tasks.create </span> </a> </li> <li class=md-nav__item> <a href=#tasksget class=md-nav__link> <span class=md-ellipsis> tasks.get </span> </a> </li> <li class=md-nav__item> <a href=#tasksupdate class=md-nav__link> <span class=md-ellipsis> tasks.update </span> </a> </li> <li class=md-nav__item> <a href=#tasksdelete class=md-nav__link> <span class=md-ellipsis> tasks.delete </span> </a> </li> <li class=md-nav__item> <a href=#tasksclone class=md-nav__link> <span class=md-ellipsis> tasks.clone </span> </a> </li> <li class=md-nav__item> <a href=#tasksgenerate class=md-nav__link> <span class=md-ellipsis> tasks.generate </span> </a> </li> <li class=md-nav__item> <a href=#taskslist class=md-nav__link> <span class=md-ellipsis> tasks.list </span> </a> </li> <li class=md-nav__item> <a href=#tasksexecute class=md-nav__link> <span class=md-ellipsis> tasks.execute </span> </a> </li> <li class=md-nav__item> <a href=#tasksdetail class=md-nav__link> <span class=md-ellipsis> tasks.detail </span> </a> </li> <li class=md-nav__item> <a href=#taskschildren class=md-nav__link> <span class=md-ellipsis> tasks.children </span> </a> </li> <li class=md-nav__item> <a href=#taskstree class=md-nav__link> <span class=md-ellipsis> tasks.tree </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunninglist class=md-nav__link> <span class=md-ellipsis> tasks.running.list </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunningstatus class=md-nav__link> <span class=md-ellipsis> tasks.running.status </span> </a> </li> <li class=md-nav__item> <a href=#tasksrunningcount class=md-nav__link> <span class=md-ellipsis> tasks.running.count </span> </a> </li> <li class=md-nav__item> <a href=#taskscancel-tasksrunningcancel class=md-nav__link> <span class=md-ellipsis> tasks.cancel / tasks.running.cancel </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#system-endpoints class=md-nav__link> <span class=md-ellipsis> System Endpoints </span> </a> <nav class=md-nav aria-label="System Endpoints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#post-system class=md-nav__link> <span class=md-ellipsis> POST /system </span> </a> <nav class=md-nav aria-label="POST /system"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#systemhealth class=md-nav__link> <span class=md-ellipsis> system.health </span> </a> </li> <li class=md-nav__item> <a href=#systemexecutors class=md-nav__link> <span class=md-ellipsis> system.executors </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keyset class=md-nav__link> <span class=md-ellipsis> config.llm_key.set </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keyget class=md-nav__link> <span class=md-ellipsis> config.llm_key.get </span> </a> </li> <li class=md-nav__item> <a href=#configllm_keydelete class=md-nav__link> <span class=md-ellipsis> config.llm_key.delete </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#authentication class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> <nav class=md-nav aria-label=Authentication> <ul class=md-nav__list> <li class=md-nav__item> <a href=#jwt-authentication class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#llm-api-key-headers class=md-nav__link> <span class=md-ellipsis> LLM API Key Headers </span> </a> <nav class=md-nav aria-label="LLM API Key Headers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#x-llm-api-key-header class=md-nav__link> <span class=md-ellipsis> X-LLM-API-KEY Header </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#error-responses class=md-nav__link> <span class=md-ellipsis> Error Responses </span> </a> </li> <li class=md-nav__item> <a href=#streaming-support class=md-nav__link> <span class=md-ellipsis> Streaming Support </span> </a> <nav class=md-nav aria-label="Streaming Support"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#server-sent-events-sse-via-tasksexecute class=md-nav__link> <span class=md-ellipsis> Server-Sent Events (SSE) via tasks.execute </span> </a> </li> <li class=md-nav__item> <a href=#websocket-ws class=md-nav__link> <span class=md-ellipsis> WebSocket /ws </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examples class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> <nav class=md-nav aria-label=Examples> <ul class=md-nav__list> <li class=md-nav__item> <a href=#complete-example-create-and-execute-task-tree class=md-nav__link> <span class=md-ellipsis> Complete Example: Create and Execute Task Tree </span> </a> </li> <li class=md-nav__item> <a href=#example-with-authentication class=md-nav__link> <span class=md-ellipsis> Example with Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#protocol-identification class=md-nav__link> <span class=md-ellipsis> Protocol Identification </span> </a> <nav class=md-nav aria-label="Protocol Identification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#json-rpc-protocol-tasks-endpoint class=md-nav__link> <span class=md-ellipsis> JSON-RPC Protocol (/tasks endpoint) </span> </a> </li> <li class=md-nav__item> <a href=#a2a-protocol-endpoint class=md-nav__link> <span class=md-ellipsis> A2A Protocol (/ endpoint) </span> </a> </li> <li class=md-nav__item> <a href=#how-to-distinguish-protocols class=md-nav__link> <span class=md-ellipsis> How to Distinguish Protocols </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#customa2astarletteapplication-custom-routes class=md-nav__link> <span class=md-ellipsis> CustomA2AStarletteApplication Custom Routes </span> </a> <nav class=md-nav aria-label="CustomA2AStarletteApplication Custom Routes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custom-routes-overview class=md-nav__link> <span class=md-ellipsis> Custom Routes Overview </span> </a> </li> <li class=md-nav__item> <a href=#route-handler-architecture class=md-nav__link> <span class=md-ellipsis> Route Handler Architecture </span> </a> </li> <li class=md-nav__item> <a href=#initialization class=md-nav__link> <span class=md-ellipsis> Initialization </span> </a> </li> <li class=md-nav__item> <a href=#jwt-authentication_1 class=md-nav__link> <span class=md-ellipsis> JWT Authentication </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-protocol-features class=md-nav__link> <span class=md-ellipsis> A2A Protocol Features </span> </a> <nav class=md-nav aria-label="A2A Protocol Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#push-notification-configuration-callback-mode class=md-nav__link> <span class=md-ellipsis> Push Notification Configuration (Callback Mode) </span> </a> <nav class=md-nav aria-label="Push Notification Configuration (Callback Mode)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-it-works class=md-nav__link> <span class=md-ellipsis> How It Works </span> </a> </li> <li class=md-nav__item> <a href=#configuration-format class=md-nav__link> <span class=md-ellipsis> Configuration Format </span> </a> </li> <li class=md-nav__item> <a href=#push-notification-config-fields class=md-nav__link> <span class=md-ellipsis> Push Notification Config Fields </span> </a> </li> <li class=md-nav__item> <a href=#callback-payload-format class=md-nav__link> <span class=md-ellipsis> Callback Payload Format </span> </a> </li> <li class=md-nav__item> <a href=#example-using-push-notifications class=md-nav__link> <span class=md-ellipsis> Example: Using Push Notifications </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#streaming-mode class=md-nav__link> <span class=md-ellipsis> Streaming Mode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-client-sdk-usage class=md-nav__link> <span class=md-ellipsis> A2A Client SDK Usage </span> </a> <nav class=md-nav aria-label="A2A Client SDK Usage"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> <li class=md-nav__item> <a href=#executing-tasks class=md-nav__link> <span class=md-ellipsis> Executing Tasks </span> </a> <nav class=md-nav aria-label="Executing Tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#simple-mode-synchronous class=md-nav__link> <span class=md-ellipsis> Simple Mode (Synchronous) </span> </a> </li> <li class=md-nav__item> <a href=#streaming-mode_1 class=md-nav__link> <span class=md-ellipsis> Streaming Mode </span> </a> </li> <li class=md-nav__item> <a href=#using-push-notifications-callback-mode class=md-nav__link> <span class=md-ellipsis> Using Push Notifications (Callback Mode) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#task-tree-with-dependencies class=md-nav__link> <span class=md-ellipsis> Task Tree with Dependencies </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#a2a-protocol-documentation class=md-nav__link> <span class=md-ellipsis> A2A Protocol Documentation </span> </a> </li> <li class=md-nav__item> <a href=#see-also class=md-nav__link> <span class=md-ellipsis> See Also </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=api-reference>API Reference<a class=headerlink href=#api-reference title="Permanent link">&para;</a></h1> <p>This document provides a complete reference for the apflow API, which implements the <strong>A2A (Agent-to-Agent) Protocol</strong> standard.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The apflow API server provides: - <strong>A2A Protocol Server</strong>: Standard agent-to-agent communication protocol - <strong>Task Management</strong>: Create, read, update, and delete tasks - <strong>Task Execution</strong>: Execute task trees with dependency management - <strong>Real-time Streaming</strong>: Progress updates via Server-Sent Events (SSE) and WebSocket - <strong>JWT Authentication</strong>: Optional token-based authentication</p> <h2 id=base-url>Base URL<a class=headerlink href=#base-url title="Permanent link">&para;</a></h2> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>http://localhost:8000  # Default development server
</span></code></pre></div> <h2 id=endpoints>Endpoints<a class=headerlink href=#endpoints title="Permanent link">&para;</a></h2> <h3 id=a2a-protocol-endpoints>A2A Protocol Endpoints<a class=headerlink href=#a2a-protocol-endpoints title="Permanent link">&para;</a></h3> <h4 id=get-well-knownagent-card><code>GET /.well-known/agent-card</code><a class=headerlink href=#get-well-knownagent-card title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Retrieves the agent card that describes the service capabilities, available skills, and protocol support. This endpoint follows the A2A Protocol standard for agent discovery.</p> <p><strong>Authentication:</strong><br> Not required (public endpoint)</p> <p><strong>Request Parameters:</strong><br> None</p> <p><strong>Response Format:</strong><br> Returns a JSON object containing agent metadata:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;apflow&quot;</span><span class=p>,</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Agent workflow orchestration and execution platform&quot;</span><span class=p>,</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.2.0&quot;</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nt>&quot;capabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=nt>&quot;streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=nt>&quot;push_notifications&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=w>  </span><span class=nt>&quot;skills&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute Task Tree&quot;</span><span class=p>,</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute a complete task tree with multiple tasks&quot;</span><span class=p>,</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=w>      </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;orchestration&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;workflow&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;execution&quot;</span><span class=p>]</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Response Fields:</strong> - <code>name</code> (string): Service name - <code>description</code> (string): Service description - <code>url</code> (string): Base URL of the service - <code>version</code> (string): Service version - <code>capabilities</code> (object): Supported capabilities - <code>streaming</code> (boolean): Whether streaming mode is supported - <code>push_notifications</code> (boolean): Whether push notifications are supported - <code>skills</code> (array): List of available skills/operations</p> <p><strong>Example Request:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>curl<span class=w> </span>http://localhost:8000/.well-known/agent-card
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;apflow&quot;</span><span class=p>,</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Agent workflow orchestration and execution platform&quot;</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.2.0&quot;</span><span class=p>,</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span><span class=nt>&quot;capabilities&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=nt>&quot;streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=nt>&quot;push_notifications&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>  </span><span class=nt>&quot;skills&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute Task Tree&quot;</span><span class=p>,</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute a complete task tree with multiple tasks&quot;</span><span class=p>,</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>      </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;orchestration&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;workflow&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;execution&quot;</span><span class=p>]</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Notes:</strong> - This endpoint is always public and does not require authentication - The agent card is used by A2A Protocol clients to discover service capabilities - The URL in the response should match the actual service URL</p> <h4 id=post><code>POST /</code><a class=headerlink href=#post title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Main A2A Protocol RPC endpoint that handles all A2A protocol requests. This endpoint implements the standard A2A Protocol JSON-RPC 2.0 interface for agent-to-agent communication. It supports task tree execution with streaming, push notifications, and real-time progress updates.</p> <p><strong>Authentication:</strong><br> Optional (JWT token in <code>Authorization</code> header if JWT is enabled)</p> <p><strong>Request Format:</strong><br> JSON-RPC 2.0 format:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute_task_tree&quot;</span><span class=p>,</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task1&quot;</span><span class=p>,</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>        </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>        </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>          </span><span class=nt>&quot;resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cpu&quot;</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span><span class=p>,</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=w>  </span><span class=nt>&quot;configuration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=w>    </span><span class=nt>&quot;push_notification_config&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=w>      </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://your-server.com/callback&quot;</span><span class=p>,</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=w>      </span><span class=nt>&quot;headers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=w>        </span><span class=nt>&quot;Authorization&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Bearer token&quot;</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=w>    </span><span class=nt>&quot;stream&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Request Parameters:</strong> - <code>jsonrpc</code> (string, required): JSON-RPC version, must be "2.0" - <code>method</code> (string, required): Method name. The A2A <code>POST /</code> endpoint supports agent-level actions only: - <code>tasks.execute</code> (recommended) or <code>execute_task_tree</code> (backward compatible): Execute a task tree - <code>tasks.generate</code>: Generate task tree from natural language using LLM - <code>tasks.cancel</code>: Cancel running task(s)</p> <blockquote> <p><strong>Note:</strong> CRUD and query operations (<code>tasks.create</code>, <code>tasks.get</code>, <code>tasks.update</code>, <code>tasks.delete</code>, <code>tasks.list</code>, etc.) should use <code>POST /tasks</code> instead. See <a href=#post-tasks>Native API</a> below. - <code>params</code> (object, required): Method parameters (varies by method) - For <code>tasks.execute</code> or <code>execute_task_tree</code>: <code>tasks</code> (array, required): Array of task objects to execute - <code>id</code> (string/number, required): Request identifier for matching responses - <code>configuration</code> (object, optional): Configuration for push notifications - <code>push_notification_config</code> (object, optional): Push notification settings - <code>url</code> (string, required): Callback URL for status updates - <code>headers</code> (object, optional): HTTP headers for callback requests - <code>method</code> (string, optional): HTTP method for callbacks (default: "POST") - <code>metadata</code> (object, optional): Additional metadata - <code>stream</code> (boolean, optional): Enable streaming mode for real-time updates - <code>task_id</code> (string, optional): Existing task ID to execute.</p> </blockquote> <p><strong>Response Format:</strong><br> JSON-RPC 2.0 response with A2A Protocol Task object:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span><span class=p>,</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-execution-id&quot;</span><span class=p>,</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>    </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task&quot;</span><span class=p>,</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>      </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>      </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>        </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;message&quot;</span><span class=p>,</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>        </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>          </span><span class=p>{</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>            </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>            </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>              </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>              </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>              </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>              </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>              </span><span class=nt>&quot;task_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>        </span><span class=p>]</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>    </span><span class=nt>&quot;artifacts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=err>...</span><span class=p>],</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>    </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>      </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>      </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Response Fields:</strong> - <code>jsonrpc</code> (string): JSON-RPC version ("2.0") - <code>id</code> (string/number): Request identifier (matches request) - <code>result</code> (object): A2A Protocol Task object - <code>id</code> (string): Task execution instance ID - <code>context_id</code> (string): Task definition ID (root task ID) - <code>kind</code> (string): Always <code>"task"</code> for A2A protocol - <code>status</code> (object): Task status object - <code>state</code> (string): Task state ("completed", "working", "failed", etc.) - <code>message</code> (object): Status message with parts - <code>parts[].data.protocol</code> (string): Protocol identifier, always <code>"a2a"</code> for A2A protocol responses - <code>parts[].data.status</code> (string): Task status ("completed", "in_progress", "failed", "pending") - <code>parts[].data.progress</code> (float): Overall progress (0.0 to 1.0) - <code>parts[].data.root_task_id</code> (string): ID of the root task - <code>parts[].data.task_count</code> (integer): Number of tasks in the tree - <code>artifacts</code> (array): Execution artifacts - <code>metadata</code> (object): Task metadata - <code>protocol</code> (string): Protocol identifier, always <code>"a2a"</code> for A2A protocol responses - <code>root_task_id</code> (string): ID of the root task - <code>user_id</code> (string, optional): User ID associated with the task</p> <p><strong>Error Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span><span class=p>,</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32603</span><span class=p>,</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Internal error&quot;</span><span class=p>,</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Error details&quot;</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=s1>    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=s1>    &quot;method&quot;: &quot;tasks.execute&quot;,</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=s1>    &quot;params&quot;: {</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=s1>      &quot;tasks&quot;: [</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=s1>        {</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=s1>          &quot;id&quot;: &quot;task1&quot;,</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=s1>          &quot;name&quot;: &quot;my_task&quot;,</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=s1>          &quot;user_id&quot;: &quot;user123&quot;,</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=s1>          &quot;schemas&quot;: {&quot;method&quot;: &quot;system_info_executor&quot;},</span>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=s1>          &quot;inputs&quot;: {}</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=s1>        }</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=s1>      ]</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=s1>    },</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=s1>    &quot;id&quot;: &quot;request-123&quot;</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=s1>  }&#39;</span>
</span></code></pre></div></p> <p><strong>Example with Streaming:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/<span class=w> </span><span class=se>\</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=s1>    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=s1>    &quot;method&quot;: &quot;tasks.execute&quot;,</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=s1>    &quot;params&quot;: {</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=s1>      &quot;tasks&quot;: [...]</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=s1>    },</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=s1>    &quot;metadata&quot;: {</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=s1>      &quot;stream&quot;: true</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=s1>    },</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=s1>    &quot;id&quot;: &quot;request-123&quot;</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=s1>  }&#39;</span>
</span></code></pre></div></p> <p><strong>Example with Push Notifications:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=s1>    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=s1>    &quot;method&quot;: &quot;tasks.execute&quot;,</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=s1>    &quot;params&quot;: {</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=s1>      &quot;tasks&quot;: [...]</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=s1>    },</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=s1>    &quot;configuration&quot;: {</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=s1>      &quot;push_notification_config&quot;: {</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=s1>        &quot;url&quot;: &quot;https://your-server.com/callback&quot;,</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=s1>        &quot;headers&quot;: {</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=s1>          &quot;Authorization&quot;: &quot;Bearer your-token&quot;</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=s1>        }</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=s1>      }</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=s1>    },</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=s1>    &quot;id&quot;: &quot;request-123&quot;</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=s1>  }&#39;</span>
</span></code></pre></div></p> <p><strong>Notes:</strong> - This endpoint implements the A2A Protocol standard - All task management operations (CRUD, query, execution, cancellation, copy) are now fully supported through the A2A Protocol <code>/</code> route - Method naming: Use <code>tasks.execute</code> (recommended) or <code>execute_task_tree</code> (backward compatible) for task execution - When <code>push_notification_config</code> is provided, the server executes tasks asynchronously and sends updates to the callback URL - When <code>metadata.stream</code> is true, progress updates are sent via EventQueue (SSE/WebSocket). For JSON-RPC <code>tasks.execute</code>, use <code>use_streaming=true</code> instead. - All task management methods return A2A Protocol Task objects with real-time status updates via <code>TaskStatusUpdateEvent</code> - Task execution follows dependency order and priority scheduling - All tasks in a tree must have the same <code>user_id</code> (or be accessible by the authenticated user) - All responses include <code>protocol: "a2a"</code> in Task metadata and event data to identify this as an A2A Protocol response - This differs from JSON-RPC protocol responses (which use <code>protocol: "jsonrpc"</code> in the response object)</p> <h4 id=cancel-method><code>cancel</code> Method<a class=headerlink href=#cancel-method title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Cancels a running task execution. This method is part of the A2A Protocol <code>AgentExecutor</code> interface and allows clients to cancel tasks that are currently executing or pending.</p> <p><strong>Method:</strong> <code>cancel</code></p> <p><strong>Request Format:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel&quot;</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel-request-123&quot;</span><span class=p>,</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>  </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;context-xyz-456&quot;</span><span class=p>,</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>    </span><span class=nt>&quot;error_message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cancelled by user&quot;</span><span class=p>,</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>    </span><span class=nt>&quot;force&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Request Parameters:</strong> - <code>jsonrpc</code> (string, required): JSON-RPC version, must be "2.0" - <code>method</code> (string, required): Method name, must be "cancel" - <code>params</code> (object, optional): Method parameters (currently unused, can be empty) - <code>id</code> (string/number, required): Request identifier for matching responses - <code>task_id</code> (string, optional): Task ID to cancel. Priority: <code>task_id</code> &gt; <code>context_id</code> &gt; <code>metadata.task_id</code> &gt; <code>metadata.context_id</code> - <code>context_id</code> (string, optional): Context ID (used as task ID if <code>task_id</code> is not provided) - <code>metadata</code> (object, optional): Additional metadata - <code>error_message</code> (string, optional): Custom error message for cancellation - <code>force</code> (boolean, optional): Force flag (logged but not used by current implementation) - <code>task_id</code> (string, optional): Task ID (used as fallback if not in top-level <code>task_id</code>) - <code>context_id</code> (string, optional): Context ID (used as fallback if not in top-level <code>context_id</code>)</p> <p><strong>Response Format:</strong> The response is sent via <code>TaskStatusUpdateEvent</code> through the EventQueue (SSE/WebSocket streaming):</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel-request-123&quot;</span><span class=p>,</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;context-xyz-456&quot;</span><span class=p>,</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>      </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;canceled&quot;</span><span class=p>,</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>      </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>        </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;message&quot;</span><span class=p>,</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>        </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>          </span><span class=p>{</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>            </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>            </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>              </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>              </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancelled&quot;</span><span class=p>,</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=w>              </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task cancelled successfully&quot;</span><span class=p>,</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=w>              </span><span class=nt>&quot;token_usage&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=w>                </span><span class=nt>&quot;total_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=w>                </span><span class=nt>&quot;prompt_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span><span class=p>,</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=w>                </span><span class=nt>&quot;completion_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22 href=#__codelineno-11-22></a><span class=w>              </span><span class=p>},</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23 href=#__codelineno-11-23></a><span class=w>              </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24 href=#__codelineno-11-24></a><span class=w>                </span><span class=nt>&quot;partial_data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;some result&quot;</span>
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25 href=#__codelineno-11-25></a><span class=w>              </span><span class=p>},</span>
</span><span id=__span-11-26><a id=__codelineno-11-26 name=__codelineno-11-26 href=#__codelineno-11-26></a><span class=w>              </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-15T10:30:00Z&quot;</span>
</span><span id=__span-11-27><a id=__codelineno-11-27 name=__codelineno-11-27 href=#__codelineno-11-27></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-11-28><a id=__codelineno-11-28 name=__codelineno-11-28 href=#__codelineno-11-28></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-11-29><a id=__codelineno-11-29 name=__codelineno-11-29 href=#__codelineno-11-29></a><span class=w>        </span><span class=p>]</span>
</span><span id=__span-11-30><a id=__codelineno-11-30 name=__codelineno-11-30 href=#__codelineno-11-30></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-11-31><a id=__codelineno-11-31 name=__codelineno-11-31 href=#__codelineno-11-31></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-11-32><a id=__codelineno-11-32 name=__codelineno-11-32 href=#__codelineno-11-32></a><span class=w>    </span><span class=nt>&quot;final&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-11-33><a id=__codelineno-11-33 name=__codelineno-11-33 href=#__codelineno-11-33></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-11-34><a id=__codelineno-11-34 name=__codelineno-11-34 href=#__codelineno-11-34></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Response Fields:</strong> - <code>task_id</code> (string): Task ID that was cancelled - <code>context_id</code> (string): Context ID - <code>status</code> (object): Task status object - <code>state</code> (string): Task state ("canceled" or "failed") - <code>message</code> (object): Status message with parts - <code>parts[].data.protocol</code> (string): Protocol identifier, always <code>"a2a"</code> - <code>parts[].data.status</code> (string): Cancellation status ("cancelled" or "failed") - <code>parts[].data.message</code> (string): Cancellation message - <code>parts[].data.token_usage</code> (object, optional): Token usage information if available - <code>parts[].data.result</code> (any, optional): Partial result if available - <code>parts[].data.error</code> (string, optional): Error message if cancellation failed - <code>parts[].data.timestamp</code> (string): ISO 8601 timestamp - <code>final</code> (boolean): Always <code>true</code> for cancel operations</p> <p><strong>Error Cases:</strong> - Task ID not found: Returns <code>TaskStatusUpdateEvent</code> with <code>state: "failed"</code> and error message "Task ID not found in context" - Task not found: Returns <code>state: "failed"</code> with message "Task {task_id} not found" - Task already completed: Returns <code>state: "failed"</code> with message "Task {task_id} is already {status}, cannot cancel" - Task already cancelled: Returns <code>state: "failed"</code> with message "Task {task_id} is already cancelled, cannot cancel" - Exception during cancellation: Returns <code>state: "failed"</code> with error details</p> <p><strong>Notes:</strong> - The <code>cancel()</code> method attempts to gracefully cancel tasks by calling the executor's <code>cancel()</code> method if supported - Token usage is preserved if available from the executor - Partial results may be returned if the task was partially completed before cancellation - The method sends a <code>TaskStatusUpdateEvent</code> through the EventQueue, which is compatible with SSE/WebSocket streaming - Task ID extraction follows priority: <code>task_id</code> &gt; <code>context_id</code> &gt; <code>metadata.task_id</code> &gt; <code>metadata.context_id</code> - If no task ID is found, an error event is sent with <code>state: "failed"</code></p> <p><strong>Example: Cancel a Running Task</strong></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=p>{</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel&quot;</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel-1&quot;</span><span class=p>,</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;my-running-task&quot;</span><span class=p>,</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=w>    </span><span class=nt>&quot;error_message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;User requested cancellation&quot;</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Example Response (via EventQueue):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;my-running-task&quot;</span><span class=p>,</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;my-running-task&quot;</span><span class=p>,</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>    </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;canceled&quot;</span><span class=p>,</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>      </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>        </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>          </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>          </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancelled&quot;</span><span class=p>,</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>          </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task cancelled successfully&quot;</span><span class=p>,</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=w>          </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-15T10:30:00Z&quot;</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=w>      </span><span class=p>}]</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=w>  </span><span class=nt>&quot;final&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=task-management-endpoints>Task Management Endpoints<a class=headerlink href=#task-management-endpoints title="Permanent link">&para;</a></h3> <h4 id=post-tasks><code>POST /tasks</code><a class=headerlink href=#post-tasks title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Unified task management endpoint that supports multiple task operations via JSON-RPC 2.0 format. This endpoint handles all task-related operations including creation, retrieval, updates, deletion, querying, and execution. All operations are performed through different <code>method</code> values in the JSON-RPC request.</p> <p><strong>Authentication:</strong><br> Optional (JWT token in <code>Authorization</code> header if JWT is enabled)</p> <p><strong>Request Format:</strong><br> JSON-RPC 2.0 format with method-specific parameters:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.create&quot;</span><span class=p>,</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task1&quot;</span><span class=p>,</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>        </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>        </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=w>          </span><span class=nt>&quot;resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cpu&quot;</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Supported Methods:</strong> - <code>tasks.create</code> - Create and execute task trees - <code>tasks.get</code> - Get task by ID - <code>tasks.update</code> - Update task properties - <code>tasks.delete</code> - Delete a task - <code>tasks.detail</code> - Get detailed task information - <code>tasks.tree</code> - Get task tree structure - <code>tasks.children</code> - Get child tasks of a parent task - <code>tasks.list</code> - List tasks with filters - <code>tasks.running.list</code> - List currently running tasks - <code>tasks.running.status</code> - Get status of running tasks - <code>tasks.running.count</code> - Get count of running tasks - <code>tasks.cancel</code> / <code>tasks.running.cancel</code> - Cancel running tasks - <code>tasks.clone</code> - Clone task tree for re-execution - <code>tasks.generate</code> - Generate task tree from natural language requirement - <code>tasks.execute</code> - Execute a task by ID</p> <p><strong>Request Headers:</strong> - <code>Content-Type</code>: <code>application/json</code> (required) - <code>Authorization</code>: <code>Bearer &lt;token&gt;</code> (optional, if JWT is enabled, priority over cookie) - <code>X-LLM-API-KEY</code>: <code>&lt;api-key&gt;</code> or <code>&lt;provider&gt;:&lt;api-key&gt;</code> (optional, for LLM tasks)</p> <p><strong>Request Cookies (Alternative to Header):</strong> - <code>Authorization</code>: <code>&lt;token&gt;</code> (optional, if JWT is enabled, fallback if header not present)</p> <p><strong>Response Format:</strong><br> JSON-RPC 2.0 response format. The <code>result</code> field varies by method.</p> <p><strong>Error Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=p>{</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span><span class=p>,</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32601</span><span class=p>,</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Method not found&quot;</span><span class=p>,</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Unknown task method: tasks.invalid&quot;</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Notes:</strong> - All task operations require proper permissions if JWT is enabled - Tasks with different <code>user_id</code> values cannot be in the same tree - This is the <strong>primary endpoint</strong> for CRUD and query operations. A2A <code>POST /</code> only handles agent-level actions (execute, generate, cancel).</p> <h4 id=get-tasksmethods><code>GET /tasks/methods</code><a class=headerlink href=#get-tasksmethods title="Permanent link">&para;</a></h4> <p><strong>Description:</strong> Method discovery endpoint that returns all available task methods grouped by category, with input schemas and descriptions. Useful for programmatic discovery and client code generation.</p> <p><strong>Authentication:</strong> Optional (JWT token in <code>Authorization</code> header if JWT is enabled)</p> <p><strong>Response Format:</strong></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=nt>&quot;total&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>15</span><span class=p>,</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span><span class=nt>&quot;categories&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;agent_action&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;crud&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;query&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;monitoring&quot;</span><span class=p>],</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span><span class=nt>&quot;methods&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=nt>&quot;agent_action&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>        </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute Task Tree&quot;</span><span class=p>,</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute a complete task tree with multiple tasks&quot;</span><span class=p>,</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>        </span><span class=nt>&quot;category&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;agent_action&quot;</span><span class=p>,</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>        </span><span class=nt>&quot;tags&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;orchestration&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;workflow&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;execution&quot;</span><span class=p>],</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>        </span><span class=nt>&quot;input_schema&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;object&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=err>...</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>},</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>        </span><span class=nt>&quot;supports_streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>        </span><span class=nt>&quot;examples&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;Execute a 3-task workflow&quot;</span><span class=p>]</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=w>    </span><span class=nt>&quot;crud&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=err>...</span><span class=w> </span><span class=p>],</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=w>    </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=err>...</span><span class=w> </span><span class=p>],</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=w>    </span><span class=nt>&quot;monitoring&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w> </span><span class=err>...</span><span class=w> </span><span class=p>]</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Example Request:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>curl<span class=w> </span>http://localhost:8000/tasks/methods
</span></code></pre></div> - The <code>X-LLM-API-KEY</code> header can be used to provide LLM API keys for tasks that require them - Task operations are atomic and support transaction rollback on errors</p> <h2 id=task-management-methods>Task Management Methods<a class=headerlink href=#task-management-methods title="Permanent link">&para;</a></h2> <p>All task management methods use the <code>/tasks</code> endpoint with JSON-RPC 2.0 format.</p> <h3 id=taskscreate><code>tasks.create</code><a class=headerlink href=#taskscreate title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Creates one or more tasks and automatically executes them as a task tree. This method validates task dependencies, ensures all tasks form a single tree structure, and handles task execution with proper dependency ordering. Tasks can be provided as a single object or an array of objects.</p> <p><strong>Method:</strong> <code>tasks.create</code></p> <p><strong>Parameters:</strong> - <code>tasks</code> (array or object, required): Array of task objects, or single task object (will be converted to array). All tasks must have the same <code>user_id</code> after resolution.</p> <p><strong>Task Object Fields:</strong> - <code>id</code> (string, optional): Task ID. If not provided, auto-generated UUID will be used - <code>name</code> (string, required): Task name - <code>user_id</code> (string, optional): User ID for multi-user scenarios - <code>parent_id</code> (string, optional): Parent task ID for task tree structure. <strong>Note</strong>: Parent-child relationships are for <strong>organizational purposes only</strong> and do NOT affect execution order. Use <code>dependencies</code> to control execution order. - <code>priority</code> (integer, optional): Priority level (0=urgent, 1=high, 2=normal, 3=low). Default: 1 - <code>dependencies</code> (array, optional): Dependency list. Format: <code>[{"id": "task-id", "required": true}]</code>. <strong>This determines execution order</strong> - a task executes only when all its required dependencies are satisfied. - <code>inputs</code> (object, optional): Execution-time input parameters - <code>schemas</code> (object, optional): Task schemas configuration. <strong>If provided, the <code>method</code> field is REQUIRED.</strong> - <code>method</code> (string, required when <code>schemas</code> is provided): <strong>Executor ID</strong> that must exactly match the executor's <code>id</code> from the extensions registry (registered via <code>@executor_register()</code>). This is the primary way to specify which executor should execute the task. Examples: <code>"system_info_executor"</code>, <code>"command_executor"</code>, <code>"rest_executor"</code>, <code>"crewai_executor"</code>, etc. - <code>type</code> (string, optional): Executor type for fallback lookup (e.g., <code>"stdio"</code>, <code>"http"</code>). Only used if <code>method</code> is not a registered executor ID. - <code>input_schema</code> (object, optional): Input validation schema (JSON Schema format) - <code>model</code> (string, optional): Model name for AI executors (e.g., <code>"gpt-4"</code>, <code>"claude-3-opus"</code>) - <code>params</code> (object, optional): Executor initialization parameters. Can include <code>executor_id</code> as an alternative way to specify the executor (takes precedence over <code>schemas.method</code> if provided). - Custom fields: Any additional fields supported by your TaskModel</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.create&quot;</span><span class=p>,</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root&quot;</span><span class=p>,</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Root Task&quot;</span><span class=p>,</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=w>      </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=w>        </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=w>      </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=w>        </span><span class=nt>&quot;resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cpu&quot;</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child&quot;</span><span class=p>,</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task&quot;</span><span class=p>,</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a><span class=w>      </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root&quot;</span><span class=p>,</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=w>      </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a><span class=w>        </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;command_executor&quot;</span>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a><span class=w>      </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a><span class=w>        </span><span class=nt>&quot;command&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;echo &#39;Processing system info&#39;&quot;</span>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27 href=#__codelineno-18-27></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28 href=#__codelineno-18-28></a><span class=w>  </span><span class=p>],</span>
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29 href=#__codelineno-18-29></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;create-request-1&quot;</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30 href=#__codelineno-18-30></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=p>{</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;create-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root&quot;</span><span class=p>,</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Root Task&quot;</span><span class=p>,</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=w>    </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child&quot;</span><span class=p>,</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task&quot;</span><span class=p>,</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>        </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root&quot;</span><span class=p>,</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=w>        </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>id</code> (string): Root task ID - <code>name</code> (string): Root task name - <code>status</code> (string): Task status - <code>progress</code> (float): Overall progress (0.0 to 1.0) - <code>user_id</code> (string): User ID - <code>children</code> (array): Array of child task objects (nested structure)</p> <p><strong>Validation Rules:</strong> - All tasks must form a single task tree (exactly one root task) - No circular dependencies allowed - All dependent tasks must be included in the input array - All tasks must be reachable from the root task via <code>parent_id</code> chain - All tasks must have the same <code>user_id</code> (or be accessible by authenticated user)</p> <p><strong>Error Cases:</strong> - Circular dependency detected: Returns error with code -32602 - Multiple root tasks: Returns error with code -32602 - Missing required fields: Returns error with code -32602 - Permission denied: Returns error with code -32001</p> <p><strong>Notes:</strong> - Tasks are automatically executed after creation - <strong>Task execution follows dependency order and priority</strong> - not parent-child relationships - Parent-child relationships (<code>parent_id</code>) are for organizing the task tree structure only - Dependencies (<code>dependencies</code>) determine when tasks execute - a task runs when its dependencies are satisfied - If a task fails, dependent tasks are not executed - Task IDs can be auto-generated if not provided</p> <h3 id=tasksget><code>tasks.get</code><a class=headerlink href=#tasksget title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Retrieves a task by its ID. Returns the complete task object including all fields such as status, progress, inputs, results, and metadata. This is a simple lookup operation that does not include child tasks.</p> <p><strong>Method:</strong> <code>tasks.get</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): Task ID to retrieve. Can also use <code>id</code> as an alias.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=p>{</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.get&quot;</span><span class=p>,</span>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;get-request-1&quot;</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=p>{</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;get-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>    </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>    </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;resource&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cpu&quot;</span><span class=p>},</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=w>    </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;system&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Darwin&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;brand&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Apple M1 Pro&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;cores&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10</span><span class=p>},</span>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>    </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>    </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span><span class=p>},</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>    </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=w>    </span><span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:05:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=w>    </span><span class=nt>&quot;started_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:01:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a><span class=w>    </span><span class=nt>&quot;completed_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:05:00Z&quot;</span>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>id</code> (string): Task ID - <code>name</code> (string): Task name - <code>status</code> (string): Task status ("pending", "in_progress", "completed", "failed", "cancelled") - <code>progress</code> (float): Progress (0.0 to 1.0) - <code>user_id</code> (string): User ID - <code>parent_id</code> (string, nullable): Parent task ID - <code>priority</code> (integer): Priority level - <code>dependencies</code> (array): Task dependencies - <code>inputs</code> (object): Input parameters - <code>result</code> (object, nullable): Execution result - <code>error</code> (string, nullable): Error message if failed - <code>schemas</code> (object): Task schemas - <code>created_at</code> (string): Creation timestamp (ISO 8601) - <code>updated_at</code> (string): Last update timestamp (ISO 8601) - <code>started_at</code> (string, nullable): Start timestamp (ISO 8601) - <code>completed_at</code> (string, nullable): Completion timestamp (ISO 8601)</p> <p><strong>Error Cases:</strong> - Task not found: Returns <code>null</code> in result field - Permission denied: Returns error with code -32001</p> <p><strong>Notes:</strong> - This method returns only the specified task, not its children - Use <code>tasks.tree</code> to get the full task tree structure - Task must be accessible by the authenticated user (if JWT is enabled)</p> <h3 id=tasksupdate><code>tasks.update</code><a class=headerlink href=#tasksupdate title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Updates task properties with critical field validation. This method allows partial updates to task fields. Critical fields (<code>parent_id</code>, <code>user_id</code>, <code>dependencies</code>) are strictly validated to prevent fatal errors, while other fields can be updated freely without status restrictions.</p> <p><strong>Method:</strong> <code>tasks.update</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): Task ID to update - <code>status</code> (string, optional): New status ("pending", "in_progress", "completed", "failed", "cancelled") - <code>inputs</code> (object, optional): Updated input parameters (replaces entire inputs object) - <code>name</code> (string, optional): Updated task name - <code>priority</code> (integer, optional): Updated priority level - <code>params</code> (object, optional): Updated executor parameters - <code>schemas</code> (object, optional): Updated validation schemas - <code>dependencies</code> (array, optional): Updated dependencies list (see validation rules below) - <code>result</code> (object, optional): Updated result (replaces entire result object) - <code>error</code> (string, optional): Error message (typically set when status is "failed") - <code>progress</code> (float, optional): Progress value (0.0 to 1.0) - <code>started_at</code> (string, optional): Start timestamp (ISO 8601 format) - <code>completed_at</code> (string, optional): Completion timestamp (ISO 8601 format)</p> <p><strong>Critical Field Validation Rules:</strong></p> <ol> <li><strong><code>parent_id</code></strong> - Always rejected</li> <li>Cannot be modified after task creation</li> <li> <p>Error: "Cannot update 'parent_id': field cannot be modified (task hierarchy is fixed)"</p> </li> <li> <p><strong><code>user_id</code></strong> - Always rejected</p> </li> <li>Cannot be modified after task creation</li> <li> <p>Error: "Cannot update 'user_id': field cannot be modified (task ownership is fixed)"</p> </li> <li> <p><strong><code>dependencies</code></strong> - Conditional validation (only when updating)</p> </li> <li><strong>Status check</strong>: Task must be in <code>pending</code> status<ul> <li>Error: "Cannot update 'dependencies': task status is '{status}' (must be 'pending')"</li> </ul> </li> <li><strong>Reference validation</strong>: All dependency IDs must exist in the same task tree<ul> <li>Error: "Dependency reference '{dep_id}' not found in task tree"</li> </ul> </li> <li><strong>Circular dependency detection</strong>: Prevents circular dependencies using DFS algorithm<ul> <li>Error: "Circular dependency detected: Task A -&gt; Task B -&gt; Task A"</li> </ul> </li> <li><strong>Execution check</strong>: Prevents updates if dependent tasks are executing<ul> <li>Error: "Cannot update dependencies: task '{task_id}' has dependent tasks that are executing: ['task-456']"</li> </ul> </li> </ol> <p><strong>Other Fields:</strong> - All other fields (<code>inputs</code>, <code>name</code>, <code>priority</code>, <code>params</code>, <code>schemas</code>, <code>status</code>, <code>result</code>, <code>error</code>, <code>progress</code>, timestamps) can be updated freely without status restrictions.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=p>{</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.update&quot;</span><span class=p>,</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;update-request-1&quot;</span>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=p>{</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;update-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;key&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;value&quot;</span><span class=p>},</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=w>    </span><span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:03:00Z&quot;</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns the complete updated task object with all fields.</p> <p><strong>Example Request (Update Multiple Fields):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=p>{</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.update&quot;</span><span class=p>,</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Updated Task Name&quot;</span><span class=p>,</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>    </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=w>    </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;new_key&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new_value&quot;</span><span class=p>},</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;update-request-2&quot;</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request (Update Dependencies - Valid):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=p>{</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.update&quot;</span><span class=p>,</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=w>    </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-dep-1&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>},</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-dep-2&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>}</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;update-request-3&quot;</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Error - Critical Field Validation):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=p>{</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;update-request-4&quot;</span><span class=p>,</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32602</span><span class=p>,</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Invalid params&quot;</span><span class=p>,</span>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Update failed:\n- Cannot update &#39;parent_id&#39;: field cannot be modified (task hierarchy is fixed)\n- Cannot update &#39;dependencies&#39;: task status is &#39;completed&#39; (must be &#39;pending&#39;)&quot;</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Error Cases:</strong> - Task not found: Returns error with code -32602 - Permission denied: Returns error with code -32001 - Critical field violation (<code>parent_id</code>, <code>user_id</code>): Returns error with detailed message - Dependencies validation failure: Returns error with specific validation failure reason: - Task not in <code>pending</code> status - Invalid dependency reference - Circular dependency detected - Dependent tasks are executing - Invalid field values: Returns error with code -32602</p> <p><strong>Notes:</strong> - Updates are atomic and immediately persisted to the database - Critical fields (<code>parent_id</code>, <code>user_id</code>, <code>dependencies</code>) are validated strictly to prevent fatal errors - Other fields can be updated from any task status without restrictions - Dependencies can only be updated for <code>pending</code> tasks to ensure data integrity - All validation errors are collected and returned together in a single error message - Status changes may trigger dependent task execution - Timestamps should be in ISO 8601 format - Only authenticated users can update their own tasks (or admins can update any task)</p> <h3 id=tasksdelete><code>tasks.delete</code><a class=headerlink href=#tasksdelete title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Physically deletes a task from the database with comprehensive validation. The task and all its children are permanently removed if deletion conditions are met. Deletion is only allowed when: 1. All tasks (the task itself + all children recursively) are in <code>pending</code> status 2. No other tasks depend on the task being deleted</p> <p>If all conditions are met, the task and all its children are physically deleted. Otherwise, a detailed error message is returned explaining why deletion is not allowed.</p> <p><strong>Method:</strong> <code>tasks.delete</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): Task ID to delete</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=p>{</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.delete&quot;</span><span class=p>,</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-request-1&quot;</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Success):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=p>{</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>    </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>    </span><span class=nt>&quot;deleted_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>4</span><span class=p>,</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>    </span><span class=nt>&quot;children_deleted&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields (Success):</strong> - <code>success</code> (boolean): Whether deletion was successful - <code>task_id</code> (string): ID of the deleted task - <code>deleted_count</code> (integer): Total number of tasks deleted (including the main task and all children) - <code>children_deleted</code> (integer): Number of child tasks deleted</p> <p><strong>Example Response (Error - Non-pending Children):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=p>{</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32602</span><span class=p>,</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Invalid params&quot;</span><span class=p>,</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cannot delete task: task has 2 non-pending children: [child-1: in_progress, child-2: completed]&quot;</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Error - Dependent Tasks):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32602</span><span class=p>,</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Invalid params&quot;</span><span class=p>,</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cannot delete task: 2 tasks depend on this task: [dependent-1, dependent-2]&quot;</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Error - Mixed Conditions):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=p>{</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32602</span><span class=p>,</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Invalid params&quot;</span><span class=p>,</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Cannot delete task: task has 1 non-pending children: [child-1: completed]; 1 tasks depend on this task: [dependent-1]&quot;</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Error Cases:</strong> - Task not found: Returns error with code -32602 - Permission denied: Returns error with code -32001 - Task has non-pending children: Returns error with code -32602, includes list of non-pending children with their statuses - Task itself is not pending: Returns error with code -32602, indicates current status - Other tasks depend on this task: Returns error with code -32602, includes list of dependent task IDs - Mixed conditions: Returns error with code -32602, includes all blocking conditions</p> <p><strong>Deletion Conditions:</strong> - <strong>All tasks must be pending</strong>: The task itself and all its children (recursively) must be in <code>pending</code> status - <strong>No dependencies</strong>: No other tasks can depend on the task being deleted - <strong>Recursive deletion</strong>: When deletion is allowed, all child tasks (including grandchildren) are automatically deleted</p> <p><strong>Notes:</strong> - Tasks are <strong>physically deleted</strong> from the database (not soft-deleted) - Deletion is <strong>atomic</strong>: Either all tasks (task + children) are deleted, or none are deleted - Child tasks are automatically deleted when the parent task is deleted (if all are pending) - Deletion requires proper permissions (own task or admin role) - Error messages provide detailed information about why deletion failed - To delete a task with non-pending children, first cancel or complete those children - To delete a task with dependencies, first remove or update the dependent tasks</p> <h3 id=tasksclone><code>tasks.clone</code><a class=headerlink href=#tasksclone title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Creates a new task or task tree by copying, linking, archiveting, or mixing origin types from an existing task. This endpoint supports advanced cloning options:</p> <ul> <li><strong>Copy (default):</strong> Deeply copies the original task and its subtree. All fields are duplicated, and new IDs are generated. You can choose to copy only the selected task or the entire subtree.</li> <li><strong>Link:</strong> Creates a new task that references the original, preserving its status and result. Only allowed if the source task tree is fully completed.</li> <li><strong>Snapshot:</strong> Creates a read-only, immutable archive of the original task or subtree.</li> <li><strong>Mixed:</strong> Allows selective linking and copying within the same operation, using <code>link_task_ids</code> to specify which tasks to link.</li> </ul> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): ID of the task to clone. - <code>origin_type</code> (string, optional): One of <code>"copy"</code> (default), <code>"link"</code>, <code>"archive"</code>, or <code>"mixed"</code>. - <code>recursive</code> (boolean, optional): If <code>true</code> (default), clone the entire subtree; if <code>false</code>, only the specified task. - <code>link_task_ids</code> (array, optional): For <code>"mixed"</code> mode, list of task IDs to link instead of copy. - <code>reset_fields</code> (object, optional): Dictionary of fields to override/reset in the cloned tasks. - <code>save</code> (boolean, optional): If <code>true</code> (default), save the cloned tasks to the database and return the new tree; if <code>false</code>, return a preview array of the cloned tasks without saving.</p> <p><strong>Behavior:</strong> - Validates permissions and task existence. - Supports advanced use cases: subtree promotion, dependency inclusion, and selective field resets. - Returns the new task tree (if <code>save=true</code>) or a preview array (if <code>save=false</code>).</p> <p><strong>Error Cases:</strong> - Task not found - Invalid parameters (e.g., missing <code>link_task_ids</code> for <code>"mixed"</code>) - Permission denied</p> <p><strong>Method:</strong> <code>tasks.clone</code></p> <p><strong>What Gets Cloned:</strong> - The original task and all its children (recursive) - All tasks that depend on the original task (direct and transitive dependencies) - Task structure (parent-child relationships) - Task definitions (name, inputs, schemas, params, dependencies) - User and product associations (user_id, product_id) - Priority settings</p> <p><strong>What Gets Reset (Minimal Mode):</strong> - Task IDs (new IDs generated) - Status (reset to "pending") - Progress (reset to 0.0) - Result (reset to null) - Error (reset to null) - Execution timestamps (started_at, completed_at)</p> <p><strong>What Gets Reset (Full Mode):</strong> - Task IDs (new IDs generated) - Status: Tasks needing re-execution  "pending", unrelated tasks  "completed" - Progress: Re-execution tasks  0.0, unrelated tasks  1.0 - Result: Re-execution tasks  null, unrelated tasks  preserved with token_usage - Error: Re-execution tasks  null, unrelated tasks  preserved - Execution timestamps: Re-execution tasks  reset, unrelated tasks  preserved</p> <p><strong>What Gets Preserved:</strong> - Task definitions (name, code, inputs, schemas, params) - User and product associations (user_id, product_id) - Priority settings - Dependencies structure</p> <p><strong>Metadata:</strong> - <code>original_task_id</code>: Links cloned task to original task's root ID - <code>origin_type</code>: Task origin type (own, clone, reference, link, archive) - <code>task_tree_id</code>: Task tree identifier for grouping and querying across trees - <code>has_references</code>: Set to <code>true</code> on all original tasks that were cloned</p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): ID of the task to clone. Can be root task or any task in the tree. The method will clone the minimal subtree containing the task and all its dependencies. - <code>_recursive</code> (boolean, optional): If <code>true</code>, also clone each direct child task of the original task with its dependencies. When cloning children, tasks that depend on multiple cloned tasks are only cloned once (deduplication by task ID). Default: <code>false</code>. - <code>reset_fields</code> (array of strings, optional): List of field names to reset during clone. Common fields: <code>["status", "progress", "result", "error"]</code>. Default: <code>null</code> (uses mode-specific defaults). - <code>save</code> (boolean, optional): If <code>true</code> (default), saves cloned tasks to database and returns TaskTreeNode. If <code>false</code>, returns task array without saving to database (suitable for preview or direct use with <code>tasks.create</code>).</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=p>{</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.clone&quot;</span><span class=p>,</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>    </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;clone-request-1&quot;</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request with save=false (returns task array):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=p>{</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.clone&quot;</span><span class=p>,</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=w>    </span><span class=nt>&quot;save&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;clone-request-5&quot;</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (save=false):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=p>{</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;clone-request-5&quot;</span><span class=p>,</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new-uuid-1&quot;</span><span class=p>,</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Original Task Name&quot;</span><span class=p>,</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=w>        </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=w>        </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[],</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pending&quot;</span><span class=p>,</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new-uuid-2&quot;</span><span class=p>,</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task&quot;</span><span class=p>,</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=w>        </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new-uuid-1&quot;</span><span class=p>,</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=w>        </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new-uuid-1&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>}],</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pending&quot;</span><span class=p>,</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a><span class=w>    </span><span class=nt>&quot;saved&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=p>{</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;clone-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-clone-xyz-789&quot;</span><span class=p>,</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Original Task Name&quot;</span><span class=p>,</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>    </span><span class=nt>&quot;original_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pending&quot;</span><span class=p>,</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span><span class=p>,</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=w>    </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child-clone-456&quot;</span><span class=p>,</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task&quot;</span><span class=p>,</span>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=w>        </span><span class=nt>&quot;original_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;pending&quot;</span><span class=p>,</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.0</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Error Cases:</strong> - Task not found: Returns error with code -32602 - Permission denied: Returns error with code -32001</p> <p><strong>Notes:</strong> - The cloned task tree has new task IDs (UUIDs) but preserves the original structure - All execution fields are reset (status="pending", progress=0.0, result=null) unless <code>reset_fields</code> is specified - The original task's <code>has_references</code> flag is set to <code>true</code> when <code>save=true</code> - Dependencies correctly reference new task IDs within the cloned tree - When <code>save=false</code>, the returned task array is compatible with <code>tasks.create</code> API - Each cloned task's <code>original_task_id</code> points to its direct original counterpart (not root) - Failed leaf nodes are automatically handled (pending dependents are filtered out) - The cloned tree is ready for immediate execution</p> <h3 id=tasksgenerate><code>tasks.generate</code><a class=headerlink href=#tasksgenerate title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Generates a valid task tree JSON array from a natural language requirement using LLM (Large Language Model). This method uses the <code>generate_executor</code> to create task structures that conform to the framework's requirements. The generated tasks can optionally be saved directly to the database for immediate execution.</p> <p><strong>Method:</strong> <code>tasks.generate</code></p> <p><strong>Parameters:</strong> - <code>requirement</code> (string, required): Natural language description of the desired task tree. Should describe the workflow, data flow, and operations needed. - <code>user_id</code> (string, optional): User ID for the generated tasks. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, uses default user ID. - <code>llm_provider</code> (string, optional): LLM provider to use. Valid values: <code>"openai"</code>, <code>"anthropic"</code>. Default: <code>"openai"</code> or from environment variable <code>APFLOW_LLM_PROVIDER</code>. - <code>model</code> (string, optional): Specific LLM model name. Examples: <code>"gpt-4o"</code>, <code>"claude-3-5-sonnet-20241022"</code>. Default: Provider-specific default (from <code>OPENAI_MODEL</code> or <code>ANTHROPIC_MODEL</code> environment variables). - <code>temperature</code> (float, optional): LLM temperature for generation (0.0 to 2.0). Higher values make output more creative, lower values more deterministic. Default: <code>0.7</code>. - <code>max_tokens</code> (integer, optional): Maximum number of tokens in LLM response. Default: <code>4000</code>. - <code>save</code> (boolean, optional): If <code>true</code>, automatically saves the generated tasks to the database using <code>TaskCreator.create_task_tree_from_array()</code>. When <code>true</code>, the response includes <code>root_task_id</code> of the saved task tree. Default: <code>false</code>.</p> <p><strong>LLM API Key Configuration:</strong> - Set <code>OPENAI_API_KEY</code> environment variable for OpenAI provider - Set <code>ANTHROPIC_API_KEY</code> environment variable for Anthropic provider - API keys can also be provided via <code>.env</code> file in the project root</p> <p><strong>Example Request (Generate Only):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=p>{</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.generate&quot;</span><span class=p>,</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=w>    </span><span class=nt>&quot;requirement&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Fetch data from API, process it, and save to database&quot;</span><span class=p>,</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generate-request-1&quot;</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request (With LLM Configuration):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=p>{</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.generate&quot;</span><span class=p>,</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=w>    </span><span class=nt>&quot;requirement&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Create a workflow to fetch user data from REST API, transform it, and store in database&quot;</span><span class=p>,</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=w>    </span><span class=nt>&quot;llm_provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a><span class=w>    </span><span class=nt>&quot;model&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;gpt-4o&quot;</span><span class=p>,</span>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=w>    </span><span class=nt>&quot;temperature&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.7</span><span class=p>,</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=w>    </span><span class=nt>&quot;max_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>4000</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generate-request-2&quot;</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request (Save to Database):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=p>{</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.generate&quot;</span><span class=p>,</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>    </span><span class=nt>&quot;requirement&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Fetch data from two APIs in parallel, merge results, and save to database&quot;</span><span class=p>,</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=w>    </span><span class=nt>&quot;save&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generate-request-3&quot;</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Generate Only):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=p>{</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generate-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>,</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a><span class=w>          </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://api.example.com/data&quot;</span><span class=p>,</span>
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;GET&quot;</span>
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;command_executor&quot;</span><span class=p>,</span>
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a><span class=w>        </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task_1&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>}],</span>
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-18><a id=__codelineno-39-18 name=__codelineno-39-18 href=#__codelineno-39-18></a><span class=w>          </span><span class=nt>&quot;command&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;python process_data.py --input /tmp/api_response.json&quot;</span>
</span><span id=__span-39-19><a id=__codelineno-39-19 name=__codelineno-39-19 href=#__codelineno-39-19></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-39-20><a id=__codelineno-39-20 name=__codelineno-39-20 href=#__codelineno-39-20></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-39-21><a id=__codelineno-39-21 name=__codelineno-39-21 href=#__codelineno-39-21></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-39-22><a id=__codelineno-39-22 name=__codelineno-39-22 href=#__codelineno-39-22></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-39-23><a id=__codelineno-39-23 name=__codelineno-39-23 href=#__codelineno-39-23></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;database_executor&quot;</span><span class=p>,</span>
</span><span id=__span-39-24><a id=__codelineno-39-24 name=__codelineno-39-24 href=#__codelineno-39-24></a><span class=w>        </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task_2&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>}],</span>
</span><span id=__span-39-25><a id=__codelineno-39-25 name=__codelineno-39-25 href=#__codelineno-39-25></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-26><a id=__codelineno-39-26 name=__codelineno-39-26 href=#__codelineno-39-26></a><span class=w>          </span><span class=nt>&quot;table&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;processed_data&quot;</span><span class=p>,</span>
</span><span id=__span-39-27><a id=__codelineno-39-27 name=__codelineno-39-27 href=#__codelineno-39-27></a><span class=w>          </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;{{task_2.result}}&quot;</span>
</span><span id=__span-39-28><a id=__codelineno-39-28 name=__codelineno-39-28 href=#__codelineno-39-28></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-39-29><a id=__codelineno-39-29 name=__codelineno-39-29 href=#__codelineno-39-29></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-39-30><a id=__codelineno-39-30 name=__codelineno-39-30 href=#__codelineno-39-30></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-39-31><a id=__codelineno-39-31 name=__codelineno-39-31 href=#__codelineno-39-31></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-39-32><a id=__codelineno-39-32 name=__codelineno-39-32 href=#__codelineno-39-32></a><span class=w>    </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-39-33><a id=__codelineno-39-33 name=__codelineno-39-33 href=#__codelineno-39-33></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Successfully generated 3 task(s)&quot;</span>
</span><span id=__span-39-34><a id=__codelineno-39-34 name=__codelineno-39-34 href=#__codelineno-39-34></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-39-35><a id=__codelineno-39-35 name=__codelineno-39-35 href=#__codelineno-39-35></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Save to Database):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=p>{</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generate-request-3&quot;</span><span class=p>,</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>,</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=w>          </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://api1.example.com/data&quot;</span><span class=p>,</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;GET&quot;</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>,</span>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a><span class=w>          </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://api2.example.com/data&quot;</span><span class=p>,</span>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;GET&quot;</span>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;aggregate_results_executor&quot;</span><span class=p>,</span>
</span><span id=__span-40-24><a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a><span class=w>        </span><span class=nt>&quot;dependencies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-40-25><a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a><span class=w>          </span><span class=p>{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task_1&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>},</span>
</span><span id=__span-40-26><a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a><span class=w>          </span><span class=p>{</span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task_2&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;required&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>}</span>
</span><span id=__span-40-27><a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a><span class=w>        </span><span class=p>],</span>
</span><span id=__span-40-28><a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-40-29><a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a><span class=w>          </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task_1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;task_2&quot;</span><span class=p>]</span>
</span><span id=__span-40-30><a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-40-31><a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a><span class=w>        </span><span class=nt>&quot;priority&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-40-32><a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-40-33><a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-40-34><a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a><span class=w>    </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-40-35><a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a><span class=w>    </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;generated-root-task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-40-36><a id=__codelineno-40-36 name=__codelineno-40-36 href=#__codelineno-40-36></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Successfully generated 3 task(s) and saved to database (root_task_id: generated-root-task-abc-123)&quot;</span>
</span><span id=__span-40-37><a id=__codelineno-40-37 name=__codelineno-40-37 href=#__codelineno-40-37></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-40-38><a id=__codelineno-40-38 name=__codelineno-40-38 href=#__codelineno-40-38></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>tasks</code> (array): Generated task tree JSON array. Each task object follows the standard task format with <code>name</code>, <code>inputs</code>, <code>dependencies</code>, <code>priority</code>, etc. - <code>count</code> (integer): Number of tasks generated - <code>root_task_id</code> (string, optional): Present only when <code>save=true</code>. The ID of the root task in the saved task tree. - <code>message</code> (string): Status message describing the generation result</p> <p><strong>Error Cases:</strong> - Missing <code>requirement</code>: Returns error with code -32602, message "Requirement is a mandatory input for tasks.generate." - Missing LLM API key: Returns error with code -32602, message "LLM API key not found. Please set OPENAI_API_KEY or ANTHROPIC_API_KEY environment variable or in a .env file." - LLM generation failed: Returns error with code -32602, includes error details from LLM API - Validation failed: Returns error with code -32602, includes validation error details - Permission denied: Returns error with code -32001 (if JWT is enabled and user cannot generate tasks for specified user_id)</p> <p><strong>Validation:</strong> The generated tasks are automatically validated to ensure they conform to <code>TaskCreator.create_task_tree_from_array()</code> requirements: - All tasks have <code>name</code> field matching available executor IDs - Either all tasks have <code>id</code> field or none do (no mixing) - All <code>parent_id</code> references exist in the array - All <code>dependencies</code> references exist in the array - No circular dependencies - Single root task (task with no <code>parent_id</code>) - All tasks are reachable from the root task</p> <p><strong>Notes:</strong> - The LLM uses framework documentation and available executor information to generate appropriate task structures - Generated tasks use realistic input parameters based on executor schemas - For better results, provide detailed requirements describing: - Data flow between steps - Parallel vs sequential operations - Specific operations (API calls, database operations, file processing, etc.) - When <code>save=true</code>, the generated tasks are immediately saved and ready for execution - Use the returned <code>tasks</code> array with <code>TaskCreator.create_task_tree_from_array()</code> if you need custom processing before saving - The method respects permission checks if JWT is enabled - LLM API keys are never stored in the database, only used during generation - Generation may take several seconds depending on LLM provider and model</p> <p><strong>Tips for Better Generation:</strong> - Use specific keywords: "parallel", "sequential", "merge", "aggregate" help guide the generation - Describe data flow: Explain how data moves between steps - Mention executors: Specify operations like "API", "database", "file", "command" for better executor selection - Be detailed: More context leads to more accurate task trees - Example: "Fetch data from two different APIs in parallel, then merge the results and save to database"</p> <h3 id=taskslist><code>tasks.list</code><a class=headerlink href=#taskslist title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Lists all tasks from the database with optional filtering by user ID, status, and pagination support. This method queries the database (not just running tasks) and returns tasks matching the specified filters. Results are sorted by creation time (newest first) and can be paginated using limit and offset.</p> <p><strong>Method:</strong> <code>tasks.list</code></p> <p><strong>Parameters:</strong> - <code>user_id</code> (string, optional): Filter tasks by user ID. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, returns all tasks. - <code>status</code> (string, optional): Filter by task status. Valid values: "pending", "in_progress", "completed", "failed", "cancelled", "deleted". If not provided, returns tasks with any status. - <code>limit</code> (integer, optional): Maximum number of tasks to return (default: 100, maximum recommended: 1000) - <code>offset</code> (integer, optional): Number of tasks to skip for pagination (default: 0)</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=p>{</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.list&quot;</span><span class=p>,</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=w>    </span><span class=nt>&quot;limit&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50</span><span class=p>,</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=w>    </span><span class=nt>&quot;offset&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;list-request-1&quot;</span>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=p>{</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;list-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=w>      </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=w>      </span><span class=nt>&quot;completed_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:05:00Z&quot;</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>,</span>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 2&quot;</span><span class=p>,</span>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a><span class=w>      </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:01:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a><span class=w>      </span><span class=nt>&quot;completed_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:06:00Z&quot;</span>
</span><span id=__span-42-22><a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-42-23><a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-42-24><a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns an array of task objects, each containing: - All standard task fields (id, name, status, progress, user_id, etc.) - Tasks are sorted by <code>created_at</code> in descending order (newest first)</p> <p><strong>Error Cases:</strong> - Permission denied: Tasks for other users are filtered out (not returned in error)</p> <p><strong>Notes:</strong> - This method queries the database, not just running tasks - Use <code>tasks.running.list</code> to get only currently running tasks - Results are paginated using limit and offset - Deleted tasks are excluded from results - Use pagination for large result sets to avoid performance issues</p> <h3 id=tasksexecute><code>tasks.execute</code><a class=headerlink href=#tasksexecute title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Executes a task by its ID with automatic dependency handling. This method supports two execution modes: - <strong>Root task execution</strong>: If the specified task is a root task (no parent), the entire task tree is executed. - <strong>Child task execution</strong>: If the specified task is a child task, the method automatically collects all dependencies (including transitive dependencies) and executes the task along with all required dependencies.</p> <p><strong>Task Status Handling:</strong> - <strong>Pending tasks</strong>: Execute normally (newly created tasks) - <strong>Failed tasks</strong>: Can be re-executed by calling this method with the failed task's ID - <strong>Completed tasks</strong>: Skipped unless they are dependencies of a task being re-executed (in which case they are also re-executed) - <strong>In-progress tasks</strong>: Skipped to avoid conflicts</p> <p><strong>Re-execution Behavior:</strong> When re-executing a failed task, all its dependency tasks are also re-executed (even if they are completed) to ensure consistency. This ensures that the entire execution context is refreshed and results are up-to-date.</p> <p>The task must exist in the database and must not already be running. Execution follows dependency order and priority scheduling. This unified execution behavior ensures consistent task execution across both A2A Protocol and JSON-RPC endpoints.</p> <p><strong>Method:</strong> <code>tasks.execute</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): Task ID to execute. Can also use <code>id</code> as an alias. - If the task is a root task, the entire task tree will be executed. - If the task is a child task, the task and all its dependencies (including transitive) will be executed. - <code>use_streaming</code> (boolean, optional): Whether to use streaming mode for real-time progress updates (default: false). If true, the endpoint returns a <code>StreamingResponse</code> with Server-Sent Events (SSE) instead of a JSON response. - <code>webhook_config</code> (object, optional): Webhook configuration for push notifications. If provided, task execution updates will be sent to the specified webhook URL via HTTP callbacks. This is similar to A2A Protocol's push notification feature. - <code>url</code> (string, required): Webhook callback URL where updates will be sent - <code>headers</code> (object, optional): HTTP headers to include in webhook requests (e.g., <code>{"Authorization": "Bearer token"}</code>) - <code>method</code> (string, optional): HTTP method for webhook requests (default: "POST") - <code>timeout</code> (float, optional): Request timeout in seconds (default: 30.0) - <code>max_retries</code> (int, optional): Maximum retry attempts for failed webhook requests (default: 3)</p> <p><strong>Example Request (Non-streaming):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=p>{</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=w>    </span><span class=nt>&quot;use_streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request (Streaming mode):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=p>{</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=w>    </span><span class=nt>&quot;use_streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Request (Webhook mode):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=p>{</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=w>    </span><span class=nt>&quot;webhook_config&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=w>      </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://example.com/api/task-callback&quot;</span><span class=p>,</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=w>      </span><span class=nt>&quot;headers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=w>        </span><span class=nt>&quot;Authorization&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Bearer your-api-token&quot;</span><span class=p>,</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a><span class=w>        </span><span class=nt>&quot;Content-Type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;application/json&quot;</span>
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a><span class=w>      </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;POST&quot;</span><span class=p>,</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a><span class=w>      </span><span class=nt>&quot;timeout&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>30.0</span><span class=p>,</span>
</span><span id=__span-45-14><a id=__codelineno-45-14 name=__codelineno-45-14 href=#__codelineno-45-14></a><span class=w>      </span><span class=nt>&quot;max_retries&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span>
</span><span id=__span-45-15><a id=__codelineno-45-15 name=__codelineno-45-15 href=#__codelineno-45-15></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-45-16><a id=__codelineno-45-16 name=__codelineno-45-16 href=#__codelineno-45-16></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-45-17><a id=__codelineno-45-17 name=__codelineno-45-17 href=#__codelineno-45-17></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span>
</span><span id=__span-45-18><a id=__codelineno-45-18 name=__codelineno-45-18 href=#__codelineno-45-18></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Non-streaming):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=p>{</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a><span class=w>    </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=w>    </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;jsonrpc&quot;</span><span class=p>,</span>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=w>    </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;started&quot;</span><span class=p>,</span>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task task-abc-123 execution started&quot;</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response (Streaming mode):</strong> When <code>use_streaming=true</code>, the response is a Server-Sent Events (SSE) stream with <code>Content-Type: text/event-stream</code>.</p> <p>The first event contains the initial JSON-RPC response: <div class="language-text highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a>data: {&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;execute-request-1&quot;, &quot;result&quot;: {&quot;success&quot;: true, &quot;protocol&quot;: &quot;jsonrpc&quot;, &quot;root_task_id&quot;: &quot;task-abc-123&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;started&quot;, &quot;streaming&quot;: true, &quot;message&quot;: &quot;Task task-abc-123 execution started with streaming&quot;}}
</span></code></pre></div></p> <p>Subsequent events contain real-time progress updates: <div class="language-text highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a>data: {&quot;type&quot;: &quot;progress&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;in_progress&quot;, &quot;progress&quot;: 0.5, &quot;message&quot;: &quot;Task tree execution started&quot;, &quot;timestamp&quot;: &quot;2025-11-26T08:00:00&quot;}
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>data: {&quot;type&quot;: &quot;task_completed&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;completed&quot;, &quot;result&quot;: {...}, &quot;timestamp&quot;: &quot;2025-11-26T08:00:05&quot;}
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>data: {&quot;type&quot;: &quot;final&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;completed&quot;, &quot;result&quot;: {&quot;progress&quot;: 1.0}, &quot;final&quot;: true, &quot;timestamp&quot;: &quot;2025-11-26T08:00:05&quot;}
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>data: {&quot;type&quot;: &quot;stream_end&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;}
</span></code></pre></div></p> <p><strong>Note:</strong> When <code>use_streaming=true</code>, you must parse the SSE stream format (<code>data: {...}</code>) instead of expecting a JSON response.</p> <p><strong>Example Response (Webhook mode):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=p>{</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=w>    </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=w>    </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;jsonrpc&quot;</span><span class=p>,</span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=w>    </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;started&quot;</span><span class=p>,</span>
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=w>    </span><span class=nt>&quot;streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task task-abc-123 execution started with webhook callbacks. Updates will be sent to https://example.com/callback&quot;</span><span class=p>,</span>
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a><span class=w>    </span><span class=nt>&quot;webhook_url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://example.com/callback&quot;</span>
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-49-14><a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>success</code> (boolean): Whether execution was started successfully - <code>protocol</code> (string): Protocol identifier, always <code>"jsonrpc"</code> for this endpoint. Used to distinguish from A2A protocol responses. - <code>root_task_id</code> (string): ID of the root task in the tree - <code>task_id</code> (string): ID of the task that was executed - <code>status</code> (string): Execution status ("started", "already_running", "failed") - <code>message</code> (string): Status message - <code>streaming</code> (boolean, optional): Present when <code>use_streaming=true</code> or <code>webhook_config</code> is provided. Indicates that streaming/webhook mode is enabled. - <code>webhook_url</code> (string, optional): Present only when <code>webhook_config</code> is provided. The webhook URL where updates will be sent.</p> <p><strong>Error Cases:</strong> - Task not found: Returns error with code -32602 - Permission denied: Returns error with code -32001 - Task already running: Returns success=false with status "already_running"</p> <p><strong>Webhook Callback Format:</strong></p> <p>When <code>webhook_config</code> is provided, the server will send HTTP POST requests to your webhook URL with the following payload format:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=p>{</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=w>  </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;jsonrpc&quot;</span><span class=p>,</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a><span class=w>  </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a><span class=w>  </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a><span class=w>  </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task execution completed&quot;</span><span class=p>,</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;final&quot;</span><span class=p>,</span>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a><span class=w>  </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T12:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=w>  </span><span class=nt>&quot;final&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a><span class=w>    </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a><span class=w>    </span><span class=nt>&quot;task_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-50-17><a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Webhook Update Types:</strong></p> <p>The server sends different types of updates during task execution: - <code>task_start</code>: Task execution started - <code>progress</code>: Progress update (status, progress percentage) - <code>task_completed</code>: Task completed successfully - <code>task_failed</code>: Task execution failed - <code>final</code>: Final status update (always sent at the end)</p> <p><strong>Webhook Retry Behavior:</strong></p> <ul> <li>The server automatically retries failed webhook requests up to <code>max_retries</code> times</li> <li>Retries use exponential backoff (1s, 2s, 4s, ...)</li> <li>Client errors (4xx) are not retried</li> <li>Server errors (5xx) and network errors are retried</li> <li>Webhook failures are logged but do not affect task execution</li> </ul> <p><strong>Notes:</strong> - <strong>Root task execution</strong>: If <code>task_id</code> refers to a root task, the entire task tree is executed. - <strong>Child task execution</strong>: If <code>task_id</code> refers to a child task, the method automatically collects all dependencies (including transitive dependencies) and executes only the required subtree containing the task and its dependencies. - <strong>Re-execution support</strong>: Failed tasks can be re-executed by calling this method with the failed task's ID. When re-executing, all dependency tasks are also re-executed to ensure consistency. - <strong>Execution order</strong>: Task execution follows <strong>dependency order and priority</strong>, not parent-child relationships. Parent-child relationships (<code>parent_id</code>) are for organizing the task tree structure only. Dependencies (<code>dependencies</code>) determine when tasks execute. - Task execution is asynchronous - the method returns immediately after starting execution - The unified execution logic ensures consistent behavior across A2A Protocol and JSON-RPC endpoints - Only <code>pending</code> and <code>failed</code> status tasks are executed; <code>completed</code> and <code>in_progress</code> tasks are skipped unless they are dependencies of a task being re-executed - Use <code>tasks.running.status</code> to check execution progress - Use <code>use_streaming=true</code> to receive real-time progress updates via Server-Sent Events (SSE) - the response will be a streaming response instead of JSON - The SSE stream includes the initial JSON-RPC response as the first event, followed by real-time progress updates - Use <code>webhook_config</code> to receive updates via HTTP callbacks (independent of response mode) - <code>webhook_config</code> and <code>use_streaming</code> can be used together - webhook callbacks will be sent regardless of response mode - Tasks are executed following dependency order and priority - All responses include <code>protocol: "jsonrpc"</code> field to identify this as a JSON-RPC protocol response - This differs from A2A Protocol responses (which use <code>protocol: "a2a"</code> in metadata and event data)</p> <h3 id=tasksdetail><code>tasks.detail</code><a class=headerlink href=#tasksdetail title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Retrieves detailed task information including all fields. This method is functionally equivalent to <code>tasks.get</code> and returns the complete task object with all metadata, inputs, results, and execution history.</p> <p><strong>Method:</strong> <code>tasks.detail</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, required): Task ID to get details for</p> <p><strong>Response Format:</strong><br> Same as <code>tasks.get</code> - returns complete task object.</p> <p><strong>Notes:</strong> - This method is an alias for <code>tasks.get</code> - Use this method when you need explicit clarity that you're requesting detailed information - Returns the same response format as <code>tasks.get</code></p> <h3 id=taskschildren><code>tasks.children</code><a class=headerlink href=#taskschildren title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Retrieves all child tasks of a specified parent task. This method returns a flat list of direct children (not a nested tree structure). Useful for getting immediate children without the full tree hierarchy.</p> <p><strong>Method:</strong> <code>tasks.children</code></p> <p><strong>Parameters:</strong> - <code>parent_id</code> (string, required): Parent task ID to get children for. Can also use <code>task_id</code> as an alias. - <code>task_id</code> (string, optional): Alternative parameter name for parent_id (same as <code>parent_id</code>)</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=p>{</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.children&quot;</span><span class=p>,</span>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=w>    </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span>
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;children-request-1&quot;</span>
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=p>{</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;children-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child-task-1&quot;</span><span class=p>,</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=w>      </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-52-14><a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child-task-2&quot;</span><span class=p>,</span>
</span><span id=__span-52-15><a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task 2&quot;</span><span class=p>,</span>
</span><span id=__span-52-16><a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-52-17><a id=__codelineno-52-17 name=__codelineno-52-17 href=#__codelineno-52-17></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-52-18><a id=__codelineno-52-18 name=__codelineno-52-18 href=#__codelineno-52-18></a><span class=w>      </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-52-19><a id=__codelineno-52-19 name=__codelineno-52-19 href=#__codelineno-52-19></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-52-20><a id=__codelineno-52-20 name=__codelineno-52-20 href=#__codelineno-52-20></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-52-21><a id=__codelineno-52-21 name=__codelineno-52-21 href=#__codelineno-52-21></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-52-22><a id=__codelineno-52-22 name=__codelineno-52-22 href=#__codelineno-52-22></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns an array of task objects, each containing: - All standard task fields (id, name, status, progress, user_id, parent_id, etc.) - Each task object represents a direct child of the specified parent - Tasks are returned in a flat list (not nested)</p> <p><strong>Error Cases:</strong> - Parent task not found: Returns error with code -32602 - Missing parent_id: Returns error with code -32602 - Permission denied: Returns error with code -32001 (for parent task access) - Child tasks with permission denied are filtered out (not returned, but no error)</p> <p><strong>Notes:</strong> - Returns only direct children, not grandchildren or deeper descendants - Use <code>tasks.tree</code> to get the complete nested tree structure - Child tasks are filtered by permission - tasks you cannot access are not returned - Returns an empty array if the parent task has no children - Useful for pagination or when you only need immediate children</p> <h3 id=taskstree><code>tasks.tree</code><a class=headerlink href=#taskstree title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Retrieves the complete task tree structure starting from a specified task. If the specified task has a parent, the method automatically finds the root task and returns the entire tree. The response includes nested children in a hierarchical structure.</p> <p><strong>Method:</strong> <code>tasks.tree</code></p> <p><strong>Parameters:</strong> - <code>task_id</code> (string, optional): Task ID to start from. If the task has a parent, the root task will be found automatically. Either <code>task_id</code> or <code>root_id</code> is required. - <code>root_id</code> (string, optional): Alternative parameter name for root task ID. Can be used instead of <code>task_id</code>.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=p>{</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.tree&quot;</span><span class=p>,</span>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child-task-id&quot;</span>
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tree-request-1&quot;</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=p>{</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tree-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a><span class=w>    </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root-task-id&quot;</span><span class=p>,</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Root Task&quot;</span><span class=p>,</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-54-9><a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-54-10><a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a><span class=w>    </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-54-11><a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-54-12><a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;child-task-id&quot;</span><span class=p>,</span>
</span><span id=__span-54-13><a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Child Task&quot;</span><span class=p>,</span>
</span><span id=__span-54-14><a id=__codelineno-54-14 name=__codelineno-54-14 href=#__codelineno-54-14></a><span class=w>        </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-54-15><a id=__codelineno-54-15 name=__codelineno-54-15 href=#__codelineno-54-15></a><span class=w>        </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-54-16><a id=__codelineno-54-16 name=__codelineno-54-16 href=#__codelineno-54-16></a><span class=w>        </span><span class=nt>&quot;parent_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;root-task-id&quot;</span><span class=p>,</span>
</span><span id=__span-54-17><a id=__codelineno-54-17 name=__codelineno-54-17 href=#__codelineno-54-17></a><span class=w>        </span><span class=nt>&quot;children&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[]</span>
</span><span id=__span-54-18><a id=__codelineno-54-18 name=__codelineno-54-18 href=#__codelineno-54-18></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-54-19><a id=__codelineno-54-19 name=__codelineno-54-19 href=#__codelineno-54-19></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-54-20><a id=__codelineno-54-20 name=__codelineno-54-20 href=#__codelineno-54-20></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-54-21><a id=__codelineno-54-21 name=__codelineno-54-21 href=#__codelineno-54-21></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - Root task object with all fields - <code>children</code> (array): Array of child task objects (recursive structure) - Each child includes all task fields - Each child may have its own <code>children</code> array</p> <p><strong>Error Cases:</strong> - Task not found: Returns error with code -32602 - Permission denied: Returns error with code -32001</p> <p><strong>Notes:</strong> - The tree structure is built recursively from the root task - All tasks in the tree are included, regardless of status - The tree structure preserves parent-child relationships - Use this method to visualize the complete task hierarchy</p> <h3 id=tasksrunninglist><code>tasks.running.list</code><a class=headerlink href=#tasksrunninglist title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Lists all currently running tasks from memory. This method queries the in-memory task tracker to find tasks that are actively executing. Tasks are sorted by creation time (newest first) and can be filtered by user ID.</p> <p><strong>Method:</strong> <code>tasks.running.list</code></p> <p><strong>Parameters:</strong> - <code>user_id</code> (string, optional): Filter tasks by user ID. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, returns all running tasks. - <code>limit</code> (integer, optional): Maximum number of tasks to return (default: 100, maximum recommended: 1000)</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=p>{</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.running.list&quot;</span><span class=p>,</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class=w>    </span><span class=nt>&quot;limit&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>50</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;list-request-1&quot;</span>
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=p>{</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;list-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.3</span><span class=p>,</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=w>      </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a><span class=w>      </span><span class=nt>&quot;started_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:01:00Z&quot;</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a><span class=w>      </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>,</span>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 2&quot;</span><span class=p>,</span>
</span><span id=__span-56-17><a id=__codelineno-56-17 name=__codelineno-56-17 href=#__codelineno-56-17></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-56-18><a id=__codelineno-56-18 name=__codelineno-56-18 href=#__codelineno-56-18></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.7</span><span class=p>,</span>
</span><span id=__span-56-19><a id=__codelineno-56-19 name=__codelineno-56-19 href=#__codelineno-56-19></a><span class=w>      </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-56-20><a id=__codelineno-56-20 name=__codelineno-56-20 href=#__codelineno-56-20></a><span class=w>      </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-56-21><a id=__codelineno-56-21 name=__codelineno-56-21 href=#__codelineno-56-21></a><span class=w>      </span><span class=nt>&quot;started_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:01:00Z&quot;</span>
</span><span id=__span-56-22><a id=__codelineno-56-22 name=__codelineno-56-22 href=#__codelineno-56-22></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-56-23><a id=__codelineno-56-23 name=__codelineno-56-23 href=#__codelineno-56-23></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-56-24><a id=__codelineno-56-24 name=__codelineno-56-24 href=#__codelineno-56-24></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns an array of task objects, each containing: - All standard task fields (id, name, status, progress, user_id, etc.) - Tasks are sorted by <code>created_at</code> in descending order (newest first)</p> <p><strong>Error Cases:</strong> - Permission denied: Tasks for other users are filtered out (not returned in error)</p> <p><strong>Notes:</strong> - This method queries in-memory task tracker, not the database - Only tasks that are actively running are returned - Completed or failed tasks are not included - Use <code>tasks.list</code> to query all tasks from the database - Results are limited to prevent performance issues</p> <h3 id=tasksrunningstatus><code>tasks.running.status</code><a class=headerlink href=#tasksrunningstatus title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Gets the status of one or more tasks. This method checks both the in-memory task tracker (for active execution status) and the database (for persistent status). Returns detailed status information including progress, error messages, and execution timestamps.</p> <p><strong>Method:</strong> <code>tasks.running.status</code></p> <p><strong>Parameters:</strong> - <code>task_ids</code> (array, required): Array of task IDs to check status for. Can also use <code>context_ids</code> as an alias (for A2A Protocol compatibility). - <code>context_ids</code> (array, optional): Alternative parameter name for task IDs (same as <code>task_ids</code>)</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=p>{</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.running.status&quot;</span><span class=p>,</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=w>    </span><span class=nt>&quot;task_ids&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>]</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;status-request-1&quot;</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=p>{</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;status-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=w>      </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-58-7><a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=w>      </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-58-8><a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-58-9><a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-58-10><a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a><span class=w>      </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-58-11><a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=w>      </span><span class=nt>&quot;is_running&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-58-12><a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a><span class=w>      </span><span class=nt>&quot;started_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-58-13><a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a><span class=w>      </span><span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:01:00Z&quot;</span>
</span><span id=__span-58-14><a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-58-15><a id=__codelineno-58-15 name=__codelineno-58-15 href=#__codelineno-58-15></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-58-16><a id=__codelineno-58-16 name=__codelineno-58-16 href=#__codelineno-58-16></a><span class=w>      </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>,</span>
</span><span id=__span-58-17><a id=__codelineno-58-17 name=__codelineno-58-17 href=#__codelineno-58-17></a><span class=w>      </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>,</span>
</span><span id=__span-58-18><a id=__codelineno-58-18 name=__codelineno-58-18 href=#__codelineno-58-18></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-58-19><a id=__codelineno-58-19 name=__codelineno-58-19 href=#__codelineno-58-19></a><span class=w>      </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-58-20><a id=__codelineno-58-20 name=__codelineno-58-20 href=#__codelineno-58-20></a><span class=w>      </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-58-21><a id=__codelineno-58-21 name=__codelineno-58-21 href=#__codelineno-58-21></a><span class=w>      </span><span class=nt>&quot;is_running&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-58-22><a id=__codelineno-58-22 name=__codelineno-58-22 href=#__codelineno-58-22></a><span class=w>      </span><span class=nt>&quot;started_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-58-23><a id=__codelineno-58-23 name=__codelineno-58-23 href=#__codelineno-58-23></a><span class=w>      </span><span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:02:00Z&quot;</span>
</span><span id=__span-58-24><a id=__codelineno-58-24 name=__codelineno-58-24 href=#__codelineno-58-24></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-58-25><a id=__codelineno-58-25 name=__codelineno-58-25 href=#__codelineno-58-25></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-58-26><a id=__codelineno-58-26 name=__codelineno-58-26 href=#__codelineno-58-26></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns an array of task status objects, each containing: - <code>task_id</code> (string): Task ID - <code>context_id</code> (string): Context ID (same as task_id, for A2A Protocol compatibility) - <code>status</code> (string): Task status ("pending", "in_progress", "completed", "failed", "cancelled", "not_found", "permission_denied") - <code>progress</code> (float): Progress value (0.0 to 1.0) - <code>error</code> (string, nullable): Error message if task failed - <code>is_running</code> (boolean): Whether task is currently running in memory - <code>started_at</code> (string, nullable): ISO 8601 timestamp when task started - <code>updated_at</code> (string, nullable): ISO 8601 timestamp when task was last updated</p> <p><strong>Error Cases:</strong> - Task not found: Returns status "not_found" for that task - Permission denied: Returns status "permission_denied" for that task</p> <p><strong>Notes:</strong> - This method checks both in-memory task tracker and database - Returns status for all requested tasks, even if some are not found - Tasks that are not found but are running in memory will have status "in_progress" - Use this method to get real-time status of tasks</p> <h3 id=tasksrunningcount><code>tasks.running.count</code><a class=headerlink href=#tasksrunningcount title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Gets the count of currently running tasks. This method queries the in-memory task tracker to count tasks that are actively executing. Can be filtered by user ID to get user-specific counts.</p> <p><strong>Method:</strong> <code>tasks.running.count</code></p> <p><strong>Parameters:</strong> - <code>user_id</code> (string, optional): Filter by user ID. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, returns total count of all running tasks.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=p>{</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.running.count&quot;</span><span class=p>,</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;count-request-1&quot;</span>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=p>{</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;count-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a><span class=w>    </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5</span><span class=p>,</span>
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span>
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-60-8><a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>count</code> (integer): Number of running tasks - <code>user_id</code> (string, optional): User ID filter applied (only present if user_id was specified)</p> <p><strong>Error Cases:</strong> - Permission denied: Returns error with code -32001 (if trying to count another user's tasks without admin role)</p> <p><strong>Notes:</strong> - Count is based on in-memory task tracker, not database - Only actively running tasks are counted - Returns 0 if no running tasks match the filter - Useful for monitoring system load and user activity</p> <h3 id=taskscancel-tasksrunningcancel><code>tasks.cancel</code> / <code>tasks.running.cancel</code><a class=headerlink href=#taskscancel-tasksrunningcancel title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Cancels one or more running tasks. This method attempts to gracefully cancel tasks by calling the executor's <code>cancel()</code> method if supported. If force is enabled, tasks are immediately marked as cancelled. Returns detailed cancellation results including token usage and partial results if available.</p> <p><strong>Method:</strong> <code>tasks.cancel</code> or <code>tasks.running.cancel</code> (both are equivalent)</p> <p><strong>Parameters:</strong> - <code>task_ids</code> (array, required): Array of task IDs to cancel. Can also use <code>context_ids</code> as an alias (for A2A Protocol compatibility). - <code>context_ids</code> (array, optional): Alternative parameter name for task IDs - <code>force</code> (boolean, optional): Force immediate cancellation without waiting for graceful shutdown (default: false) - <code>error_message</code> (string, optional): Custom error message for cancellation. If not provided, defaults to "Cancelled by user" or "Force cancelled by user" based on force flag.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=p>{</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.cancel&quot;</span><span class=p>,</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=w>    </span><span class=nt>&quot;task_ids&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>],</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=w>    </span><span class=nt>&quot;force&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel-request-1&quot;</span>
</span><span id=__span-61-9><a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=p>{</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancel-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a><span class=w>      </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancelled&quot;</span><span class=p>,</span>
</span><span id=__span-62-8><a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a><span class=w>      </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task cancelled successfully&quot;</span><span class=p>,</span>
</span><span id=__span-62-9><a id=__codelineno-62-9 name=__codelineno-62-9 href=#__codelineno-62-9></a><span class=w>      </span><span class=nt>&quot;force&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-62-10><a id=__codelineno-62-10 name=__codelineno-62-10 href=#__codelineno-62-10></a><span class=w>      </span><span class=nt>&quot;token_usage&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-62-11><a id=__codelineno-62-11 name=__codelineno-62-11 href=#__codelineno-62-11></a><span class=w>        </span><span class=nt>&quot;total_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
</span><span id=__span-62-12><a id=__codelineno-62-12 name=__codelineno-62-12 href=#__codelineno-62-12></a><span class=w>        </span><span class=nt>&quot;prompt_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span><span class=p>,</span>
</span><span id=__span-62-13><a id=__codelineno-62-13 name=__codelineno-62-13 href=#__codelineno-62-13></a><span class=w>        </span><span class=nt>&quot;completion_tokens&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>500</span>
</span><span id=__span-62-14><a id=__codelineno-62-14 name=__codelineno-62-14 href=#__codelineno-62-14></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-62-15><a id=__codelineno-62-15 name=__codelineno-62-15 href=#__codelineno-62-15></a><span class=w>      </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-62-16><a id=__codelineno-62-16 name=__codelineno-62-16 href=#__codelineno-62-16></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-62-17><a id=__codelineno-62-17 name=__codelineno-62-17 href=#__codelineno-62-17></a><span class=w>    </span><span class=p>{</span>
</span><span id=__span-62-18><a id=__codelineno-62-18 name=__codelineno-62-18 href=#__codelineno-62-18></a><span class=w>      </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-2&quot;</span><span class=p>,</span>
</span><span id=__span-62-19><a id=__codelineno-62-19 name=__codelineno-62-19 href=#__codelineno-62-19></a><span class=w>      </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;cancelled&quot;</span><span class=p>,</span>
</span><span id=__span-62-20><a id=__codelineno-62-20 name=__codelineno-62-20 href=#__codelineno-62-20></a><span class=w>      </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task cancelled successfully&quot;</span><span class=p>,</span>
</span><span id=__span-62-21><a id=__codelineno-62-21 name=__codelineno-62-21 href=#__codelineno-62-21></a><span class=w>      </span><span class=nt>&quot;force&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-62-22><a id=__codelineno-62-22 name=__codelineno-62-22 href=#__codelineno-62-22></a><span class=w>      </span><span class=nt>&quot;token_usage&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-62-23><a id=__codelineno-62-23 name=__codelineno-62-23 href=#__codelineno-62-23></a><span class=w>      </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span>
</span><span id=__span-62-24><a id=__codelineno-62-24 name=__codelineno-62-24 href=#__codelineno-62-24></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-62-25><a id=__codelineno-62-25 name=__codelineno-62-25 href=#__codelineno-62-25></a><span class=w>  </span><span class=p>]</span>
</span><span id=__span-62-26><a id=__codelineno-62-26 name=__codelineno-62-26 href=#__codelineno-62-26></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> Returns an array of cancellation result objects, each containing: - <code>task_id</code> (string): Task ID that was cancelled - <code>status</code> (string): Final status ("cancelled" or "failed") - <code>message</code> (string): Cancellation message - <code>force</code> (boolean): Whether force cancellation was used - <code>token_usage</code> (object, nullable): Token usage information if available - <code>result</code> (any, nullable): Partial result if available</p> <p><strong>Error Cases:</strong> - Task not found: Returns status "error" with error message - Permission denied: Returns status "failed" with "permission_denied" error - Task already completed: May return status "failed" if task cannot be cancelled</p> <p><strong>Notes:</strong> - Cancellation attempts to call executor's <code>cancel()</code> method if supported - Force cancellation immediately marks task as cancelled without waiting - Token usage is recorded if available from the executor - Partial results may be returned if task was partially completed - Child tasks are not automatically cancelled (cancel parent task to cancel children)</p> <h2 id=system-endpoints>System Endpoints<a class=headerlink href=#system-endpoints title="Permanent link">&para;</a></h2> <h3 id=post-system><code>POST /system</code><a class=headerlink href=#post-system title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> Unified system operations endpoint that handles system-level operations via JSON-RPC 2.0 format. This endpoint provides health checks, configuration management, and example data initialization.</p> <p><strong>Authentication:</strong><br> Optional (JWT token in <code>Authorization</code> header if JWT is enabled)</p> <p><strong>Request Format:</strong><br> JSON-RPC 2.0 format with method-specific parameters:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=p>{</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system.health&quot;</span><span class=p>,</span>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Supported Methods:</strong> - <code>system.health</code> - Check system health status - <code>system.executors</code> - Get available executors based on configuration - <code>config.llm_key.set</code> - Set LLM API key for user - <code>config.llm_key.get</code> - Get LLM API key status - <code>config.llm_key.delete</code> - Delete LLM API key</p> <p><strong>Response Format:</strong><br> JSON-RPC 2.0 response format. The <code>result</code> field varies by method.</p> <p><strong>Notes:</strong> - System operations may require authentication depending on configuration - Some operations (like LLM key management) require proper permissions</p> <h4 id=systemhealth><code>system.health</code><a class=headerlink href=#systemhealth title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Checks the system health status and returns basic system information including version, uptime, and running tasks count. This endpoint is useful for monitoring and health checks.</p> <p><strong>Method:</strong> <code>system.health</code></p> <p><strong>Parameters:</strong><br> None</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=p>{</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system.health&quot;</span><span class=p>,</span>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;health-request-1&quot;</span>
</span><span id=__span-64-6><a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=p>{</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;health-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;healthy&quot;</span><span class=p>,</span>
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;apflow is healthy&quot;</span><span class=p>,</span>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a><span class=w>    </span><span class=nt>&quot;version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;0.2.0&quot;</span><span class=p>,</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a><span class=w>    </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-01T00:00:00Z&quot;</span><span class=p>,</span>
</span><span id=__span-65-9><a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a><span class=w>    </span><span class=nt>&quot;running_tasks_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-65-10><a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-65-11><a id=__codelineno-65-11 name=__codelineno-65-11 href=#__codelineno-65-11></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>status</code> (string): Health status ("healthy" or "unhealthy") - <code>message</code> (string): Health status message - <code>version</code> (string): Service version - <code>timestamp</code> (string): Current timestamp (ISO 8601) - <code>running_tasks_count</code> (integer): Number of currently running tasks</p> <p><strong>Notes:</strong> - This endpoint does not require authentication - Useful for load balancer health checks - Returns basic system information for monitoring</p> <h4 id=systemexecutors><code>system.executors</code><a class=headerlink href=#systemexecutors title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Gets the list of available executors based on the APFLOW_EXTENSIONS configuration. This method returns metadata for all executors that are currently accessible. If APFLOW_EXTENSIONS is set, only executors from enabled extensions are returned (security restriction).</p> <p><strong>Method:</strong> <code>system.executors</code></p> <p><strong>Parameters:</strong><br> None</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=p>{</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system.executors&quot;</span><span class=p>,</span>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{},</span>
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;executors-request-1&quot;</span>
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=p>{</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;executors-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a><span class=w>    </span><span class=nt>&quot;executors&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;System Info Executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stdio&quot;</span><span class=p>,</span>
</span><span id=__span-67-10><a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Retrieve system information like CPU, memory, disk usage&quot;</span>
</span><span id=__span-67-11><a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-67-12><a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-67-13><a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;command_executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-14><a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Command Executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-15><a id=__codelineno-67-15 name=__codelineno-67-15 href=#__codelineno-67-15></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stdio&quot;</span><span class=p>,</span>
</span><span id=__span-67-16><a id=__codelineno-67-16 name=__codelineno-67-16 href=#__codelineno-67-16></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute shell commands on the local system&quot;</span>
</span><span id=__span-67-17><a id=__codelineno-67-17 name=__codelineno-67-17 href=#__codelineno-67-17></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-67-18><a id=__codelineno-67-18 name=__codelineno-67-18 href=#__codelineno-67-18></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-67-19><a id=__codelineno-67-19 name=__codelineno-67-19 href=#__codelineno-67-19></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-20><a id=__codelineno-67-20 name=__codelineno-67-20 href=#__codelineno-67-20></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;REST Executor&quot;</span><span class=p>,</span>
</span><span id=__span-67-21><a id=__codelineno-67-21 name=__codelineno-67-21 href=#__codelineno-67-21></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;http&quot;</span><span class=p>,</span>
</span><span id=__span-67-22><a id=__codelineno-67-22 name=__codelineno-67-22 href=#__codelineno-67-22></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Make HTTP REST API calls&quot;</span>
</span><span id=__span-67-23><a id=__codelineno-67-23 name=__codelineno-67-23 href=#__codelineno-67-23></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-67-24><a id=__codelineno-67-24 name=__codelineno-67-24 href=#__codelineno-67-24></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-67-25><a id=__codelineno-67-25 name=__codelineno-67-25 href=#__codelineno-67-25></a><span class=w>    </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-67-26><a id=__codelineno-67-26 name=__codelineno-67-26 href=#__codelineno-67-26></a><span class=w>    </span><span class=nt>&quot;restricted&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span>
</span><span id=__span-67-27><a id=__codelineno-67-27 name=__codelineno-67-27 href=#__codelineno-67-27></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-67-28><a id=__codelineno-67-28 name=__codelineno-67-28 href=#__codelineno-67-28></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>executors</code> (array): List of available executors, each with: - <code>id</code> (string): Unique executor identifier (e.g., "command_executor") - <code>name</code> (string): Human-readable executor name - <code>extension</code> (string): Extension this executor belongs to - <code>description</code> (string): Detailed description of what the executor does - <code>count</code> (integer): Total number of available executors - <code>restricted</code> (boolean): Whether executor access is restricted by APFLOW_EXTENSIONS - <code>allowed_ids</code> (array, optional): List of allowed executor IDs (only present if <code>restricted</code> is true)</p> <p><strong>Restricted Response Example:</strong> When APFLOW_EXTENSIONS environment variable is set to "stdio,http": <div class="language-json highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=p>{</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;executors-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a><span class=w>    </span><span class=nt>&quot;executors&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;System Info Executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-9><a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stdio&quot;</span><span class=p>,</span>
</span><span id=__span-68-10><a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Retrieve system information like CPU, memory, disk usage&quot;</span>
</span><span id=__span-68-11><a id=__codelineno-68-11 name=__codelineno-68-11 href=#__codelineno-68-11></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-68-12><a id=__codelineno-68-12 name=__codelineno-68-12 href=#__codelineno-68-12></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-68-13><a id=__codelineno-68-13 name=__codelineno-68-13 href=#__codelineno-68-13></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;command_executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-14><a id=__codelineno-68-14 name=__codelineno-68-14 href=#__codelineno-68-14></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Command Executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-15><a id=__codelineno-68-15 name=__codelineno-68-15 href=#__codelineno-68-15></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;stdio&quot;</span><span class=p>,</span>
</span><span id=__span-68-16><a id=__codelineno-68-16 name=__codelineno-68-16 href=#__codelineno-68-16></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Execute shell commands on the local system&quot;</span>
</span><span id=__span-68-17><a id=__codelineno-68-17 name=__codelineno-68-17 href=#__codelineno-68-17></a><span class=w>      </span><span class=p>},</span>
</span><span id=__span-68-18><a id=__codelineno-68-18 name=__codelineno-68-18 href=#__codelineno-68-18></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-68-19><a id=__codelineno-68-19 name=__codelineno-68-19 href=#__codelineno-68-19></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-20><a id=__codelineno-68-20 name=__codelineno-68-20 href=#__codelineno-68-20></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;REST Executor&quot;</span><span class=p>,</span>
</span><span id=__span-68-21><a id=__codelineno-68-21 name=__codelineno-68-21 href=#__codelineno-68-21></a><span class=w>        </span><span class=nt>&quot;extension&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;http&quot;</span><span class=p>,</span>
</span><span id=__span-68-22><a id=__codelineno-68-22 name=__codelineno-68-22 href=#__codelineno-68-22></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Make HTTP REST API calls&quot;</span>
</span><span id=__span-68-23><a id=__codelineno-68-23 name=__codelineno-68-23 href=#__codelineno-68-23></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-68-24><a id=__codelineno-68-24 name=__codelineno-68-24 href=#__codelineno-68-24></a><span class=w>    </span><span class=p>],</span>
</span><span id=__span-68-25><a id=__codelineno-68-25 name=__codelineno-68-25 href=#__codelineno-68-25></a><span class=w>    </span><span class=nt>&quot;count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-68-26><a id=__codelineno-68-26 name=__codelineno-68-26 href=#__codelineno-68-26></a><span class=w>    </span><span class=nt>&quot;restricted&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-68-27><a id=__codelineno-68-27 name=__codelineno-68-27 href=#__codelineno-68-27></a><span class=w>    </span><span class=nt>&quot;allowed_ids&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;system_info_executor&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;command_executor&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;rest_executor&quot;</span><span class=p>]</span>
</span><span id=__span-68-28><a id=__codelineno-68-28 name=__codelineno-68-28 href=#__codelineno-68-28></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-68-29><a id=__codelineno-68-29 name=__codelineno-68-29 href=#__codelineno-68-29></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Notes:</strong> - This endpoint does not require authentication - Returns all available executors if APFLOW_EXTENSIONS is not set - Returns only restricted executors if APFLOW_EXTENSIONS is set - Useful for discovery of available executor types before executing tasks - The executor metadata can be used to validate task schemas against available executors</p> <h4 id=configllm_keyset><code>config.llm_key.set</code><a class=headerlink href=#configllm_keyset title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Sets an LLM API key for a user. This method stores the API key securely for use in LLM-based tasks (e.g., CrewAI tasks). The key is associated with a user ID and optional provider name. Keys are stored securely and never returned in responses.</p> <p><strong>Method:</strong> <code>config.llm_key.set</code></p> <p><strong>Parameters:</strong> - <code>api_key</code> (string, required): LLM API key to store - <code>user_id</code> (string, optional): User ID to associate the key with. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, raises an error. - <code>provider</code> (string, optional): Provider name (e.g., "openai", "anthropic", "google", "gemini", "mistral", "groq", "cohere", "together"). If not provided, the provider will be auto-detected from the API key format or use "default".</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=p>{</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;config.llm_key.set&quot;</span><span class=p>,</span>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=w>    </span><span class=nt>&quot;api_key&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;sk-your-api-key&quot;</span><span class=p>,</span>
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span>
</span><span id=__span-69-8><a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-69-9><a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;set-key-request-1&quot;</span>
</span><span id=__span-69-10><a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=p>{</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;set-key-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-70-5><a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a><span class=w>    </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-70-6><a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-70-7><a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span>
</span><span id=__span-70-8><a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-70-9><a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>success</code> (boolean): Whether the key was set successfully - <code>user_id</code> (string): User ID the key is associated with - <code>provider</code> (string): Provider name (or "default" if not specified)</p> <p><strong>Error Cases:</strong> - Missing api_key: Returns error with code -32602 - Missing user_id (and not authenticated): Returns error with code -32602 - Permission denied: Returns error with code -32001 - Extension not available: Returns error if llm-key-config extension is not installed</p> <p><strong>Notes:</strong> - Requires the <code>llm-key-config</code> extension to be installed - Keys are stored securely and never returned in API responses - Keys are used during task execution and cleared after completion - Multiple keys can be stored per user (one per provider) - Keys take precedence over environment variables during task execution</p> <h4 id=configllm_keyget><code>config.llm_key.get</code><a class=headerlink href=#configllm_keyget title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Gets the status of LLM API keys for a user. This method checks if keys exist without returning the actual key values (for security). Returns information about which providers have keys configured.</p> <p><strong>Method:</strong> <code>config.llm_key.get</code></p> <p><strong>Parameters:</strong> - <code>user_id</code> (string, optional): User ID to check keys for. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, uses "default". - <code>provider</code> (string, optional): Provider name to check. If not provided, returns status for all providers.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=p>{</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;config.llm_key.get&quot;</span><span class=p>,</span>
</span><span id=__span-71-4><a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-71-5><a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-71-6><a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span>
</span><span id=__span-71-7><a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-71-8><a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;get-key-request-1&quot;</span>
</span><span id=__span-71-9><a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=p>{</span>
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-72-3><a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;get-key-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-72-4><a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-72-5><a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=w>    </span><span class=nt>&quot;has_key&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-72-6><a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-72-7><a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span><span class=p>,</span>
</span><span id=__span-72-8><a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a><span class=w>    </span><span class=nt>&quot;providers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-72-9><a id=__codelineno-72-9 name=__codelineno-72-9 href=#__codelineno-72-9></a><span class=w>      </span><span class=nt>&quot;openai&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-72-10><a id=__codelineno-72-10 name=__codelineno-72-10 href=#__codelineno-72-10></a><span class=w>      </span><span class=nt>&quot;anthropic&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=p>,</span>
</span><span id=__span-72-11><a id=__codelineno-72-11 name=__codelineno-72-11 href=#__codelineno-72-11></a><span class=w>      </span><span class=nt>&quot;google&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-72-12><a id=__codelineno-72-12 name=__codelineno-72-12 href=#__codelineno-72-12></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-72-13><a id=__codelineno-72-13 name=__codelineno-72-13 href=#__codelineno-72-13></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-72-14><a id=__codelineno-72-14 name=__codelineno-72-14 href=#__codelineno-72-14></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>has_key</code> (boolean): Whether a key exists for the specified provider (or any provider if provider not specified) - <code>user_id</code> (string): User ID checked - <code>provider</code> (string, nullable): Provider name checked (or null if checking all) - <code>providers</code> (object): Dictionary of provider names to boolean values indicating key existence</p> <p><strong>Error Cases:</strong> - Permission denied: Returns empty status (graceful degradation) - Extension not available: Returns empty status (graceful degradation)</p> <p><strong>Notes:</strong> - This method never returns the actual API key values (for security) - Returns graceful responses even if the extension is not available - Useful for checking key configuration status before task execution - Returns false/empty status if extension is not installed (graceful degradation)</p> <h4 id=configllm_keydelete><code>config.llm_key.delete</code><a class=headerlink href=#configllm_keydelete title="Permanent link">&para;</a></h4> <p><strong>Description:</strong><br> Deletes an LLM API key for a user. This method removes the stored API key for a specific provider, or all keys for the user if no provider is specified.</p> <p><strong>Method:</strong> <code>config.llm_key.delete</code></p> <p><strong>Parameters:</strong> - <code>user_id</code> (string, optional): User ID to delete keys for. If not provided and JWT is enabled, uses authenticated user's ID. If not provided and JWT is disabled, raises an error. - <code>provider</code> (string, optional): Provider name to delete key for. If not provided, deletes all keys for the user.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=p>{</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;config.llm_key.delete&quot;</span><span class=p>,</span>
</span><span id=__span-73-4><a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-73-5><a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-73-6><a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span>
</span><span id=__span-73-7><a id=__codelineno-73-7 name=__codelineno-73-7 href=#__codelineno-73-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-73-8><a id=__codelineno-73-8 name=__codelineno-73-8 href=#__codelineno-73-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-key-request-1&quot;</span>
</span><span id=__span-73-9><a id=__codelineno-73-9 name=__codelineno-73-9 href=#__codelineno-73-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Example Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=p>{</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;delete-key-request-1&quot;</span><span class=p>,</span>
</span><span id=__span-74-4><a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-74-5><a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a><span class=w>    </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-74-6><a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-74-7><a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a><span class=w>    </span><span class=nt>&quot;deleted&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-74-8><a id=__codelineno-74-8 name=__codelineno-74-8 href=#__codelineno-74-8></a><span class=w>    </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;openai&quot;</span>
</span><span id=__span-74-9><a id=__codelineno-74-9 name=__codelineno-74-9 href=#__codelineno-74-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-74-10><a id=__codelineno-74-10 name=__codelineno-74-10 href=#__codelineno-74-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Fields:</strong> - <code>success</code> (boolean): Whether the operation was successful - <code>user_id</code> (string): User ID the key was deleted for - <code>deleted</code> (boolean): Whether a key was actually deleted (false if key didn't exist) - <code>provider</code> (string): Provider name (or "all" if no provider specified)</p> <p><strong>Error Cases:</strong> - Missing user_id (and not authenticated): Returns error with code -32602 - Permission denied: Returns error with code -32001 - Extension not available: Returns error if llm-key-config extension is not installed</p> <p><strong>Notes:</strong> - Requires the <code>llm-key-config</code> extension to be installed - If provider is not specified, all keys for the user are deleted - Returns <code>deleted: false</code> if the key didn't exist (not an error) - Keys are permanently deleted and cannot be recovered</p> <h2 id=authentication>Authentication<a class=headerlink href=#authentication title="Permanent link">&para;</a></h2> <h3 id=jwt-authentication>JWT Authentication<a class=headerlink href=#jwt-authentication title="Permanent link">&para;</a></h3> <p>The API supports optional JWT authentication. To enable:</p> <ol> <li>Set environment variable <code>APFLOW_JWT_SECRET</code></li> <li>Include JWT token in request headers or cookies</li> </ol> <p><strong>Token Sources (Priority Order):</strong> 1. <strong>Authorization Header</strong> (highest priority): <code>Authorization: Bearer &lt;token&gt;</code> 2. <strong>Cookie</strong> (fallback): <code>Authorization</code> cookie containing the token</p> <p><strong>Token Format:</strong> <div class="language-text highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a># Header format
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
</span><span id=__span-75-3><a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>
</span><span id=__span-75-4><a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a># Cookie format (alternative)
</span><span id=__span-75-5><a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a>Cookie: Authorization=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
</span></code></pre></div></p> <p><strong>Token Payload:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=p>{</span>
</span><span id=__span-76-2><a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a><span class=w>  </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-76-3><a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a><span class=w>  </span><span class=nt>&quot;sub&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Standard JWT claim (used if user_id not present)</span>
</span><span id=__span-76-4><a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a><span class=w>  </span><span class=nt>&quot;roles&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;admin&quot;</span><span class=p>],</span>
</span><span id=__span-76-5><a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a><span class=w>  </span><span class=nt>&quot;exp&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1234567890</span>
</span><span id=__span-76-6><a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Token Generation:</strong> You can generate JWT tokens using the <code>generate_token()</code> function:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=kn>from</span><span class=w> </span><span class=nn>apflow.api.a2a.server</span><span class=w> </span><span class=kn>import</span> <span class=n>generate_token</span>
</span><span id=__span-77-2><a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>
</span><span id=__span-77-3><a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a><span class=c1># Generate token with user_id</span>
</span><span id=__span-77-4><a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a><span class=n>payload</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span> <span class=s2>&quot;roles&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;admin&quot;</span><span class=p>]}</span>
</span><span id=__span-77-5><a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a><span class=n>secret_key</span> <span class=o>=</span> <span class=s2>&quot;your-secret-key&quot;</span>
</span><span id=__span-77-6><a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a><span class=n>token</span> <span class=o>=</span> <span class=n>generate_token</span><span class=p>(</span><span class=n>payload</span><span class=p>,</span> <span class=n>secret_key</span><span class=p>,</span> <span class=n>expires_in_days</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>
</span><span id=__span-77-7><a id=__codelineno-77-7 name=__codelineno-77-7 href=#__codelineno-77-7></a>
</span><span id=__span-77-8><a id=__codelineno-77-8 name=__codelineno-77-8 href=#__codelineno-77-8></a><span class=c1># Use token in requests</span>
</span><span id=__span-77-9><a id=__codelineno-77-9 name=__codelineno-77-9 href=#__codelineno-77-9></a><span class=n>headers</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;Authorization&quot;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&quot;Bearer </span><span class=si>{</span><span class=n>token</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>}</span>
</span></code></pre></div> <p><strong>Permission Checking:</strong> - If <code>roles</code> contains <code>"admin"</code>, user can access any task - Otherwise, user can only access tasks with matching <code>user_id</code> - If no <code>user_id</code> in token, the <code>sub</code> field is used as fallback - If no <code>user_id</code> or <code>sub</code> in token, permission checking is skipped</p> <h2 id=llm-api-key-headers>LLM API Key Headers<a class=headerlink href=#llm-api-key-headers title="Permanent link">&para;</a></h2> <p>For tasks that require LLM API keys (e.g., CrewAI tasks), you can provide keys via request headers.</p> <h3 id=x-llm-api-key-header>X-LLM-API-KEY Header<a class=headerlink href=#x-llm-api-key-header title="Permanent link">&para;</a></h3> <p><strong>Format:</strong> - Simple: <code>X-LLM-API-KEY: &lt;api-key&gt;</code> (provider auto-detected from model name) - Provider-specific: <code>X-LLM-API-KEY: &lt;provider&gt;:&lt;api-key&gt;</code></p> <p><strong>Examples:</strong> <div class="language-bash highlight"><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=c1># OpenAI (auto-detected from model name)</span>
</span><span id=__span-78-2><a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/tasks<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-3><a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;X-LLM-API-KEY: sk-your-openai-key&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-4><a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-5><a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{...}&#39;</span>
</span><span id=__span-78-6><a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a>
</span><span id=__span-78-7><a id=__codelineno-78-7 name=__codelineno-78-7 href=#__codelineno-78-7></a><span class=c1># OpenAI (explicit provider)</span>
</span><span id=__span-78-8><a id=__codelineno-78-8 name=__codelineno-78-8 href=#__codelineno-78-8></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/tasks<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-9><a id=__codelineno-78-9 name=__codelineno-78-9 href=#__codelineno-78-9></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;X-LLM-API-KEY: openai:sk-your-openai-key&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-10><a id=__codelineno-78-10 name=__codelineno-78-10 href=#__codelineno-78-10></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-11><a id=__codelineno-78-11 name=__codelineno-78-11 href=#__codelineno-78-11></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{...}&#39;</span>
</span><span id=__span-78-12><a id=__codelineno-78-12 name=__codelineno-78-12 href=#__codelineno-78-12></a>
</span><span id=__span-78-13><a id=__codelineno-78-13 name=__codelineno-78-13 href=#__codelineno-78-13></a><span class=c1># Anthropic</span>
</span><span id=__span-78-14><a id=__codelineno-78-14 name=__codelineno-78-14 href=#__codelineno-78-14></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/tasks<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-15><a id=__codelineno-78-15 name=__codelineno-78-15 href=#__codelineno-78-15></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;X-LLM-API-KEY: anthropic:sk-ant-your-key&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-16><a id=__codelineno-78-16 name=__codelineno-78-16 href=#__codelineno-78-16></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-17><a id=__codelineno-78-17 name=__codelineno-78-17 href=#__codelineno-78-17></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{...}&#39;</span>
</span></code></pre></div></p> <p><strong>Supported Providers:</strong> - <code>openai</code> - OpenAI (GPT models) - <code>anthropic</code> - Anthropic (Claude models) - <code>google</code> / <code>gemini</code> - Google (Gemini models) - <code>mistral</code> - Mistral AI - <code>groq</code> - Groq - <code>cohere</code> - Cohere - <code>together</code> - Together AI - And more (see provider list in LLM Key Injector)</p> <p><strong>Priority Order:</strong> 1. Request header (<code>X-LLM-API-KEY</code>) - highest priority 2. User config (if <code>llm-key-config</code> extension is installed) 3. Environment variables (automatically read by CrewAI/LiteLLM)</p> <p><strong>Note:</strong> LLM keys are never stored in the database. They are only used during task execution and cleared after completion.</p> <h2 id=error-responses>Error Responses<a class=headerlink href=#error-responses title="Permanent link">&para;</a></h2> <p>All endpoints return JSON-RPC 2.0 error format on failure:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=p>{</span>
</span><span id=__span-79-2><a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-79-3><a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-id&quot;</span><span class=p>,</span>
</span><span id=__span-79-4><a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a><span class=w>  </span><span class=nt>&quot;error&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-79-5><a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>-32603</span><span class=p>,</span>
</span><span id=__span-79-6><a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Internal error&quot;</span><span class=p>,</span>
</span><span id=__span-79-7><a id=__codelineno-79-7 name=__codelineno-79-7 href=#__codelineno-79-7></a><span class=w>    </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Error details&quot;</span>
</span><span id=__span-79-8><a id=__codelineno-79-8 name=__codelineno-79-8 href=#__codelineno-79-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-79-9><a id=__codelineno-79-9 name=__codelineno-79-9 href=#__codelineno-79-9></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Error Codes:</strong> - <code>-32600</code>: Invalid Request - <code>-32601</code>: Method not found - <code>-32602</code>: Invalid params - <code>-32603</code>: Internal error - <code>-32000</code>: Server error (custom)</p> <h2 id=streaming-support>Streaming Support<a class=headerlink href=#streaming-support title="Permanent link">&para;</a></h2> <p>The API supports real-time progress updates via Server-Sent Events (SSE) and WebSocket. This allows clients to receive live updates about task execution progress without polling.</p> <h3 id=server-sent-events-sse-via-tasksexecute>Server-Sent Events (SSE) via <code>tasks.execute</code><a class=headerlink href=#server-sent-events-sse-via-tasksexecute title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> When using <code>tasks.execute</code> with <code>use_streaming=true</code>, the endpoint returns a <code>StreamingResponse</code> with Server-Sent Events (SSE). The response stream includes the initial JSON-RPC response followed by real-time progress updates.</p> <p><strong>Usage:</strong> Set <code>use_streaming=true</code> in the <code>tasks.execute</code> request parameters. The endpoint will return a streaming response with <code>Content-Type: text/event-stream</code>.</p> <p><strong>Example Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=p>{</span>
</span><span id=__span-80-2><a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-80-3><a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;tasks.execute&quot;</span><span class=p>,</span>
</span><span id=__span-80-4><a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-80-5><a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a><span class=w>    </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-80-6><a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a><span class=w>    </span><span class=nt>&quot;use_streaming&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-80-7><a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-80-8><a id=__codelineno-80-8 name=__codelineno-80-8 href=#__codelineno-80-8></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute-request-1&quot;</span>
</span><span id=__span-80-9><a id=__codelineno-80-9 name=__codelineno-80-9 href=#__codelineno-80-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Response Format:</strong> The response is an SSE stream. The first event contains the initial JSON-RPC response: <div class="language-text highlight"><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a>data: {&quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: &quot;execute-request-1&quot;, &quot;result&quot;: {&quot;success&quot;: true, &quot;protocol&quot;: &quot;jsonrpc&quot;, &quot;root_task_id&quot;: &quot;task-abc-123&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;started&quot;, &quot;streaming&quot;: true, &quot;message&quot;: &quot;Task task-abc-123 execution started with streaming&quot;}}
</span></code></pre></div></p> <p>Subsequent events contain real-time progress updates: <div class="language-text highlight"><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a>data: {&quot;type&quot;: &quot;progress&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;in_progress&quot;, &quot;progress&quot;: 0.5, &quot;message&quot;: &quot;Task tree execution started&quot;, &quot;timestamp&quot;: &quot;2025-11-26T08:00:00&quot;}
</span><span id=__span-82-2><a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a>
</span><span id=__span-82-3><a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a>data: {&quot;type&quot;: &quot;task_completed&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;completed&quot;, &quot;result&quot;: {...}, &quot;timestamp&quot;: &quot;2025-11-26T08:00:05&quot;}
</span><span id=__span-82-4><a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a>
</span><span id=__span-82-5><a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a>data: {&quot;type&quot;: &quot;final&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;, &quot;status&quot;: &quot;completed&quot;, &quot;result&quot;: {&quot;progress&quot;: 1.0}, &quot;final&quot;: true, &quot;timestamp&quot;: &quot;2025-11-26T08:00:05&quot;}
</span><span id=__span-82-6><a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a>
</span><span id=__span-82-7><a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a>data: {&quot;type&quot;: &quot;stream_end&quot;, &quot;task_id&quot;: &quot;task-abc-123&quot;}
</span></code></pre></div></p> <p><strong>Event Types:</strong> - <code>progress</code>: Task progress update - <code>task_start</code>: Task execution started - <code>task_completed</code>: Task completed successfully - <code>task_failed</code>: Task execution failed - <code>final</code>: Final status update (always sent at the end) - <code>stream_end</code>: Stream connection closed</p> <p><strong>Notes:</strong> - Connection remains open until task completes or client disconnects - Events are sent in real-time as tasks execute - Must parse SSE format (<code>data: {...}</code>) instead of expecting JSON response - Suitable for web applications and simple client implementations - Can be combined with <code>webhook_config</code> for dual update delivery</p> <h3 id=websocket-ws><code>WebSocket /ws</code><a class=headerlink href=#websocket-ws title="Permanent link">&para;</a></h3> <p><strong>Description:</strong><br> WebSocket endpoint for bidirectional real-time communication. This endpoint supports both receiving task execution updates and sending commands. WebSocket provides lower latency and better performance than SSE for high-frequency updates.</p> <p><strong>Authentication:</strong><br> Optional (JWT token in WebSocket handshake headers if JWT is enabled)</p> <p><strong>Connection:</strong> - Protocol: WebSocket (ws:// or wss://) - URL: <code>ws://localhost:8000/ws</code> or <code>wss://localhost:8000/ws</code> (secure) - Headers: Standard WebSocket headers, plus optional <code>Authorization: Bearer &lt;token&gt;</code></p> <p><strong>Message Format:</strong> Messages are sent and received as JSON:</p> <p><strong>Incoming Messages (from server):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=p>{</span>
</span><span id=__span-83-2><a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a><span class=w>  </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task_progress&quot;</span><span class=p>,</span>
</span><span id=__span-83-3><a id=__codelineno-83-3 name=__codelineno-83-3 href=#__codelineno-83-3></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-83-4><a id=__codelineno-83-4 name=__codelineno-83-4 href=#__codelineno-83-4></a><span class=w>  </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-83-5><a id=__codelineno-83-5 name=__codelineno-83-5 href=#__codelineno-83-5></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-83-6><a id=__codelineno-83-6 name=__codelineno-83-6 href=#__codelineno-83-6></a><span class=w>    </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.5</span><span class=p>,</span>
</span><span id=__span-83-7><a id=__codelineno-83-7 name=__codelineno-83-7 href=#__codelineno-83-7></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span>
</span><span id=__span-83-8><a id=__codelineno-83-8 name=__codelineno-83-8 href=#__codelineno-83-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-83-9><a id=__codelineno-83-9 name=__codelineno-83-9 href=#__codelineno-83-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Outgoing Messages (to server):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=p>{</span>
</span><span id=__span-84-2><a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a><span class=w>  </span><span class=nt>&quot;action&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;subscribe&quot;</span><span class=p>,</span>
</span><span id=__span-84-3><a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span>
</span><span id=__span-84-4><a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Supported Actions:</strong> - <code>subscribe</code>: Subscribe to task updates - <code>task_id</code> (string, required): Task ID to subscribe to - <code>unsubscribe</code>: Unsubscribe from task updates - <code>task_id</code> (string, required): Task ID to unsubscribe from - <code>ping</code>: Keep-alive ping (server responds with <code>pong</code>)</p> <p><strong>Example JavaScript Client:</strong> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=kd>const</span><span class=w> </span><span class=nx>ws</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>WebSocket</span><span class=p>(</span><span class=s1>&#39;ws://localhost:8000/ws&#39;</span><span class=p>);</span>
</span><span id=__span-85-2><a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a>
</span><span id=__span-85-3><a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a><span class=nx>ws</span><span class=p>.</span><span class=nx>onopen</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-85-4><a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a><span class=w>  </span><span class=c1>// Subscribe to task updates</span>
</span><span id=__span-85-5><a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a><span class=w>  </span><span class=nx>ws</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=nb>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span>
</span><span id=__span-85-6><a id=__codelineno-85-6 name=__codelineno-85-6 href=#__codelineno-85-6></a><span class=w>    </span><span class=nx>action</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;subscribe&#39;</span><span class=p>,</span>
</span><span id=__span-85-7><a id=__codelineno-85-7 name=__codelineno-85-7 href=#__codelineno-85-7></a><span class=w>    </span><span class=nx>task_id</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;task-abc-123&#39;</span>
</span><span id=__span-85-8><a id=__codelineno-85-8 name=__codelineno-85-8 href=#__codelineno-85-8></a><span class=w>  </span><span class=p>}));</span>
</span><span id=__span-85-9><a id=__codelineno-85-9 name=__codelineno-85-9 href=#__codelineno-85-9></a><span class=p>};</span>
</span><span id=__span-85-10><a id=__codelineno-85-10 name=__codelineno-85-10 href=#__codelineno-85-10></a>
</span><span id=__span-85-11><a id=__codelineno-85-11 name=__codelineno-85-11 href=#__codelineno-85-11></a><span class=nx>ws</span><span class=p>.</span><span class=nx>onmessage</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>event</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-85-12><a id=__codelineno-85-12 name=__codelineno-85-12 href=#__codelineno-85-12></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>event</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-85-13><a id=__codelineno-85-13 name=__codelineno-85-13 href=#__codelineno-85-13></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Update:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>);</span>
</span><span id=__span-85-14><a id=__codelineno-85-14 name=__codelineno-85-14 href=#__codelineno-85-14></a>
</span><span id=__span-85-15><a id=__codelineno-85-15 name=__codelineno-85-15 href=#__codelineno-85-15></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>message</span><span class=p>.</span><span class=nx>type</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;task_progress&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-85-16><a id=__codelineno-85-16 name=__codelineno-85-16 href=#__codelineno-85-16></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Task </span><span class=si>${</span><span class=nx>message</span><span class=p>.</span><span class=nx>task_id</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>message</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>progress</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mf>100</span><span class=si>}</span><span class=sb>%`</span><span class=p>);</span>
</span><span id=__span-85-17><a id=__codelineno-85-17 name=__codelineno-85-17 href=#__codelineno-85-17></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-85-18><a id=__codelineno-85-18 name=__codelineno-85-18 href=#__codelineno-85-18></a><span class=p>};</span>
</span><span id=__span-85-19><a id=__codelineno-85-19 name=__codelineno-85-19 href=#__codelineno-85-19></a>
</span><span id=__span-85-20><a id=__codelineno-85-20 name=__codelineno-85-20 href=#__codelineno-85-20></a><span class=nx>ws</span><span class=p>.</span><span class=nx>onerror</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-85-21><a id=__codelineno-85-21 name=__codelineno-85-21 href=#__codelineno-85-21></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;WebSocket error:&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>);</span>
</span><span id=__span-85-22><a id=__codelineno-85-22 name=__codelineno-85-22 href=#__codelineno-85-22></a><span class=p>};</span>
</span><span id=__span-85-23><a id=__codelineno-85-23 name=__codelineno-85-23 href=#__codelineno-85-23></a>
</span><span id=__span-85-24><a id=__codelineno-85-24 name=__codelineno-85-24 href=#__codelineno-85-24></a><span class=nx>ws</span><span class=p>.</span><span class=nx>onclose</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-85-25><a id=__codelineno-85-25 name=__codelineno-85-25 href=#__codelineno-85-25></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;WebSocket closed&#39;</span><span class=p>);</span>
</span><span id=__span-85-26><a id=__codelineno-85-26 name=__codelineno-85-26 href=#__codelineno-85-26></a><span class=p>};</span>
</span></code></pre></div></p> <p><strong>Event Types:</strong> Similar to SSE streaming in <code>tasks.execute</code> (when <code>use_streaming=true</code>): - <code>task_progress</code>: Task progress update - <code>task_status</code>: Task status change - <code>task_completed</code>: Task completion notification - <code>task_failed</code>: Task failure notification - <code>pong</code>: Response to ping (keep-alive)</p> <p><strong>Notes:</strong> - WebSocket provides bidirectional communication - Lower latency than SSE for high-frequency updates - Supports multiple subscriptions per connection - Automatic reconnection recommended for production use - Use secure WebSocket (wss://) in production environments - Suitable for real-time dashboards and interactive applications</p> <p><strong>Comparison: SSE (via tasks.execute) vs WebSocket:</strong> - <strong>SSE (tasks.execute with use_streaming=true)</strong>: Integrated with task execution, returns StreamingResponse directly, simpler for JSON-RPC clients, unidirectional (server to client) - <strong>WebSocket (/ws)</strong>: Lower latency, bidirectional communication, better for high-frequency updates, requires custom reconnection logic</p> <h2 id=examples>Examples<a class=headerlink href=#examples title="Permanent link">&para;</a></h2> <h3 id=complete-example-create-and-execute-task-tree>Complete Example: Create and Execute Task Tree<a class=headerlink href=#complete-example-create-and-execute-task-tree title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-86-1><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/tasks<span class=w> </span><span class=se>\</span>
</span><span id=__span-86-2><a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-86-3><a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-86-4><a id=__codelineno-86-4 name=__codelineno-86-4 href=#__codelineno-86-4></a><span class=s1>    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id=__span-86-5><a id=__codelineno-86-5 name=__codelineno-86-5 href=#__codelineno-86-5></a><span class=s1>    &quot;method&quot;: &quot;tasks.create&quot;,</span>
</span><span id=__span-86-6><a id=__codelineno-86-6 name=__codelineno-86-6 href=#__codelineno-86-6></a><span class=s1>    &quot;params&quot;: [</span>
</span><span id=__span-86-7><a id=__codelineno-86-7 name=__codelineno-86-7 href=#__codelineno-86-7></a><span class=s1>      {</span>
</span><span id=__span-86-8><a id=__codelineno-86-8 name=__codelineno-86-8 href=#__codelineno-86-8></a><span class=s1>        &quot;id&quot;: &quot;root&quot;,</span>
</span><span id=__span-86-9><a id=__codelineno-86-9 name=__codelineno-86-9 href=#__codelineno-86-9></a><span class=s1>        &quot;name&quot;: &quot;Root Task&quot;,</span>
</span><span id=__span-86-10><a id=__codelineno-86-10 name=__codelineno-86-10 href=#__codelineno-86-10></a><span class=s1>        &quot;user_id&quot;: &quot;user123&quot;,</span>
</span><span id=__span-86-11><a id=__codelineno-86-11 name=__codelineno-86-11 href=#__codelineno-86-11></a><span class=s1>        &quot;schemas&quot;: {&quot;method&quot;: &quot;system_info_executor&quot;},</span>
</span><span id=__span-86-12><a id=__codelineno-86-12 name=__codelineno-86-12 href=#__codelineno-86-12></a><span class=s1>        &quot;inputs&quot;: {&quot;resource&quot;: &quot;cpu&quot;}</span>
</span><span id=__span-86-13><a id=__codelineno-86-13 name=__codelineno-86-13 href=#__codelineno-86-13></a><span class=s1>      },</span>
</span><span id=__span-86-14><a id=__codelineno-86-14 name=__codelineno-86-14 href=#__codelineno-86-14></a><span class=s1>      {</span>
</span><span id=__span-86-15><a id=__codelineno-86-15 name=__codelineno-86-15 href=#__codelineno-86-15></a><span class=s1>        &quot;id&quot;: &quot;child&quot;,</span>
</span><span id=__span-86-16><a id=__codelineno-86-16 name=__codelineno-86-16 href=#__codelineno-86-16></a><span class=s1>        &quot;name&quot;: &quot;Child Task&quot;,</span>
</span><span id=__span-86-17><a id=__codelineno-86-17 name=__codelineno-86-17 href=#__codelineno-86-17></a><span class=s1>        &quot;user_id&quot;: &quot;user123&quot;,</span>
</span><span id=__span-86-18><a id=__codelineno-86-18 name=__codelineno-86-18 href=#__codelineno-86-18></a><span class=s1>        &quot;parent_id&quot;: &quot;root&quot;,</span>
</span><span id=__span-86-19><a id=__codelineno-86-19 name=__codelineno-86-19 href=#__codelineno-86-19></a><span class=s1>        &quot;schemas&quot;: {&quot;method&quot;: &quot;command_executor&quot;},</span>
</span><span id=__span-86-20><a id=__codelineno-86-20 name=__codelineno-86-20 href=#__codelineno-86-20></a><span class=s1>        &quot;inputs&quot;: {&quot;command&quot;: &quot;echo &#39;</span>Processing<span class=w> </span>system<span class=w> </span>info<span class=s1>&#39;&quot;}</span>
</span><span id=__span-86-21><a id=__codelineno-86-21 name=__codelineno-86-21 href=#__codelineno-86-21></a><span class=s1>      }</span>
</span><span id=__span-86-22><a id=__codelineno-86-22 name=__codelineno-86-22 href=#__codelineno-86-22></a><span class=s1>    ],</span>
</span><span id=__span-86-23><a id=__codelineno-86-23 name=__codelineno-86-23 href=#__codelineno-86-23></a><span class=s1>    &quot;id&quot;: &quot;1&quot;</span>
</span><span id=__span-86-24><a id=__codelineno-86-24 name=__codelineno-86-24 href=#__codelineno-86-24></a><span class=s1>  }&#39;</span>
</span></code></pre></div> <h3 id=example-with-authentication>Example with Authentication<a class=headerlink href=#example-with-authentication title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-87-1><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>http://localhost:8000/tasks<span class=w> </span><span class=se>\</span>
</span><span id=__span-87-2><a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-87-3><a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=w>  </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer YOUR_JWT_TOKEN&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-87-4><a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a><span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-87-5><a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a><span class=s1>    &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id=__span-87-6><a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=s1>    &quot;method&quot;: &quot;tasks.get&quot;,</span>
</span><span id=__span-87-7><a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a><span class=s1>    &quot;params&quot;: {</span>
</span><span id=__span-87-8><a id=__codelineno-87-8 name=__codelineno-87-8 href=#__codelineno-87-8></a><span class=s1>      &quot;task_id&quot;: &quot;task-abc-123&quot;</span>
</span><span id=__span-87-9><a id=__codelineno-87-9 name=__codelineno-87-9 href=#__codelineno-87-9></a><span class=s1>    },</span>
</span><span id=__span-87-10><a id=__codelineno-87-10 name=__codelineno-87-10 href=#__codelineno-87-10></a><span class=s1>    &quot;id&quot;: &quot;2&quot;</span>
</span><span id=__span-87-11><a id=__codelineno-87-11 name=__codelineno-87-11 href=#__codelineno-87-11></a><span class=s1>  }&#39;</span>
</span></code></pre></div> <h2 id=protocol-identification>Protocol Identification<a class=headerlink href=#protocol-identification title="Permanent link">&para;</a></h2> <p>The API supports two execution protocols, each with distinct response formats. To help clients identify which protocol a response belongs to, all responses include a <code>protocol</code> field.</p> <h3 id=json-rpc-protocol-tasks-endpoint>JSON-RPC Protocol (<code>/tasks</code> endpoint)<a class=headerlink href=#json-rpc-protocol-tasks-endpoint title="Permanent link">&para;</a></h3> <p>When using the <code>/tasks</code> endpoint with <code>tasks.execute</code>, responses include:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-88-1><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=p>{</span>
</span><span id=__span-88-2><a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a><span class=w>  </span><span class=nt>&quot;success&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
</span><span id=__span-88-3><a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=w>  </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;jsonrpc&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Protocol identifier</span>
</span><span id=__span-88-4><a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a><span class=w>  </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;...&quot;</span><span class=p>,</span>
</span><span id=__span-88-5><a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;...&quot;</span><span class=p>,</span>
</span><span id=__span-88-6><a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;started&quot;</span><span class=p>,</span>
</span><span id=__span-88-7><a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a><span class=w>  </span><span class=err>...</span>
</span><span id=__span-88-8><a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Identification:</strong> - <code>protocol: "jsonrpc"</code> field in the response - <code>success</code> field present - No <code>kind</code> field</p> <h3 id=a2a-protocol-endpoint>A2A Protocol (<code>/</code> endpoint)<a class=headerlink href=#a2a-protocol-endpoint title="Permanent link">&para;</a></h3> <p>When using the A2A Protocol endpoint (<code>/</code>), responses include:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-89-1><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=p>{</span>
</span><span id=__span-89-2><a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;...&quot;</span><span class=p>,</span>
</span><span id=__span-89-3><a id=__codelineno-89-3 name=__codelineno-89-3 href=#__codelineno-89-3></a><span class=w>  </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task&quot;</span><span class=p>,</span>
</span><span id=__span-89-4><a id=__codelineno-89-4 name=__codelineno-89-4 href=#__codelineno-89-4></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-89-5><a id=__codelineno-89-5 name=__codelineno-89-5 href=#__codelineno-89-5></a><span class=w>    </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Protocol identifier in metadata</span>
</span><span id=__span-89-6><a id=__codelineno-89-6 name=__codelineno-89-6 href=#__codelineno-89-6></a><span class=w>    </span><span class=err>...</span>
</span><span id=__span-89-7><a id=__codelineno-89-7 name=__codelineno-89-7 href=#__codelineno-89-7></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-89-8><a id=__codelineno-89-8 name=__codelineno-89-8 href=#__codelineno-89-8></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-89-9><a id=__codelineno-89-9 name=__codelineno-89-9 href=#__codelineno-89-9></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-89-10><a id=__codelineno-89-10 name=__codelineno-89-10 href=#__codelineno-89-10></a><span class=w>      </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span>
</span><span id=__span-89-11><a id=__codelineno-89-11 name=__codelineno-89-11 href=#__codelineno-89-11></a><span class=w>        </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-89-12><a id=__codelineno-89-12 name=__codelineno-89-12 href=#__codelineno-89-12></a><span class=w>          </span><span class=nt>&quot;protocol&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;a2a&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Protocol identifier in event data</span>
</span><span id=__span-89-13><a id=__codelineno-89-13 name=__codelineno-89-13 href=#__codelineno-89-13></a><span class=w>          </span><span class=err>...</span>
</span><span id=__span-89-14><a id=__codelineno-89-14 name=__codelineno-89-14 href=#__codelineno-89-14></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-89-15><a id=__codelineno-89-15 name=__codelineno-89-15 href=#__codelineno-89-15></a><span class=w>      </span><span class=p>}]</span>
</span><span id=__span-89-16><a id=__codelineno-89-16 name=__codelineno-89-16 href=#__codelineno-89-16></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-89-17><a id=__codelineno-89-17 name=__codelineno-89-17 href=#__codelineno-89-17></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-89-18><a id=__codelineno-89-18 name=__codelineno-89-18 href=#__codelineno-89-18></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Identification:</strong> - <code>protocol: "a2a"</code> in <code>metadata</code> field - <code>protocol: "a2a"</code> in status message parts data - <code>kind: "task"</code> field present - No <code>success</code> field</p> <h3 id=how-to-distinguish-protocols>How to Distinguish Protocols<a class=headerlink href=#how-to-distinguish-protocols title="Permanent link">&para;</a></h3> <p><strong>Method 1: Check <code>protocol</code> field (Recommended)</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-90-1><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=c1># JSON-RPC response</span>
</span><span id=__span-90-2><a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a><span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;protocol&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;jsonrpc&quot;</span><span class=p>:</span>
</span><span id=__span-90-3><a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a>    <span class=c1># Handle JSON-RPC response</span>
</span><span id=__span-90-4><a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a>    <span class=k>pass</span>
</span><span id=__span-90-5><a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a>
</span><span id=__span-90-6><a id=__codelineno-90-6 name=__codelineno-90-6 href=#__codelineno-90-6></a><span class=c1># A2A Protocol response</span>
</span><span id=__span-90-7><a id=__codelineno-90-7 name=__codelineno-90-7 href=#__codelineno-90-7></a><span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;metadata&quot;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;protocol&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;a2a&quot;</span><span class=p>:</span>
</span><span id=__span-90-8><a id=__codelineno-90-8 name=__codelineno-90-8 href=#__codelineno-90-8></a>    <span class=c1># Handle A2A Protocol response</span>
</span><span id=__span-90-9><a id=__codelineno-90-9 name=__codelineno-90-9 href=#__codelineno-90-9></a>    <span class=k>pass</span>
</span><span id=__span-90-10><a id=__codelineno-90-10 name=__codelineno-90-10 href=#__codelineno-90-10></a>
</span><span id=__span-90-11><a id=__codelineno-90-11 name=__codelineno-90-11 href=#__codelineno-90-11></a><span class=c1># Or check in event data</span>
</span><span id=__span-90-12><a id=__codelineno-90-12 name=__codelineno-90-12 href=#__codelineno-90-12></a><span class=k>if</span> <span class=n>event_data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;protocol&quot;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&quot;a2a&quot;</span><span class=p>:</span>
</span><span id=__span-90-13><a id=__codelineno-90-13 name=__codelineno-90-13 href=#__codelineno-90-13></a>    <span class=c1># Handle A2A Protocol event</span>
</span><span id=__span-90-14><a id=__codelineno-90-14 name=__codelineno-90-14 href=#__codelineno-90-14></a>    <span class=k>pass</span>
</span></code></pre></div></p> <p><strong>Method 2: Check existing fields (Backward compatible)</strong> <div class="language-python highlight"><pre><span></span><code><span id=__span-91-1><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=c1># JSON-RPC response</span>
</span><span id=__span-91-2><a id=__codelineno-91-2 name=__codelineno-91-2 href=#__codelineno-91-2></a><span class=k>if</span> <span class=s2>&quot;success&quot;</span> <span class=ow>in</span> <span class=n>response</span><span class=p>:</span>
</span><span id=__span-91-3><a id=__codelineno-91-3 name=__codelineno-91-3 href=#__codelineno-91-3></a>    <span class=c1># Handle JSON-RPC response</span>
</span><span id=__span-91-4><a id=__codelineno-91-4 name=__codelineno-91-4 href=#__codelineno-91-4></a>    <span class=k>pass</span>
</span><span id=__span-91-5><a id=__codelineno-91-5 name=__codelineno-91-5 href=#__codelineno-91-5></a>
</span><span id=__span-91-6><a id=__codelineno-91-6 name=__codelineno-91-6 href=#__codelineno-91-6></a><span class=c1># A2A Protocol response</span>
</span><span id=__span-91-7><a id=__codelineno-91-7 name=__codelineno-91-7 href=#__codelineno-91-7></a><span class=k>if</span> <span class=s2>&quot;kind&quot;</span> <span class=ow>in</span> <span class=n>response</span> <span class=ow>and</span> <span class=n>response</span><span class=p>[</span><span class=s2>&quot;kind&quot;</span><span class=p>]</span> <span class=o>==</span> <span class=s2>&quot;task&quot;</span><span class=p>:</span>
</span><span id=__span-91-8><a id=__codelineno-91-8 name=__codelineno-91-8 href=#__codelineno-91-8></a>    <span class=c1># Handle A2A Protocol response</span>
</span><span id=__span-91-9><a id=__codelineno-91-9 name=__codelineno-91-9 href=#__codelineno-91-9></a>    <span class=k>pass</span>
</span></code></pre></div></p> <h2 id=customa2astarletteapplication-custom-routes>CustomA2AStarletteApplication Custom Routes<a class=headerlink href=#customa2astarletteapplication-custom-routes title="Permanent link">&para;</a></h2> <p>The <code>CustomA2AStarletteApplication</code> extends the standard A2A Starlette Application with additional custom routes for task management and system operations.</p> <h3 id=custom-routes-overview>Custom Routes Overview<a class=headerlink href=#custom-routes-overview title="Permanent link">&para;</a></h3> <p>The custom application adds the following routes:</p> <ol> <li><strong><code>POST /tasks</code></strong> - Task management endpoint (see <a href=#task-management-endpoints>Task Management Endpoints</a>)</li> <li><strong><code>POST /system</code></strong> - System operations endpoint (see <a href=#system-endpoints>System Endpoints</a>)</li> </ol> <p>These routes are enabled by default when using <code>CustomA2AStarletteApplication</code>. To disable them, set <code>enable_system_routes=False</code> when creating the application.</p> <h3 id=route-handler-architecture>Route Handler Architecture<a class=headerlink href=#route-handler-architecture title="Permanent link">&para;</a></h3> <p>The route handlers are implemented in the <code>api/routes/</code> directory as protocol-agnostic modules that can be reused across different protocol implementations (A2A, REST, GraphQL, etc.):</p> <ul> <li><strong><code>api/routes/base.py</code></strong>: Provides <code>BaseRouteHandler</code> class with shared functionality for permission checking, user information extraction, and common utilities</li> <li><strong><code>api/routes/tasks.py</code></strong>: Contains <code>TaskRoutes</code> class with handlers for task CRUD operations, execution, and monitoring</li> <li><strong><code>api/routes/system.py</code></strong>: Contains <code>SystemRoutes</code> class with handlers for system operations like health checks, LLM key configuration, and examples management</li> </ul> <p>This architecture allows the same route handlers to be used by different protocol implementations, promoting code reuse and maintainability.</p> <h3 id=initialization>Initialization<a class=headerlink href=#initialization title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-92-1><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=kn>from</span><span class=w> </span><span class=nn>apflow.api.a2a.server</span><span class=w> </span><span class=kn>import</span> <span class=n>create_a2a_server</span>
</span><span id=__span-92-2><a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a>
</span><span id=__span-92-3><a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a><span class=c1># Create A2A server with custom routes enabled (default)</span>
</span><span id=__span-92-4><a id=__codelineno-92-4 name=__codelineno-92-4 href=#__codelineno-92-4></a><span class=n>app</span> <span class=o>=</span> <span class=n>create_a2a_server</span><span class=p>(</span>
</span><span id=__span-92-5><a id=__codelineno-92-5 name=__codelineno-92-5 href=#__codelineno-92-5></a>    <span class=n>verify_token_secret_key</span><span class=o>=</span><span class=s2>&quot;your-secret-key&quot;</span><span class=p>,</span>  <span class=c1># Optional: JWT authentication</span>
</span><span id=__span-92-6><a id=__codelineno-92-6 name=__codelineno-92-6 href=#__codelineno-92-6></a>    <span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>,</span>
</span><span id=__span-92-7><a id=__codelineno-92-7 name=__codelineno-92-7 href=#__codelineno-92-7></a>    <span class=n>enable_system_routes</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># Enable custom routes (default: True)</span>
</span><span id=__span-92-8><a id=__codelineno-92-8 name=__codelineno-92-8 href=#__codelineno-92-8></a>    <span class=n>auto_initialize_extensions</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>  <span class=c1># Optional: auto-initialize extensions (default: False)</span>
</span><span id=__span-92-9><a id=__codelineno-92-9 name=__codelineno-92-9 href=#__codelineno-92-9></a>    <span class=n>task_routes_class</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>  <span class=c1># Optional: custom TaskRoutes class</span>
</span><span id=__span-92-10><a id=__codelineno-92-10 name=__codelineno-92-10 href=#__codelineno-92-10></a><span class=p>)</span>
</span></code></pre></div> <p><strong>New Parameters:</strong> - <code>auto_initialize_extensions</code>: If <code>True</code>, automatically calls <code>initialize_extensions()</code> before creating the server. Matches behavior of <code>create_app_by_protocol()</code>. Default: <code>False</code> (backward compatible). - <code>task_routes_class</code>: Optional custom <code>TaskRoutes</code> class to use instead of default. Allows extending TaskRoutes functionality without monkey patching. Default: <code>None</code> (uses default <code>TaskRoutes</code>).</p> <h3 id=jwt-authentication_1>JWT Authentication<a class=headerlink href=#jwt-authentication_1 title="Permanent link">&para;</a></h3> <p>The custom application supports optional JWT authentication via middleware:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-93-1><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=kn>from</span><span class=w> </span><span class=nn>apflow.api.a2a.server</span><span class=w> </span><span class=kn>import</span> <span class=n>create_a2a_server</span><span class=p>,</span> <span class=n>generate_token</span><span class=p>,</span> <span class=n>verify_token</span>
</span><span id=__span-93-2><a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a>
</span><span id=__span-93-3><a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a><span class=c1># Generate JWT token</span>
</span><span id=__span-93-4><a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a><span class=n>payload</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span> <span class=s2>&quot;roles&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;admin&quot;</span><span class=p>]}</span>
</span><span id=__span-93-5><a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a><span class=n>secret_key</span> <span class=o>=</span> <span class=s2>&quot;your-secret-key&quot;</span>
</span><span id=__span-93-6><a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a><span class=n>token</span> <span class=o>=</span> <span class=n>generate_token</span><span class=p>(</span><span class=n>payload</span><span class=p>,</span> <span class=n>secret_key</span><span class=p>,</span> <span class=n>expires_in_days</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>
</span><span id=__span-93-7><a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a>
</span><span id=__span-93-8><a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a><span class=c1># Verify JWT token (built-in function)</span>
</span><span id=__span-93-9><a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a><span class=k>def</span><span class=w> </span><span class=nf>verify_token_func</span><span class=p>(</span><span class=n>token</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>]:</span>
</span><span id=__span-93-10><a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;JWT token verification using built-in function&quot;&quot;&quot;</span>
</span><span id=__span-93-11><a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a>    <span class=k>return</span> <span class=n>verify_token</span><span class=p>(</span><span class=n>token</span><span class=p>,</span> <span class=n>secret_key</span><span class=p>)</span>
</span><span id=__span-93-12><a id=__codelineno-93-12 name=__codelineno-93-12 href=#__codelineno-93-12></a>
</span><span id=__span-93-13><a id=__codelineno-93-13 name=__codelineno-93-13 href=#__codelineno-93-13></a><span class=c1># Or use custom verification</span>
</span><span id=__span-93-14><a id=__codelineno-93-14 name=__codelineno-93-14 href=#__codelineno-93-14></a><span class=k>def</span><span class=w> </span><span class=nf>custom_verify_token</span><span class=p>(</span><span class=n>token</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>dict</span><span class=p>]:</span>
</span><span id=__span-93-15><a id=__codelineno-93-15 name=__codelineno-93-15 href=#__codelineno-93-15></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Custom JWT token verification function&quot;&quot;&quot;</span>
</span><span id=__span-93-16><a id=__codelineno-93-16 name=__codelineno-93-16 href=#__codelineno-93-16></a>    <span class=c1># Your token verification logic</span>
</span><span id=__span-93-17><a id=__codelineno-93-17 name=__codelineno-93-17 href=#__codelineno-93-17></a>    <span class=k>return</span> <span class=n>payload</span> <span class=k>if</span> <span class=n>valid</span> <span class=k>else</span> <span class=kc>None</span>
</span><span id=__span-93-18><a id=__codelineno-93-18 name=__codelineno-93-18 href=#__codelineno-93-18></a>
</span><span id=__span-93-19><a id=__codelineno-93-19 name=__codelineno-93-19 href=#__codelineno-93-19></a><span class=n>app</span> <span class=o>=</span> <span class=n>create_a2a_server</span><span class=p>(</span>
</span><span id=__span-93-20><a id=__codelineno-93-20 name=__codelineno-93-20 href=#__codelineno-93-20></a>    <span class=n>verify_token_func</span><span class=o>=</span><span class=n>verify_token_func</span><span class=p>,</span>  <span class=c1># or custom_verify_token</span>
</span><span id=__span-93-21><a id=__codelineno-93-21 name=__codelineno-93-21 href=#__codelineno-93-21></a>    <span class=n>verify_token_secret_key</span><span class=o>=</span><span class=n>secret_key</span><span class=p>,</span>  <span class=c1># Optional: for built-in verification</span>
</span><span id=__span-93-22><a id=__codelineno-93-22 name=__codelineno-93-22 href=#__codelineno-93-22></a>    <span class=n>enable_system_routes</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-93-23><a id=__codelineno-93-23 name=__codelineno-93-23 href=#__codelineno-93-23></a><span class=p>)</span>
</span></code></pre></div> <p><strong>Token Sources:</strong> - JWT tokens can be provided via <code>Authorization: Bearer &lt;token&gt;</code> header (priority) - Or via <code>Authorization</code> cookie (fallback) - Both methods are supported for flexible authentication scenarios</p> <h2 id=a2a-protocol-features>A2A Protocol Features<a class=headerlink href=#a2a-protocol-features title="Permanent link">&para;</a></h2> <h3 id=push-notification-configuration-callback-mode>Push Notification Configuration (Callback Mode)<a class=headerlink href=#push-notification-configuration-callback-mode title="Permanent link">&para;</a></h3> <p>The A2A protocol supports push notifications via <code>configuration.push_notification_config</code>. This allows the server to send task execution updates to a callback URL instead of waiting for polling.</p> <h4 id=how-it-works>How It Works<a class=headerlink href=#how-it-works title="Permanent link">&para;</a></h4> <p>When <code>configuration.push_notification_config</code> is provided in the A2A request, the server will:</p> <ol> <li>Execute tasks in <strong>callback mode</strong> (asynchronous)</li> <li>Send task status updates to the configured callback URL</li> <li>Return immediately with an initial response</li> </ol> <h4 id=configuration-format>Configuration Format<a class=headerlink href=#configuration-format title="Permanent link">&para;</a></h4> <p>The <code>push_notification_config</code> should be included in the request's <code>configuration</code> field:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-94-1><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=p>{</span>
</span><span id=__span-94-2><a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-94-3><a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute_task_tree&quot;</span><span class=p>,</span>
</span><span id=__span-94-4><a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-94-5><a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=err>...</span><span class=p>]</span>
</span><span id=__span-94-6><a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-94-7><a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a><span class=w>  </span><span class=nt>&quot;configuration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-94-8><a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a><span class=w>    </span><span class=nt>&quot;push_notification_config&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-94-9><a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a><span class=w>      </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://your-server.com/callback&quot;</span><span class=p>,</span>
</span><span id=__span-94-10><a id=__codelineno-94-10 name=__codelineno-94-10 href=#__codelineno-94-10></a><span class=w>      </span><span class=nt>&quot;headers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-94-11><a id=__codelineno-94-11 name=__codelineno-94-11 href=#__codelineno-94-11></a><span class=w>        </span><span class=nt>&quot;Authorization&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Bearer your-token&quot;</span>
</span><span id=__span-94-12><a id=__codelineno-94-12 name=__codelineno-94-12 href=#__codelineno-94-12></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-94-13><a id=__codelineno-94-13 name=__codelineno-94-13 href=#__codelineno-94-13></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-94-14><a id=__codelineno-94-14 name=__codelineno-94-14 href=#__codelineno-94-14></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-94-15><a id=__codelineno-94-15 name=__codelineno-94-15 href=#__codelineno-94-15></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span>
</span><span id=__span-94-16><a id=__codelineno-94-16 name=__codelineno-94-16 href=#__codelineno-94-16></a><span class=p>}</span>
</span></code></pre></div> <h4 id=push-notification-config-fields>Push Notification Config Fields<a class=headerlink href=#push-notification-config-fields title="Permanent link">&para;</a></h4> <ul> <li><code>url</code> (string, required): Callback URL where status updates will be sent</li> <li><code>headers</code> (object, optional): HTTP headers to include in callback requests</li> <li><code>method</code> (string, optional): HTTP method for callback (default: "POST")</li> </ul> <h4 id=callback-payload-format>Callback Payload Format<a class=headerlink href=#callback-payload-format title="Permanent link">&para;</a></h4> <p>The server will send POST requests to your callback URL with the following payload:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-95-1><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=p>{</span>
</span><span id=__span-95-2><a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-95-3><a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a><span class=w>  </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;context-xyz-456&quot;</span><span class=p>,</span>
</span><span id=__span-95-4><a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-95-5><a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a><span class=w>    </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-95-6><a id=__codelineno-95-6 name=__codelineno-95-6 href=#__codelineno-95-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-95-7><a id=__codelineno-95-7 name=__codelineno-95-7 href=#__codelineno-95-7></a><span class=w>      </span><span class=nt>&quot;role&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;agent&quot;</span><span class=p>,</span>
</span><span id=__span-95-8><a id=__codelineno-95-8 name=__codelineno-95-8 href=#__codelineno-95-8></a><span class=w>      </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-95-9><a id=__codelineno-95-9 name=__codelineno-95-9 href=#__codelineno-95-9></a><span class=w>        </span><span class=p>{</span>
</span><span id=__span-95-10><a id=__codelineno-95-10 name=__codelineno-95-10 href=#__codelineno-95-10></a><span class=w>          </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
</span><span id=__span-95-11><a id=__codelineno-95-11 name=__codelineno-95-11 href=#__codelineno-95-11></a><span class=w>          </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-95-12><a id=__codelineno-95-12 name=__codelineno-95-12 href=#__codelineno-95-12></a><span class=w>            </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-95-13><a id=__codelineno-95-13 name=__codelineno-95-13 href=#__codelineno-95-13></a><span class=w>            </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-95-14><a id=__codelineno-95-14 name=__codelineno-95-14 href=#__codelineno-95-14></a><span class=w>            </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-abc-123&quot;</span><span class=p>,</span>
</span><span id=__span-95-15><a id=__codelineno-95-15 name=__codelineno-95-15 href=#__codelineno-95-15></a><span class=w>            </span><span class=nt>&quot;task_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
</span><span id=__span-95-16><a id=__codelineno-95-16 name=__codelineno-95-16 href=#__codelineno-95-16></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-95-17><a id=__codelineno-95-17 name=__codelineno-95-17 href=#__codelineno-95-17></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-95-18><a id=__codelineno-95-18 name=__codelineno-95-18 href=#__codelineno-95-18></a><span class=w>      </span><span class=p>]</span>
</span><span id=__span-95-19><a id=__codelineno-95-19 name=__codelineno-95-19 href=#__codelineno-95-19></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-95-20><a id=__codelineno-95-20 name=__codelineno-95-20 href=#__codelineno-95-20></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-95-21><a id=__codelineno-95-21 name=__codelineno-95-21 href=#__codelineno-95-21></a><span class=w>  </span><span class=nt>&quot;final&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-95-22><a id=__codelineno-95-22 name=__codelineno-95-22 href=#__codelineno-95-22></a><span class=p>}</span>
</span></code></pre></div> <h4 id=example-using-push-notifications>Example: Using Push Notifications<a class=headerlink href=#example-using-push-notifications title="Permanent link">&para;</a></h4> <p><strong>Request:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-96-1><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a><span class=p>{</span>
</span><span id=__span-96-2><a id=__codelineno-96-2 name=__codelineno-96-2 href=#__codelineno-96-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-96-3><a id=__codelineno-96-3 name=__codelineno-96-3 href=#__codelineno-96-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute_task_tree&quot;</span><span class=p>,</span>
</span><span id=__span-96-4><a id=__codelineno-96-4 name=__codelineno-96-4 href=#__codelineno-96-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-96-5><a id=__codelineno-96-5 name=__codelineno-96-5 href=#__codelineno-96-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-96-6><a id=__codelineno-96-6 name=__codelineno-96-6 href=#__codelineno-96-6></a><span class=w>      </span><span class=p>{</span>
</span><span id=__span-96-7><a id=__codelineno-96-7 name=__codelineno-96-7 href=#__codelineno-96-7></a><span class=w>        </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-96-8><a id=__codelineno-96-8 name=__codelineno-96-8 href=#__codelineno-96-8></a><span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-96-9><a id=__codelineno-96-9 name=__codelineno-96-9 href=#__codelineno-96-9></a><span class=w>        </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-96-10><a id=__codelineno-96-10 name=__codelineno-96-10 href=#__codelineno-96-10></a><span class=w>        </span><span class=nt>&quot;schemas&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-96-11><a id=__codelineno-96-11 name=__codelineno-96-11 href=#__codelineno-96-11></a><span class=w>          </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-96-12><a id=__codelineno-96-12 name=__codelineno-96-12 href=#__codelineno-96-12></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-96-13><a id=__codelineno-96-13 name=__codelineno-96-13 href=#__codelineno-96-13></a><span class=w>        </span><span class=nt>&quot;inputs&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{}</span>
</span><span id=__span-96-14><a id=__codelineno-96-14 name=__codelineno-96-14 href=#__codelineno-96-14></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-96-15><a id=__codelineno-96-15 name=__codelineno-96-15 href=#__codelineno-96-15></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-96-16><a id=__codelineno-96-16 name=__codelineno-96-16 href=#__codelineno-96-16></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-96-17><a id=__codelineno-96-17 name=__codelineno-96-17 href=#__codelineno-96-17></a><span class=w>  </span><span class=nt>&quot;configuration&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-96-18><a id=__codelineno-96-18 name=__codelineno-96-18 href=#__codelineno-96-18></a><span class=w>    </span><span class=nt>&quot;push_notification_config&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-96-19><a id=__codelineno-96-19 name=__codelineno-96-19 href=#__codelineno-96-19></a><span class=w>      </span><span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://my-app.com/api/task-callback&quot;</span><span class=p>,</span>
</span><span id=__span-96-20><a id=__codelineno-96-20 name=__codelineno-96-20 href=#__codelineno-96-20></a><span class=w>      </span><span class=nt>&quot;headers&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-96-21><a id=__codelineno-96-21 name=__codelineno-96-21 href=#__codelineno-96-21></a><span class=w>        </span><span class=nt>&quot;Authorization&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Bearer my-api-token&quot;</span><span class=p>,</span>
</span><span id=__span-96-22><a id=__codelineno-96-22 name=__codelineno-96-22 href=#__codelineno-96-22></a><span class=w>        </span><span class=nt>&quot;Content-Type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;application/json&quot;</span>
</span><span id=__span-96-23><a id=__codelineno-96-23 name=__codelineno-96-23 href=#__codelineno-96-23></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-96-24><a id=__codelineno-96-24 name=__codelineno-96-24 href=#__codelineno-96-24></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-96-25><a id=__codelineno-96-25 name=__codelineno-96-25 href=#__codelineno-96-25></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-96-26><a id=__codelineno-96-26 name=__codelineno-96-26 href=#__codelineno-96-26></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span>
</span><span id=__span-96-27><a id=__codelineno-96-27 name=__codelineno-96-27 href=#__codelineno-96-27></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Immediate Response:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-97-1><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=p>{</span>
</span><span id=__span-97-2><a id=__codelineno-97-2 name=__codelineno-97-2 href=#__codelineno-97-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-97-3><a id=__codelineno-97-3 name=__codelineno-97-3 href=#__codelineno-97-3></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span><span class=p>,</span>
</span><span id=__span-97-4><a id=__codelineno-97-4 name=__codelineno-97-4 href=#__codelineno-97-4></a><span class=w>  </span><span class=nt>&quot;result&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-97-5><a id=__codelineno-97-5 name=__codelineno-97-5 href=#__codelineno-97-5></a><span class=w>    </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;in_progress&quot;</span><span class=p>,</span>
</span><span id=__span-97-6><a id=__codelineno-97-6 name=__codelineno-97-6 href=#__codelineno-97-6></a><span class=w>    </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-97-7><a id=__codelineno-97-7 name=__codelineno-97-7 href=#__codelineno-97-7></a><span class=w>    </span><span class=nt>&quot;task_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
</span><span id=__span-97-8><a id=__codelineno-97-8 name=__codelineno-97-8 href=#__codelineno-97-8></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-97-9><a id=__codelineno-97-9 name=__codelineno-97-9 href=#__codelineno-97-9></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Callback Request (sent to your URL):</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-98-1><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=p>{</span>
</span><span id=__span-98-2><a id=__codelineno-98-2 name=__codelineno-98-2 href=#__codelineno-98-2></a><span class=w>  </span><span class=nt>&quot;task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-98-3><a id=__codelineno-98-3 name=__codelineno-98-3 href=#__codelineno-98-3></a><span class=w>  </span><span class=nt>&quot;context_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;context-123&quot;</span><span class=p>,</span>
</span><span id=__span-98-4><a id=__codelineno-98-4 name=__codelineno-98-4 href=#__codelineno-98-4></a><span class=w>  </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-98-5><a id=__codelineno-98-5 name=__codelineno-98-5 href=#__codelineno-98-5></a><span class=w>    </span><span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-98-6><a id=__codelineno-98-6 name=__codelineno-98-6 href=#__codelineno-98-6></a><span class=w>    </span><span class=nt>&quot;message&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-98-7><a id=__codelineno-98-7 name=__codelineno-98-7 href=#__codelineno-98-7></a><span class=w>      </span><span class=nt>&quot;role&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;agent&quot;</span><span class=p>,</span>
</span><span id=__span-98-8><a id=__codelineno-98-8 name=__codelineno-98-8 href=#__codelineno-98-8></a><span class=w>      </span><span class=nt>&quot;parts&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-98-9><a id=__codelineno-98-9 name=__codelineno-98-9 href=#__codelineno-98-9></a><span class=w>        </span><span class=p>{</span>
</span><span id=__span-98-10><a id=__codelineno-98-10 name=__codelineno-98-10 href=#__codelineno-98-10></a><span class=w>          </span><span class=nt>&quot;kind&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;data&quot;</span><span class=p>,</span>
</span><span id=__span-98-11><a id=__codelineno-98-11 name=__codelineno-98-11 href=#__codelineno-98-11></a><span class=w>          </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-98-12><a id=__codelineno-98-12 name=__codelineno-98-12 href=#__codelineno-98-12></a><span class=w>            </span><span class=nt>&quot;status&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;completed&quot;</span><span class=p>,</span>
</span><span id=__span-98-13><a id=__codelineno-98-13 name=__codelineno-98-13 href=#__codelineno-98-13></a><span class=w>            </span><span class=nt>&quot;progress&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1.0</span><span class=p>,</span>
</span><span id=__span-98-14><a id=__codelineno-98-14 name=__codelineno-98-14 href=#__codelineno-98-14></a><span class=w>            </span><span class=nt>&quot;root_task_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;task-1&quot;</span>
</span><span id=__span-98-15><a id=__codelineno-98-15 name=__codelineno-98-15 href=#__codelineno-98-15></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-98-16><a id=__codelineno-98-16 name=__codelineno-98-16 href=#__codelineno-98-16></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-98-17><a id=__codelineno-98-17 name=__codelineno-98-17 href=#__codelineno-98-17></a><span class=w>      </span><span class=p>]</span>
</span><span id=__span-98-18><a id=__codelineno-98-18 name=__codelineno-98-18 href=#__codelineno-98-18></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-98-19><a id=__codelineno-98-19 name=__codelineno-98-19 href=#__codelineno-98-19></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-98-20><a id=__codelineno-98-20 name=__codelineno-98-20 href=#__codelineno-98-20></a><span class=w>  </span><span class=nt>&quot;final&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-98-21><a id=__codelineno-98-21 name=__codelineno-98-21 href=#__codelineno-98-21></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=streaming-mode>Streaming Mode<a class=headerlink href=#streaming-mode title="Permanent link">&para;</a></h3> <p>The A2A protocol also supports streaming mode via <code>metadata.stream</code>. When enabled, the server will send multiple status update events through the EventQueue (SSE/WebSocket).</p> <p><strong>Note:</strong> For JSON-RPC <code>tasks.execute</code> endpoint, use <code>use_streaming=true</code> parameter instead of <code>metadata.stream</code>. The endpoint will return a StreamingResponse with Server-Sent Events directly.</p> <p><strong>Request with Streaming:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-99-1><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a><span class=p>{</span>
</span><span id=__span-99-2><a id=__codelineno-99-2 name=__codelineno-99-2 href=#__codelineno-99-2></a><span class=w>  </span><span class=nt>&quot;jsonrpc&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0&quot;</span><span class=p>,</span>
</span><span id=__span-99-3><a id=__codelineno-99-3 name=__codelineno-99-3 href=#__codelineno-99-3></a><span class=w>  </span><span class=nt>&quot;method&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;execute_task_tree&quot;</span><span class=p>,</span>
</span><span id=__span-99-4><a id=__codelineno-99-4 name=__codelineno-99-4 href=#__codelineno-99-4></a><span class=w>  </span><span class=nt>&quot;params&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-99-5><a id=__codelineno-99-5 name=__codelineno-99-5 href=#__codelineno-99-5></a><span class=w>    </span><span class=nt>&quot;tasks&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=err>...</span><span class=p>]</span>
</span><span id=__span-99-6><a id=__codelineno-99-6 name=__codelineno-99-6 href=#__codelineno-99-6></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-99-7><a id=__codelineno-99-7 name=__codelineno-99-7 href=#__codelineno-99-7></a><span class=w>  </span><span class=nt>&quot;metadata&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-99-8><a id=__codelineno-99-8 name=__codelineno-99-8 href=#__codelineno-99-8></a><span class=w>    </span><span class=nt>&quot;stream&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span>
</span><span id=__span-99-9><a id=__codelineno-99-9 name=__codelineno-99-9 href=#__codelineno-99-9></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-99-10><a id=__codelineno-99-10 name=__codelineno-99-10 href=#__codelineno-99-10></a><span class=w>  </span><span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;request-123&quot;</span>
</span><span id=__span-99-11><a id=__codelineno-99-11 name=__codelineno-99-11 href=#__codelineno-99-11></a><span class=p>}</span>
</span></code></pre></div></p> <ul> <li><strong>Preserve Execution History</strong>: When you want to re-execute a task without losing the original task's results and status</li> <li><strong>A/B Testing</strong>: Compare different execution strategies on the same task definition</li> <li><strong>Retry Failed Tasks</strong>: Create a fresh copy of a failed task for retry without modifying the original</li> <li><strong>Task Templates</strong>: Use completed tasks as templates for new executions</li> </ul> <h2 id=a2a-client-sdk-usage>A2A Client SDK Usage<a class=headerlink href=#a2a-client-sdk-usage title="Permanent link">&para;</a></h2> <p>The A2A protocol provides an official client SDK for easy integration. This section demonstrates how to use the A2A client SDK to interact with apflow.</p> <h3 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h3> <div class="language-bash highlight"><pre><span></span><code><span id=__span-100-1><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a>pip<span class=w> </span>install<span class=w> </span>a2a
</span></code></pre></div> <h3 id=basic-usage>Basic Usage<a class=headerlink href=#basic-usage title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-101-1><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.client</span><span class=w> </span><span class=kn>import</span> <span class=n>ClientFactory</span><span class=p>,</span> <span class=n>ClientConfig</span>
</span><span id=__span-101-2><a id=__codelineno-101-2 name=__codelineno-101-2 href=#__codelineno-101-2></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.types</span><span class=w> </span><span class=kn>import</span> <span class=n>Message</span><span class=p>,</span> <span class=n>DataPart</span><span class=p>,</span> <span class=n>Role</span>
</span><span id=__span-101-3><a id=__codelineno-101-3 name=__codelineno-101-3 href=#__codelineno-101-3></a><span class=kn>import</span><span class=w> </span><span class=nn>httpx</span>
</span><span id=__span-101-4><a id=__codelineno-101-4 name=__codelineno-101-4 href=#__codelineno-101-4></a><span class=kn>import</span><span class=w> </span><span class=nn>uuid</span>
</span><span id=__span-101-5><a id=__codelineno-101-5 name=__codelineno-101-5 href=#__codelineno-101-5></a>
</span><span id=__span-101-6><a id=__codelineno-101-6 name=__codelineno-101-6 href=#__codelineno-101-6></a><span class=c1># Create HTTP client</span>
</span><span id=__span-101-7><a id=__codelineno-101-7 name=__codelineno-101-7 href=#__codelineno-101-7></a><span class=n>httpx_client</span> <span class=o>=</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>)</span>
</span><span id=__span-101-8><a id=__codelineno-101-8 name=__codelineno-101-8 href=#__codelineno-101-8></a>
</span><span id=__span-101-9><a id=__codelineno-101-9 name=__codelineno-101-9 href=#__codelineno-101-9></a><span class=c1># Create A2A client config</span>
</span><span id=__span-101-10><a id=__codelineno-101-10 name=__codelineno-101-10 href=#__codelineno-101-10></a><span class=n>config</span> <span class=o>=</span> <span class=n>ClientConfig</span><span class=p>(</span>
</span><span id=__span-101-11><a id=__codelineno-101-11 name=__codelineno-101-11 href=#__codelineno-101-11></a>    <span class=n>streaming</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>  <span class=c1># Enable streaming mode</span>
</span><span id=__span-101-12><a id=__codelineno-101-12 name=__codelineno-101-12 href=#__codelineno-101-12></a>    <span class=n>polling</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-101-13><a id=__codelineno-101-13 name=__codelineno-101-13 href=#__codelineno-101-13></a>    <span class=n>httpx_client</span><span class=o>=</span><span class=n>httpx_client</span>
</span><span id=__span-101-14><a id=__codelineno-101-14 name=__codelineno-101-14 href=#__codelineno-101-14></a><span class=p>)</span>
</span><span id=__span-101-15><a id=__codelineno-101-15 name=__codelineno-101-15 href=#__codelineno-101-15></a>
</span><span id=__span-101-16><a id=__codelineno-101-16 name=__codelineno-101-16 href=#__codelineno-101-16></a><span class=c1># Create client factory</span>
</span><span id=__span-101-17><a id=__codelineno-101-17 name=__codelineno-101-17 href=#__codelineno-101-17></a><span class=n>factory</span> <span class=o>=</span> <span class=n>ClientFactory</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-101-18><a id=__codelineno-101-18 name=__codelineno-101-18 href=#__codelineno-101-18></a>
</span><span id=__span-101-19><a id=__codelineno-101-19 name=__codelineno-101-19 href=#__codelineno-101-19></a><span class=c1># Fetch agent card</span>
</span><span id=__span-101-20><a id=__codelineno-101-20 name=__codelineno-101-20 href=#__codelineno-101-20></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.utils.constants</span><span class=w> </span><span class=kn>import</span> <span class=n>AGENT_CARD_WELL_KNOWN_PATH</span>
</span><span id=__span-101-21><a id=__codelineno-101-21 name=__codelineno-101-21 href=#__codelineno-101-21></a><span class=n>card_response</span> <span class=o>=</span> <span class=k>await</span> <span class=n>httpx_client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>AGENT_CARD_WELL_KNOWN_PATH</span><span class=p>)</span>
</span><span id=__span-101-22><a id=__codelineno-101-22 name=__codelineno-101-22 href=#__codelineno-101-22></a><span class=n>agent_card</span> <span class=o>=</span> <span class=n>AgentCard</span><span class=p>(</span><span class=o>**</span><span class=n>card_response</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span><span id=__span-101-23><a id=__codelineno-101-23 name=__codelineno-101-23 href=#__codelineno-101-23></a>
</span><span id=__span-101-24><a id=__codelineno-101-24 name=__codelineno-101-24 href=#__codelineno-101-24></a><span class=c1># Create A2A client</span>
</span><span id=__span-101-25><a id=__codelineno-101-25 name=__codelineno-101-25 href=#__codelineno-101-25></a><span class=n>client</span> <span class=o>=</span> <span class=n>factory</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>card</span><span class=o>=</span><span class=n>agent_card</span><span class=p>)</span>
</span></code></pre></div> <h3 id=executing-tasks>Executing Tasks<a class=headerlink href=#executing-tasks title="Permanent link">&para;</a></h3> <h4 id=simple-mode-synchronous>Simple Mode (Synchronous)<a class=headerlink href=#simple-mode-synchronous title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-102-1><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=c1># Prepare task data</span>
</span><span id=__span-102-2><a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a><span class=n>task_data</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-102-3><a id=__codelineno-102-3 name=__codelineno-102-3 href=#__codelineno-102-3></a>    <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;task-1&quot;</span><span class=p>,</span>
</span><span id=__span-102-4><a id=__codelineno-102-4 name=__codelineno-102-4 href=#__codelineno-102-4></a>    <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;My Task&quot;</span><span class=p>,</span>
</span><span id=__span-102-5><a id=__codelineno-102-5 name=__codelineno-102-5 href=#__codelineno-102-5></a>    <span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-102-6><a id=__codelineno-102-6 name=__codelineno-102-6 href=#__codelineno-102-6></a>    <span class=s2>&quot;schemas&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-102-7><a id=__codelineno-102-7 name=__codelineno-102-7 href=#__codelineno-102-7></a>        <span class=s2>&quot;method&quot;</span><span class=p>:</span> <span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-102-8><a id=__codelineno-102-8 name=__codelineno-102-8 href=#__codelineno-102-8></a>    <span class=p>},</span>
</span><span id=__span-102-9><a id=__codelineno-102-9 name=__codelineno-102-9 href=#__codelineno-102-9></a>    <span class=s2>&quot;inputs&quot;</span><span class=p>:</span> <span class=p>{}</span>
</span><span id=__span-102-10><a id=__codelineno-102-10 name=__codelineno-102-10 href=#__codelineno-102-10></a><span class=p>}</span>
</span><span id=__span-102-11><a id=__codelineno-102-11 name=__codelineno-102-11 href=#__codelineno-102-11></a>
</span><span id=__span-102-12><a id=__codelineno-102-12 name=__codelineno-102-12 href=#__codelineno-102-12></a><span class=c1># Create A2A message</span>
</span><span id=__span-102-13><a id=__codelineno-102-13 name=__codelineno-102-13 href=#__codelineno-102-13></a><span class=n>data_part</span> <span class=o>=</span> <span class=n>DataPart</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;tasks&quot;</span><span class=p>:</span> <span class=p>[</span><span class=n>task_data</span><span class=p>]})</span>
</span><span id=__span-102-14><a id=__codelineno-102-14 name=__codelineno-102-14 href=#__codelineno-102-14></a><span class=n>message</span> <span class=o>=</span> <span class=n>Message</span><span class=p>(</span>
</span><span id=__span-102-15><a id=__codelineno-102-15 name=__codelineno-102-15 href=#__codelineno-102-15></a>    <span class=n>message_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span><span id=__span-102-16><a id=__codelineno-102-16 name=__codelineno-102-16 href=#__codelineno-102-16></a>    <span class=n>role</span><span class=o>=</span><span class=n>Role</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span><span id=__span-102-17><a id=__codelineno-102-17 name=__codelineno-102-17 href=#__codelineno-102-17></a>    <span class=n>parts</span><span class=o>=</span><span class=p>[</span><span class=n>data_part</span><span class=p>]</span>
</span><span id=__span-102-18><a id=__codelineno-102-18 name=__codelineno-102-18 href=#__codelineno-102-18></a><span class=p>)</span>
</span><span id=__span-102-19><a id=__codelineno-102-19 name=__codelineno-102-19 href=#__codelineno-102-19></a>
</span><span id=__span-102-20><a id=__codelineno-102-20 name=__codelineno-102-20 href=#__codelineno-102-20></a><span class=c1># Send message and get response</span>
</span><span id=__span-102-21><a id=__codelineno-102-21 name=__codelineno-102-21 href=#__codelineno-102-21></a><span class=n>responses</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-102-22><a id=__codelineno-102-22 name=__codelineno-102-22 href=#__codelineno-102-22></a><span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-102-23><a id=__codelineno-102-23 name=__codelineno-102-23 href=#__codelineno-102-23></a>    <span class=n>responses</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
</span><span id=__span-102-24><a id=__codelineno-102-24 name=__codelineno-102-24 href=#__codelineno-102-24></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=n>Message</span><span class=p>):</span>
</span><span id=__span-102-25><a id=__codelineno-102-25 name=__codelineno-102-25 href=#__codelineno-102-25></a>        <span class=c1># Extract result from response</span>
</span><span id=__span-102-26><a id=__codelineno-102-26 name=__codelineno-102-26 href=#__codelineno-102-26></a>        <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>response</span><span class=o>.</span><span class=n>parts</span><span class=p>:</span>
</span><span id=__span-102-27><a id=__codelineno-102-27 name=__codelineno-102-27 href=#__codelineno-102-27></a>            <span class=k>if</span> <span class=n>part</span><span class=o>.</span><span class=n>kind</span> <span class=o>==</span> <span class=s2>&quot;data&quot;</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>part</span><span class=o>.</span><span class=n>data</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
</span><span id=__span-102-28><a id=__codelineno-102-28 name=__codelineno-102-28 href=#__codelineno-102-28></a>                <span class=n>result</span> <span class=o>=</span> <span class=n>part</span><span class=o>.</span><span class=n>data</span>
</span><span id=__span-102-29><a id=__codelineno-102-29 name=__codelineno-102-29 href=#__codelineno-102-29></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Task status: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;status&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-102-30><a id=__codelineno-102-30 name=__codelineno-102-30 href=#__codelineno-102-30></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Progress: </span><span class=si>{</span><span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;progress&#39;</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=streaming-mode_1>Streaming Mode<a class=headerlink href=#streaming-mode_1 title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-103-1><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=c1># Create message with streaming enabled</span>
</span><span id=__span-103-2><a id=__codelineno-103-2 name=__codelineno-103-2 href=#__codelineno-103-2></a><span class=n>message</span> <span class=o>=</span> <span class=n>Message</span><span class=p>(</span>
</span><span id=__span-103-3><a id=__codelineno-103-3 name=__codelineno-103-3 href=#__codelineno-103-3></a>    <span class=n>message_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span><span id=__span-103-4><a id=__codelineno-103-4 name=__codelineno-103-4 href=#__codelineno-103-4></a>    <span class=n>role</span><span class=o>=</span><span class=n>Role</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span><span id=__span-103-5><a id=__codelineno-103-5 name=__codelineno-103-5 href=#__codelineno-103-5></a>    <span class=n>parts</span><span class=o>=</span><span class=p>[</span><span class=n>data_part</span><span class=p>]</span>
</span><span id=__span-103-6><a id=__codelineno-103-6 name=__codelineno-103-6 href=#__codelineno-103-6></a><span class=p>)</span>
</span><span id=__span-103-7><a id=__codelineno-103-7 name=__codelineno-103-7 href=#__codelineno-103-7></a>
</span><span id=__span-103-8><a id=__codelineno-103-8 name=__codelineno-103-8 href=#__codelineno-103-8></a><span class=c1># Send message - will receive multiple updates</span>
</span><span id=__span-103-9><a id=__codelineno-103-9 name=__codelineno-103-9 href=#__codelineno-103-9></a><span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-103-10><a id=__codelineno-103-10 name=__codelineno-103-10 href=#__codelineno-103-10></a>    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=n>Message</span><span class=p>):</span>
</span><span id=__span-103-11><a id=__codelineno-103-11 name=__codelineno-103-11 href=#__codelineno-103-11></a>        <span class=c1># Process streaming updates</span>
</span><span id=__span-103-12><a id=__codelineno-103-12 name=__codelineno-103-12 href=#__codelineno-103-12></a>        <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>response</span><span class=o>.</span><span class=n>parts</span><span class=p>:</span>
</span><span id=__span-103-13><a id=__codelineno-103-13 name=__codelineno-103-13 href=#__codelineno-103-13></a>            <span class=k>if</span> <span class=n>part</span><span class=o>.</span><span class=n>kind</span> <span class=o>==</span> <span class=s2>&quot;data&quot;</span><span class=p>:</span>
</span><span id=__span-103-14><a id=__codelineno-103-14 name=__codelineno-103-14 href=#__codelineno-103-14></a>                <span class=n>update</span> <span class=o>=</span> <span class=n>part</span><span class=o>.</span><span class=n>data</span>
</span><span id=__span-103-15><a id=__codelineno-103-15 name=__codelineno-103-15 href=#__codelineno-103-15></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Update: </span><span class=si>{</span><span class=n>update</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-103-16><a id=__codelineno-103-16 name=__codelineno-103-16 href=#__codelineno-103-16></a>    <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>):</span>
</span><span id=__span-103-17><a id=__codelineno-103-17 name=__codelineno-103-17 href=#__codelineno-103-17></a>        <span class=c1># Response is (Task, Update) tuple</span>
</span><span id=__span-103-18><a id=__codelineno-103-18 name=__codelineno-103-18 href=#__codelineno-103-18></a>        <span class=n>task</span><span class=p>,</span> <span class=n>update</span> <span class=o>=</span> <span class=n>response</span>
</span><span id=__span-103-19><a id=__codelineno-103-19 name=__codelineno-103-19 href=#__codelineno-103-19></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Task </span><span class=si>{</span><span class=n>task</span><span class=o>.</span><span class=n>id</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>update</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h4 id=using-push-notifications-callback-mode>Using Push Notifications (Callback Mode)<a class=headerlink href=#using-push-notifications-callback-mode title="Permanent link">&para;</a></h4> <div class="language-python highlight"><pre><span></span><code><span id=__span-104-1><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.types</span><span class=w> </span><span class=kn>import</span> <span class=n>Configuration</span><span class=p>,</span> <span class=n>PushNotificationConfig</span>
</span><span id=__span-104-2><a id=__codelineno-104-2 name=__codelineno-104-2 href=#__codelineno-104-2></a>
</span><span id=__span-104-3><a id=__codelineno-104-3 name=__codelineno-104-3 href=#__codelineno-104-3></a><span class=c1># Create push notification config</span>
</span><span id=__span-104-4><a id=__codelineno-104-4 name=__codelineno-104-4 href=#__codelineno-104-4></a><span class=n>push_config</span> <span class=o>=</span> <span class=n>PushNotificationConfig</span><span class=p>(</span>
</span><span id=__span-104-5><a id=__codelineno-104-5 name=__codelineno-104-5 href=#__codelineno-104-5></a>    <span class=n>url</span><span class=o>=</span><span class=s2>&quot;https://your-server.com/callback&quot;</span><span class=p>,</span>
</span><span id=__span-104-6><a id=__codelineno-104-6 name=__codelineno-104-6 href=#__codelineno-104-6></a>    <span class=n>headers</span><span class=o>=</span><span class=p>{</span>
</span><span id=__span-104-7><a id=__codelineno-104-7 name=__codelineno-104-7 href=#__codelineno-104-7></a>        <span class=s2>&quot;Authorization&quot;</span><span class=p>:</span> <span class=s2>&quot;Bearer your-token&quot;</span>
</span><span id=__span-104-8><a id=__codelineno-104-8 name=__codelineno-104-8 href=#__codelineno-104-8></a>    <span class=p>}</span>
</span><span id=__span-104-9><a id=__codelineno-104-9 name=__codelineno-104-9 href=#__codelineno-104-9></a><span class=p>)</span>
</span><span id=__span-104-10><a id=__codelineno-104-10 name=__codelineno-104-10 href=#__codelineno-104-10></a>
</span><span id=__span-104-11><a id=__codelineno-104-11 name=__codelineno-104-11 href=#__codelineno-104-11></a><span class=c1># Create configuration</span>
</span><span id=__span-104-12><a id=__codelineno-104-12 name=__codelineno-104-12 href=#__codelineno-104-12></a><span class=n>configuration</span> <span class=o>=</span> <span class=n>Configuration</span><span class=p>(</span>
</span><span id=__span-104-13><a id=__codelineno-104-13 name=__codelineno-104-13 href=#__codelineno-104-13></a>    <span class=n>push_notification_config</span><span class=o>=</span><span class=n>push_config</span>
</span><span id=__span-104-14><a id=__codelineno-104-14 name=__codelineno-104-14 href=#__codelineno-104-14></a><span class=p>)</span>
</span><span id=__span-104-15><a id=__codelineno-104-15 name=__codelineno-104-15 href=#__codelineno-104-15></a>
</span><span id=__span-104-16><a id=__codelineno-104-16 name=__codelineno-104-16 href=#__codelineno-104-16></a><span class=c1># Create message with configuration</span>
</span><span id=__span-104-17><a id=__codelineno-104-17 name=__codelineno-104-17 href=#__codelineno-104-17></a><span class=n>message</span> <span class=o>=</span> <span class=n>Message</span><span class=p>(</span>
</span><span id=__span-104-18><a id=__codelineno-104-18 name=__codelineno-104-18 href=#__codelineno-104-18></a>    <span class=n>message_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span><span id=__span-104-19><a id=__codelineno-104-19 name=__codelineno-104-19 href=#__codelineno-104-19></a>    <span class=n>role</span><span class=o>=</span><span class=n>Role</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span><span id=__span-104-20><a id=__codelineno-104-20 name=__codelineno-104-20 href=#__codelineno-104-20></a>    <span class=n>parts</span><span class=o>=</span><span class=p>[</span><span class=n>data_part</span><span class=p>],</span>
</span><span id=__span-104-21><a id=__codelineno-104-21 name=__codelineno-104-21 href=#__codelineno-104-21></a>    <span class=n>configuration</span><span class=o>=</span><span class=n>configuration</span>
</span><span id=__span-104-22><a id=__codelineno-104-22 name=__codelineno-104-22 href=#__codelineno-104-22></a><span class=p>)</span>
</span><span id=__span-104-23><a id=__codelineno-104-23 name=__codelineno-104-23 href=#__codelineno-104-23></a>
</span><span id=__span-104-24><a id=__codelineno-104-24 name=__codelineno-104-24 href=#__codelineno-104-24></a><span class=c1># Send message - server will use callback mode</span>
</span><span id=__span-104-25><a id=__codelineno-104-25 name=__codelineno-104-25 href=#__codelineno-104-25></a><span class=c1># Response will be immediate, updates sent to callback URL</span>
</span><span id=__span-104-26><a id=__codelineno-104-26 name=__codelineno-104-26 href=#__codelineno-104-26></a><span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-104-27><a id=__codelineno-104-27 name=__codelineno-104-27 href=#__codelineno-104-27></a>    <span class=c1># Initial response only</span>
</span><span id=__span-104-28><a id=__codelineno-104-28 name=__codelineno-104-28 href=#__codelineno-104-28></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Initial response: </span><span class=si>{</span><span class=n>response</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-104-29><a id=__codelineno-104-29 name=__codelineno-104-29 href=#__codelineno-104-29></a>    <span class=k>break</span>  <span class=c1># Only expect initial response in callback mode</span>
</span></code></pre></div> <h3 id=task-tree-with-dependencies>Task Tree with Dependencies<a class=headerlink href=#task-tree-with-dependencies title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-105-1><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=c1># Create task tree with dependencies</span>
</span><span id=__span-105-2><a id=__codelineno-105-2 name=__codelineno-105-2 href=#__codelineno-105-2></a><span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-105-3><a id=__codelineno-105-3 name=__codelineno-105-3 href=#__codelineno-105-3></a>    <span class=p>{</span>
</span><span id=__span-105-4><a id=__codelineno-105-4 name=__codelineno-105-4 href=#__codelineno-105-4></a>        <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;parent-task&quot;</span><span class=p>,</span>
</span><span id=__span-105-5><a id=__codelineno-105-5 name=__codelineno-105-5 href=#__codelineno-105-5></a>        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Parent Task&quot;</span><span class=p>,</span>
</span><span id=__span-105-6><a id=__codelineno-105-6 name=__codelineno-105-6 href=#__codelineno-105-6></a>        <span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-105-7><a id=__codelineno-105-7 name=__codelineno-105-7 href=#__codelineno-105-7></a>        <span class=s2>&quot;dependencies&quot;</span><span class=p>:</span> <span class=p>[</span>
</span><span id=__span-105-8><a id=__codelineno-105-8 name=__codelineno-105-8 href=#__codelineno-105-8></a>            <span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;child-1&quot;</span><span class=p>,</span> <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>},</span>
</span><span id=__span-105-9><a id=__codelineno-105-9 name=__codelineno-105-9 href=#__codelineno-105-9></a>            <span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;child-2&quot;</span><span class=p>,</span> <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span><span id=__span-105-10><a id=__codelineno-105-10 name=__codelineno-105-10 href=#__codelineno-105-10></a>        <span class=p>],</span>
</span><span id=__span-105-11><a id=__codelineno-105-11 name=__codelineno-105-11 href=#__codelineno-105-11></a>        <span class=s2>&quot;schemas&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-105-12><a id=__codelineno-105-12 name=__codelineno-105-12 href=#__codelineno-105-12></a>            <span class=s2>&quot;method&quot;</span><span class=p>:</span> <span class=s2>&quot;aggregate_results_executor&quot;</span>
</span><span id=__span-105-13><a id=__codelineno-105-13 name=__codelineno-105-13 href=#__codelineno-105-13></a>        <span class=p>},</span>
</span><span id=__span-105-14><a id=__codelineno-105-14 name=__codelineno-105-14 href=#__codelineno-105-14></a>        <span class=s2>&quot;inputs&quot;</span><span class=p>:</span> <span class=p>{}</span>
</span><span id=__span-105-15><a id=__codelineno-105-15 name=__codelineno-105-15 href=#__codelineno-105-15></a>    <span class=p>},</span>
</span><span id=__span-105-16><a id=__codelineno-105-16 name=__codelineno-105-16 href=#__codelineno-105-16></a>    <span class=p>{</span>
</span><span id=__span-105-17><a id=__codelineno-105-17 name=__codelineno-105-17 href=#__codelineno-105-17></a>        <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;child-1&quot;</span><span class=p>,</span>
</span><span id=__span-105-18><a id=__codelineno-105-18 name=__codelineno-105-18 href=#__codelineno-105-18></a>        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Child Task 1&quot;</span><span class=p>,</span>
</span><span id=__span-105-19><a id=__codelineno-105-19 name=__codelineno-105-19 href=#__codelineno-105-19></a>        <span class=s2>&quot;parent_id&quot;</span><span class=p>:</span> <span class=s2>&quot;parent-task&quot;</span><span class=p>,</span>
</span><span id=__span-105-20><a id=__codelineno-105-20 name=__codelineno-105-20 href=#__codelineno-105-20></a>        <span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-105-21><a id=__codelineno-105-21 name=__codelineno-105-21 href=#__codelineno-105-21></a>        <span class=s2>&quot;schemas&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-105-22><a id=__codelineno-105-22 name=__codelineno-105-22 href=#__codelineno-105-22></a>            <span class=s2>&quot;method&quot;</span><span class=p>:</span> <span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-105-23><a id=__codelineno-105-23 name=__codelineno-105-23 href=#__codelineno-105-23></a>        <span class=p>},</span>
</span><span id=__span-105-24><a id=__codelineno-105-24 name=__codelineno-105-24 href=#__codelineno-105-24></a>        <span class=s2>&quot;inputs&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;resource&quot;</span><span class=p>:</span> <span class=s2>&quot;cpu&quot;</span><span class=p>}</span>
</span><span id=__span-105-25><a id=__codelineno-105-25 name=__codelineno-105-25 href=#__codelineno-105-25></a>    <span class=p>},</span>
</span><span id=__span-105-26><a id=__codelineno-105-26 name=__codelineno-105-26 href=#__codelineno-105-26></a>    <span class=p>{</span>
</span><span id=__span-105-27><a id=__codelineno-105-27 name=__codelineno-105-27 href=#__codelineno-105-27></a>        <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;child-2&quot;</span><span class=p>,</span>
</span><span id=__span-105-28><a id=__codelineno-105-28 name=__codelineno-105-28 href=#__codelineno-105-28></a>        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Child Task 2&quot;</span><span class=p>,</span>
</span><span id=__span-105-29><a id=__codelineno-105-29 name=__codelineno-105-29 href=#__codelineno-105-29></a>        <span class=s2>&quot;parent_id&quot;</span><span class=p>:</span> <span class=s2>&quot;parent-task&quot;</span><span class=p>,</span>
</span><span id=__span-105-30><a id=__codelineno-105-30 name=__codelineno-105-30 href=#__codelineno-105-30></a>        <span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-105-31><a id=__codelineno-105-31 name=__codelineno-105-31 href=#__codelineno-105-31></a>        <span class=s2>&quot;dependencies&quot;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;child-1&quot;</span><span class=p>,</span> <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}],</span>
</span><span id=__span-105-32><a id=__codelineno-105-32 name=__codelineno-105-32 href=#__codelineno-105-32></a>        <span class=s2>&quot;schemas&quot;</span><span class=p>:</span> <span class=p>{</span>
</span><span id=__span-105-33><a id=__codelineno-105-33 name=__codelineno-105-33 href=#__codelineno-105-33></a>            <span class=s2>&quot;method&quot;</span><span class=p>:</span> <span class=s2>&quot;system_info_executor&quot;</span>
</span><span id=__span-105-34><a id=__codelineno-105-34 name=__codelineno-105-34 href=#__codelineno-105-34></a>        <span class=p>},</span>
</span><span id=__span-105-35><a id=__codelineno-105-35 name=__codelineno-105-35 href=#__codelineno-105-35></a>        <span class=s2>&quot;inputs&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;resource&quot;</span><span class=p>:</span> <span class=s2>&quot;memory&quot;</span><span class=p>}</span>
</span><span id=__span-105-36><a id=__codelineno-105-36 name=__codelineno-105-36 href=#__codelineno-105-36></a>    <span class=p>}</span>
</span><span id=__span-105-37><a id=__codelineno-105-37 name=__codelineno-105-37 href=#__codelineno-105-37></a><span class=p>]</span>
</span><span id=__span-105-38><a id=__codelineno-105-38 name=__codelineno-105-38 href=#__codelineno-105-38></a>
</span><span id=__span-105-39><a id=__codelineno-105-39 name=__codelineno-105-39 href=#__codelineno-105-39></a><span class=c1># Create message with task tree</span>
</span><span id=__span-105-40><a id=__codelineno-105-40 name=__codelineno-105-40 href=#__codelineno-105-40></a><span class=n>data_part</span> <span class=o>=</span> <span class=n>DataPart</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;tasks&quot;</span><span class=p>:</span> <span class=n>tasks</span><span class=p>})</span>
</span><span id=__span-105-41><a id=__codelineno-105-41 name=__codelineno-105-41 href=#__codelineno-105-41></a><span class=n>message</span> <span class=o>=</span> <span class=n>Message</span><span class=p>(</span>
</span><span id=__span-105-42><a id=__codelineno-105-42 name=__codelineno-105-42 href=#__codelineno-105-42></a>    <span class=n>message_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span><span id=__span-105-43><a id=__codelineno-105-43 name=__codelineno-105-43 href=#__codelineno-105-43></a>    <span class=n>role</span><span class=o>=</span><span class=n>Role</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span><span id=__span-105-44><a id=__codelineno-105-44 name=__codelineno-105-44 href=#__codelineno-105-44></a>    <span class=n>parts</span><span class=o>=</span><span class=p>[</span><span class=n>data_part</span><span class=p>]</span>
</span><span id=__span-105-45><a id=__codelineno-105-45 name=__codelineno-105-45 href=#__codelineno-105-45></a><span class=p>)</span>
</span><span id=__span-105-46><a id=__codelineno-105-46 name=__codelineno-105-46 href=#__codelineno-105-46></a>
</span><span id=__span-105-47><a id=__codelineno-105-47 name=__codelineno-105-47 href=#__codelineno-105-47></a><span class=c1># Execute task tree</span>
</span><span id=__span-105-48><a id=__codelineno-105-48 name=__codelineno-105-48 href=#__codelineno-105-48></a><span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-105-49><a id=__codelineno-105-49 name=__codelineno-105-49 href=#__codelineno-105-49></a>    <span class=c1># Process responses</span>
</span><span id=__span-105-50><a id=__codelineno-105-50 name=__codelineno-105-50 href=#__codelineno-105-50></a>    <span class=k>pass</span>
</span></code></pre></div> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-106-1><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=k>try</span><span class=p>:</span>
</span><span id=__span-106-2><a id=__codelineno-106-2 name=__codelineno-106-2 href=#__codelineno-106-2></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-106-3><a id=__codelineno-106-3 name=__codelineno-106-3 href=#__codelineno-106-3></a>        <span class=c1># Process responses</span>
</span><span id=__span-106-4><a id=__codelineno-106-4 name=__codelineno-106-4 href=#__codelineno-106-4></a>        <span class=k>pass</span>
</span><span id=__span-106-5><a id=__codelineno-106-5 name=__codelineno-106-5 href=#__codelineno-106-5></a><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-106-6><a id=__codelineno-106-6 name=__codelineno-106-6 href=#__codelineno-106-6></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-106-7><a id=__codelineno-106-7 name=__codelineno-106-7 href=#__codelineno-106-7></a>    <span class=c1># Handle error appropriately</span>
</span></code></pre></div> <h3 id=complete-example>Complete Example<a class=headerlink href=#complete-example title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-107-1><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a><span class=kn>import</span><span class=w> </span><span class=nn>asyncio</span>
</span><span id=__span-107-2><a id=__codelineno-107-2 name=__codelineno-107-2 href=#__codelineno-107-2></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.client</span><span class=w> </span><span class=kn>import</span> <span class=n>ClientFactory</span><span class=p>,</span> <span class=n>ClientConfig</span>
</span><span id=__span-107-3><a id=__codelineno-107-3 name=__codelineno-107-3 href=#__codelineno-107-3></a><span class=kn>from</span><span class=w> </span><span class=nn>a2a.types</span><span class=w> </span><span class=kn>import</span> <span class=n>Message</span><span class=p>,</span> <span class=n>DataPart</span><span class=p>,</span> <span class=n>Role</span><span class=p>,</span> <span class=n>AgentCard</span>
</span><span id=__span-107-4><a id=__codelineno-107-4 name=__codelineno-107-4 href=#__codelineno-107-4></a><span class=kn>import</span><span class=w> </span><span class=nn>httpx</span>
</span><span id=__span-107-5><a id=__codelineno-107-5 name=__codelineno-107-5 href=#__codelineno-107-5></a><span class=kn>import</span><span class=w> </span><span class=nn>uuid</span>
</span><span id=__span-107-6><a id=__codelineno-107-6 name=__codelineno-107-6 href=#__codelineno-107-6></a>
</span><span id=__span-107-7><a id=__codelineno-107-7 name=__codelineno-107-7 href=#__codelineno-107-7></a><span class=k>async</span> <span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>():</span>
</span><span id=__span-107-8><a id=__codelineno-107-8 name=__codelineno-107-8 href=#__codelineno-107-8></a>    <span class=c1># Setup</span>
</span><span id=__span-107-9><a id=__codelineno-107-9 name=__codelineno-107-9 href=#__codelineno-107-9></a>    <span class=n>httpx_client</span> <span class=o>=</span> <span class=n>httpx</span><span class=o>.</span><span class=n>AsyncClient</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;http://localhost:8000&quot;</span><span class=p>)</span>
</span><span id=__span-107-10><a id=__codelineno-107-10 name=__codelineno-107-10 href=#__codelineno-107-10></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>ClientConfig</span><span class=p>(</span><span class=n>streaming</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>httpx_client</span><span class=o>=</span><span class=n>httpx_client</span><span class=p>)</span>
</span><span id=__span-107-11><a id=__codelineno-107-11 name=__codelineno-107-11 href=#__codelineno-107-11></a>    <span class=n>factory</span> <span class=o>=</span> <span class=n>ClientFactory</span><span class=p>(</span><span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>)</span>
</span><span id=__span-107-12><a id=__codelineno-107-12 name=__codelineno-107-12 href=#__codelineno-107-12></a>
</span><span id=__span-107-13><a id=__codelineno-107-13 name=__codelineno-107-13 href=#__codelineno-107-13></a>    <span class=c1># Get agent card</span>
</span><span id=__span-107-14><a id=__codelineno-107-14 name=__codelineno-107-14 href=#__codelineno-107-14></a>    <span class=n>card_response</span> <span class=o>=</span> <span class=k>await</span> <span class=n>httpx_client</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;/.well-known/agent-card&quot;</span><span class=p>)</span>
</span><span id=__span-107-15><a id=__codelineno-107-15 name=__codelineno-107-15 href=#__codelineno-107-15></a>    <span class=n>agent_card</span> <span class=o>=</span> <span class=n>AgentCard</span><span class=p>(</span><span class=o>**</span><span class=n>card_response</span><span class=o>.</span><span class=n>json</span><span class=p>())</span>
</span><span id=__span-107-16><a id=__codelineno-107-16 name=__codelineno-107-16 href=#__codelineno-107-16></a>    <span class=n>client</span> <span class=o>=</span> <span class=n>factory</span><span class=o>.</span><span class=n>create</span><span class=p>(</span><span class=n>card</span><span class=o>=</span><span class=n>agent_card</span><span class=p>)</span>
</span><span id=__span-107-17><a id=__codelineno-107-17 name=__codelineno-107-17 href=#__codelineno-107-17></a>
</span><span id=__span-107-18><a id=__codelineno-107-18 name=__codelineno-107-18 href=#__codelineno-107-18></a>    <span class=c1># Create task</span>
</span><span id=__span-107-19><a id=__codelineno-107-19 name=__codelineno-107-19 href=#__codelineno-107-19></a>    <span class=n>task_data</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-107-20><a id=__codelineno-107-20 name=__codelineno-107-20 href=#__codelineno-107-20></a>        <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=s2>&quot;my-task&quot;</span><span class=p>,</span>
</span><span id=__span-107-21><a id=__codelineno-107-21 name=__codelineno-107-21 href=#__codelineno-107-21></a>        <span class=s2>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;My Task&quot;</span><span class=p>,</span>
</span><span id=__span-107-22><a id=__codelineno-107-22 name=__codelineno-107-22 href=#__codelineno-107-22></a>        <span class=s2>&quot;user_id&quot;</span><span class=p>:</span> <span class=s2>&quot;user123&quot;</span><span class=p>,</span>
</span><span id=__span-107-23><a id=__codelineno-107-23 name=__codelineno-107-23 href=#__codelineno-107-23></a>        <span class=s2>&quot;schemas&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;method&quot;</span><span class=p>:</span> <span class=s2>&quot;system_info_executor&quot;</span><span class=p>},</span>
</span><span id=__span-107-24><a id=__codelineno-107-24 name=__codelineno-107-24 href=#__codelineno-107-24></a>        <span class=s2>&quot;inputs&quot;</span><span class=p>:</span> <span class=p>{}</span>
</span><span id=__span-107-25><a id=__codelineno-107-25 name=__codelineno-107-25 href=#__codelineno-107-25></a>    <span class=p>}</span>
</span><span id=__span-107-26><a id=__codelineno-107-26 name=__codelineno-107-26 href=#__codelineno-107-26></a>
</span><span id=__span-107-27><a id=__codelineno-107-27 name=__codelineno-107-27 href=#__codelineno-107-27></a>    <span class=c1># Create message</span>
</span><span id=__span-107-28><a id=__codelineno-107-28 name=__codelineno-107-28 href=#__codelineno-107-28></a>    <span class=n>message</span> <span class=o>=</span> <span class=n>Message</span><span class=p>(</span>
</span><span id=__span-107-29><a id=__codelineno-107-29 name=__codelineno-107-29 href=#__codelineno-107-29></a>        <span class=n>message_id</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span><span id=__span-107-30><a id=__codelineno-107-30 name=__codelineno-107-30 href=#__codelineno-107-30></a>        <span class=n>role</span><span class=o>=</span><span class=n>Role</span><span class=o>.</span><span class=n>user</span><span class=p>,</span>
</span><span id=__span-107-31><a id=__codelineno-107-31 name=__codelineno-107-31 href=#__codelineno-107-31></a>        <span class=n>parts</span><span class=o>=</span><span class=p>[</span><span class=n>DataPart</span><span class=p>(</span><span class=n>kind</span><span class=o>=</span><span class=s2>&quot;data&quot;</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;tasks&quot;</span><span class=p>:</span> <span class=p>[</span><span class=n>task_data</span><span class=p>]})]</span>
</span><span id=__span-107-32><a id=__codelineno-107-32 name=__codelineno-107-32 href=#__codelineno-107-32></a>    <span class=p>)</span>
</span><span id=__span-107-33><a id=__codelineno-107-33 name=__codelineno-107-33 href=#__codelineno-107-33></a>
</span><span id=__span-107-34><a id=__codelineno-107-34 name=__codelineno-107-34 href=#__codelineno-107-34></a>    <span class=c1># Execute and process responses</span>
</span><span id=__span-107-35><a id=__codelineno-107-35 name=__codelineno-107-35 href=#__codelineno-107-35></a>    <span class=k>async</span> <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>client</span><span class=o>.</span><span class=n>send_message</span><span class=p>(</span><span class=n>message</span><span class=p>):</span>
</span><span id=__span-107-36><a id=__codelineno-107-36 name=__codelineno-107-36 href=#__codelineno-107-36></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=n>Message</span><span class=p>):</span>
</span><span id=__span-107-37><a id=__codelineno-107-37 name=__codelineno-107-37 href=#__codelineno-107-37></a>            <span class=k>for</span> <span class=n>part</span> <span class=ow>in</span> <span class=n>response</span><span class=o>.</span><span class=n>parts</span><span class=p>:</span>
</span><span id=__span-107-38><a id=__codelineno-107-38 name=__codelineno-107-38 href=#__codelineno-107-38></a>                <span class=k>if</span> <span class=n>part</span><span class=o>.</span><span class=n>kind</span> <span class=o>==</span> <span class=s2>&quot;data&quot;</span><span class=p>:</span>
</span><span id=__span-107-39><a id=__codelineno-107-39 name=__codelineno-107-39 href=#__codelineno-107-39></a>                    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Result: </span><span class=si>{</span><span class=n>part</span><span class=o>.</span><span class=n>data</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-107-40><a id=__codelineno-107-40 name=__codelineno-107-40 href=#__codelineno-107-40></a>
</span><span id=__span-107-41><a id=__codelineno-107-41 name=__codelineno-107-41 href=#__codelineno-107-41></a>    <span class=k>await</span> <span class=n>httpx_client</span><span class=o>.</span><span class=n>aclose</span><span class=p>()</span>
</span><span id=__span-107-42><a id=__codelineno-107-42 name=__codelineno-107-42 href=#__codelineno-107-42></a>
</span><span id=__span-107-43><a id=__codelineno-107-43 name=__codelineno-107-43 href=#__codelineno-107-43></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
</span><span id=__span-107-44><a id=__codelineno-107-44 name=__codelineno-107-44 href=#__codelineno-107-44></a>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span>
</span></code></pre></div> <h2 id=a2a-protocol-documentation>A2A Protocol Documentation<a class=headerlink href=#a2a-protocol-documentation title="Permanent link">&para;</a></h2> <p>For detailed information about the A2A Protocol, please refer to the official documentation:</p> <ul> <li><strong>A2A Protocol Official Documentation</strong>: <a href=https://www.a2aprotocol.org/en/docs>https://www.a2aprotocol.org/en/docs</a></li> <li><strong>A2A Protocol Homepage</strong>: <a href=https://www.a2aprotocol.org>https://www.a2aprotocol.org</a></li> </ul> <p>These resources provide comprehensive information about: - A2A Protocol core concepts and architecture - Protocol specifications and data formats - Client SDK API reference - Best practices and examples - Security and authentication - Push notifications and streaming</p> <h2 id=see-also>See Also<a class=headerlink href=#see-also title="Permanent link">&para;</a></h2> <ul> <li><a href=https://github.com/aipartnerup/a2a-protocol>A2A Protocol Specification</a></li> <li><a href=../../cli/ >CLI Usage Guide</a></li> <li><a href=../../architecture/overview/ >Architecture Documentation</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 aipartnerup </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/aipartnerup/apflow target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/apflow/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>